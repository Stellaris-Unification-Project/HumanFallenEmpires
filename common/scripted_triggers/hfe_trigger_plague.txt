#

# for pop
human_fallen_empires_trigger_plague_is_immune = {
	or = {
		has_trait = human_fallen_empires_species_trait_immune
		human_fallen_empires_trigger_is_brainworm_species = yes
		human_fallen_empires_trigger_is_robot = yes
	}
}

human_fallen_empires_trigger_plague_is_resist = {
	or = {
		human_fallen_empires_trigger_is_psionic = yes
		has_trait = trait_cybernetic
	}
}

# for planet
human_fallen_empires_trigger_plague_valid_planet = {
	exists = owner
	owner = {
		human_fallen_empires_trigger_is_awake = yes
	}
	nor = {
		has_global_flag = human_fallen_empires_disable_plague
		has_planet_flag = human_fallen_empires_plague_planet
		is_planet_class = human_fallen_empires_pc_pirate_base
		and = {
			exists = controller
			controller = {
				is_country_type = human_fallen_empires_plague_zombie
			}
		}
	}
	is_under_colonization = no
	num_pops > 0
	any_owned_pop = {
		human_fallen_empires_trigger_plague_is_immune = no
	}
}
