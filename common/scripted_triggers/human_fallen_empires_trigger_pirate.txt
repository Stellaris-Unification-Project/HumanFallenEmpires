#
@human_fallen_empires_pirate_fleet_power_minimum = 4000

# for country
human_fallen_empires_trigger_pirate_diplomacy_any_menu = {
	or = {
		has_country_flag = human_fallen_empires_pirate.101.raid_menu
		has_country_flag = human_fallen_empires_pirate.101.traid_menu
		has_country_flag = human_fallen_empires_pirate.101.slave_menu
		has_country_flag = human_fallen_empires_pirate.101.casino_menu
		has_country_flag = human_fallen_empires_pirate.101.casino_menu.challenge
	}
}

# for any
human_fallen_empires_trigger_exists_any_slave_target = {
	or = {
		exists = event_target:human_fallen_empires_slave_target_0
		exists = event_target:human_fallen_empires_slave_target_1
		exists = event_target:human_fallen_empires_slave_target_2
		exists = event_target:human_fallen_empires_slave_target_3
		exists = event_target:human_fallen_empires_slave_target_4
		exists = event_target:human_fallen_empires_slave_target_5
	}
}

# valid pirate target planet for fleet logic, root.owner is pirate, owner planet's owner
# for planet
human_fallen_empires_pirate_valid_target_planet = {
	or = {
		and = {
			has_owner = no
			has_orbital_station = yes
			exists = controller
			controller = {
				human_fallen_empires_pirate_valid_target_country = yes
			}
		}
		and = {
			human_fallen_empires_trigger_primitive_planet = no
			not = {
				has_modifier = human_fallen_empires_pirate_ravaged_planet
			}
			exists = owner
			owner = {
				human_fallen_empires_pirate_valid_target_country = yes
			}
		}
	}
}

# for country
human_fallen_empires_pirate_valid_target_country = {
	is_hostile = root.owner
	nor = {
		is_country_type = human_fallen_empires_pirate
		is_country_type = human_fallen_empires_drone
	}
}

# for system
human_fallen_empires_pirate_valid_target_system = {
	not = {
		has_star_flag = human_fallen_empires_pirate_block
		any_ship_in_system = {
			or = {
				is_ship_size = orbital_station
				is_ship_class = shipclass_military
				is_ship_class = shipclass_military_station
			}
			exists = owner
			owner = {
				is_hostile = root.owner
			}
			root = {
				fleet_power < @human_fallen_empires_pirate_fleet_power_minimum
			}
		}
	}
}

# for planet
human_fallen_empires_pirate_valid_target_planet_prior = {
	or = {
		and = {
			exists = controller
			controller = {
				has_opinion_modifier = {
					who = root.owner
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
		}
		and = {
			exists = owner
			owner = {
				has_opinion_modifier = {
					who = root.owner
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
		}
	}
	human_fallen_empires_pirate_valid_target_planet = yes
}
