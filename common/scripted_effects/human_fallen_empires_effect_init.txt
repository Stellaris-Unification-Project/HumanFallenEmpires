#

# for country give tech
human_fallen_empires_effect_init_give_tech_t1 = {
	give_technology = { message = no tech = tech_corvette_build_speed }
	give_technology = { message = no tech = tech_corvette_hull_1 }
	give_technology = { message = no tech = tech_strike_craft_1 }
	give_technology = { message = no tech = tech_ship_armor_2 }
	give_technology = { message = no tech = tech_powered_exoskeletons }
	give_technology = { message = no tech = tech_mining_network_2 }
	give_technology = { message = no tech = tech_mineral_processing_1 }
	give_technology = { message = no tech = tech_engineering_lab_1 }
	give_technology = { message = no tech = tech_robotic_workers }
	give_technology = { message = no tech = tech_afterburners_1 }
	give_technology = { message = no tech = tech_assembly_pattern }
	give_technology = { message = no tech = tech_mass_drivers_2 }
	give_technology = { message = no tech = tech_flak_batteries_1 }
	give_technology = { message = no tech = tech_missiles_2 }
	give_technology = { message = no tech = tech_databank_uplinks }
	give_technology = { message = no tech = tech_physics_lab_1 }
	give_technology = { message = no tech = tech_administrative_ai }
	give_technology = { message = no tech = tech_cryostasis_1 }
	give_technology = { message = no tech = tech_automated_exploration }
	give_technology = { message = no tech = tech_combat_computers_1 }
	give_technology = { message = no tech = tech_auxiliary_fire_control }
	give_technology = { message = no tech = tech_fusion_power }
	give_technology = { message = no tech = tech_reactor_boosters_2 }
	give_technology = { message = no tech = tech_reactor_boosters_3 }
	give_technology = { message = no tech = tech_shields_2 }
	give_technology = { message = no tech = tech_power_plant_2 }
	give_technology = { message = no tech = tech_power_hub_1 }
	give_technology = { message = no tech = tech_lasers_2 }
	give_technology = { message = no tech = tech_pd_tracking_1 }
	give_technology = { message = no tech = tech_hydroponics }
	give_technology = { message = no tech = tech_biolab_1 }
	give_technology = { message = no tech = tech_alien_life_studies }
	give_technology = { message = no tech = tech_space_trading }
	give_technology = { message = no tech = tech_frontier_health }
	give_technology = { message = no tech = tech_tb_dense_jungle }
	give_technology = { message = no tech = tech_tb_quicksand_basin }
	give_technology = { message = no tech = tech_tb_noxious_swamp }
	give_technology = { message = no tech = tech_tb_massive_glacier }
	give_technology = { message = no tech = tech_tb_toxic_kelp }
	give_technology = { message = no tech = tech_tb_deep_sinkhole }
	give_technology = { message = no tech = tech_genome_mapping }
	give_technology = { message = no tech = tech_ground_defense_planning }
	give_technology = { message = no tech = tech_planetary_unification }
	give_technology = { message = no tech = tech_adaptive_bureaucracy }
	give_technology = { message = no tech = tech_neural_implants }
	give_technology = { message = no tech = tech_heritage_site }
	give_technology = { message = no tech = tech_holographic_rituals }
	give_technology = { message = no tech = tech_robomodding_m }
	give_technology = { message = no tech = tech_robomodding }
	give_technology = { message = no tech = tech_modular_components }
}

human_fallen_empires_effect_init_give_tech_t2 = {
	human_fallen_empires_effect_init_give_tech_t1 = yes
	give_technology = { message = no tech = tech_destroyers }
	give_technology = { message = no tech = tech_corvette_hull_2 }
	give_technology = { message = no tech = tech_destroyer_build_speed }
	give_technology = { message = no tech = tech_destroyer_hull_1 }
	give_technology = { message = no tech = tech_starbase_3 }
	give_technology = { message = no tech = tech_modular_engineering }
	give_technology = { message = no tech = tech_strike_craft_2 }
	give_technology = { message = no tech = tech_ship_armor_3 }
	give_technology = { message = no tech = tech_thrusters_2 }
	give_technology = { message = no tech = tech_defense_platform_hull_1 }
	give_technology = { message = no tech = tech_mining_network_3 }
	give_technology = { message = no tech = tech_engineering_lab_2 }
	give_technology = { message = no tech = tech_droid_workers }
	give_technology = { message = no tech = tech_mass_drivers_3 }
	give_technology = { message = no tech = tech_autocannons_1 }
	give_technology = { message = no tech = tech_missiles_3 }
	give_technology = { message = no tech = tech_swarmer_missiles_1 }
	give_technology = { message = no tech = tech_torpedoes_1 }
	#give_technology = { message = no tech = tech_improved_databank_uplinks }
	give_technology = { message = no tech = tech_curator_lab }
	give_technology = { message = no tech = tech_archeology_lab }
	give_technology = { message = no tech = tech_physics_lab_2 }
	give_technology = { message = no tech = tech_self_aware_logic }
	give_technology = { message = no tech = tech_cold_fusion_power }
	give_technology = { message = no tech = tech_shields_3 }
	give_technology = { message = no tech = tech_shield_rechargers_1 }
	give_technology = { message = no tech = tech_sensors_2 }
	give_technology = { message = no tech = tech_power_plant_3 }
	give_technology = { message = no tech = tech_hyper_drive_2 }
	give_technology = { message = no tech = tech_ftl_inhibitor }
	give_technology = { message = no tech = tech_lasers_3 }
	give_technology = { message = no tech = tech_plasma_1 }
	give_technology = { message = no tech = tech_disruptors_1 }
	give_technology = { message = no tech = tech_pd_tracking_2 }
	give_technology = { message = no tech = tech_gene_crops }
	give_technology = { message = no tech = tech_biolab_2 }
	give_technology = { message = no tech = tech_colonization_2 }
	give_technology = { message = no tech = tech_colonization_3 }
	give_technology = { message = no tech = tech_frontier_hospital }
	give_technology = { message = no tech = tech_tb_mountain_range }
	give_technology = { message = no tech = tech_tb_volcano }
	give_technology = { message = no tech = tech_tb_dangerous_wildlife }
	give_technology = { message = no tech = tech_terrestrial_sculpting }
	give_technology = { message = no tech = tech_vitality_boosters }
	give_technology = { message = no tech = tech_epigenetic_triggers }
	give_technology = { message = no tech = tech_cloning }
	give_technology = { message = no tech = tech_gene_banks }
	give_technology = { message = no tech = tech_doctrine_fleet_size_1 }
	give_technology = { message = no tech = tech_doctrine_fleet_size_2 }
	give_technology = { message = no tech = tech_interstellar_fleet_traditions }
	give_technology = { message = no tech = tech_doctrine_navy_size_1 }
	give_technology = { message = no tech = tech_centralized_command }
	give_technology = { message = no tech = tech_global_defense_grid }
	give_technology = { message = no tech = tech_galactic_ambitions }
	give_technology = { message = no tech = tech_interstellar_campaigns }
	give_technology = { message = no tech = tech_colonial_centralization }
	give_technology = { message = no tech = tech_subdermal_stimulation }
	give_technology = { message = no tech = tech_colonial_bureaucracy }
	give_technology = { message = no tech = tech_living_state }
	give_technology = { message = no tech = tech_autonomous_agents }
	give_technology = { message = no tech = tech_artificial_moral_codes }
	give_technology = { message = no tech = tech_hypercomms_forum }
	give_technology = { message = no tech = tech_consecration_fields }
	give_technology = { message = no tech = tech_mine_garanthium }
	give_technology = { message = no tech = tech_lythuric_gas }
	give_technology = { message = no tech = tech_engos_vapor }
	give_technology = { message = no tech = tech_mine_teldar }
	give_technology = { message = no tech = tech_mine_yuranic }
	give_technology = { message = no tech = tech_pitharan_dust }
	give_technology = { message = no tech = tech_mine_orillium }
	give_technology = { message = no tech = tech_mine_betharian }
	give_technology = { message = no tech = tech_mine_satramene }
	give_technology = { message = no tech = tech_robomodding_points_1 }
	give_technology = { message = no tech = tech_adaptive_combat_algorithms }
	give_technology = { message = no tech = tech_intelligent_factories }
}

human_fallen_empires_effect_init_give_tech_t3 = {
	human_fallen_empires_effect_init_give_tech_t1 = yes
	human_fallen_empires_effect_init_give_tech_t2 = yes
	give_technology = { message = no tech = tech_cruisers }
	give_technology = { message = no tech = tech_destroyer_hull_2 }
	give_technology = { message = no tech = tech_cruiser_build_speed }
	give_technology = { message = no tech = tech_cruiser_hull_1 }
	give_technology = { message = no tech = tech_starbase_4 }
	give_technology = { message = no tech = tech_space_defense_station_improvement }
	give_technology = { message = no tech = tech_strike_craft_3 }
	give_technology = { message = no tech = tech_ship_armor_4 }
	give_technology = { message = no tech = tech_thrusters_3 }
	give_technology = { message = no tech = tech_mineral_processing_2 }
	give_technology = { message = no tech = tech_afterburners_2 }
	give_technology = { message = no tech = tech_construction_templates }
	give_technology = { message = no tech = tech_mass_drivers_4 }
	give_technology = { message = no tech = tech_kinetic_artillery_1 }
	give_technology = { message = no tech = tech_autocannons_2 }
	give_technology = { message = no tech = tech_flak_batteries_2 }
	give_technology = { message = no tech = tech_missiles_4 }
	give_technology = { message = no tech = tech_torpedoes_2 }
	give_technology = { message = no tech = tech_cryostasis_2 }
	give_technology = { message = no tech = tech_combat_computers_2 }
	give_technology = { message = no tech = tech_synchronized_defences }
	give_technology = { message = no tech = tech_antimatter_power }
	give_technology = { message = no tech = tech_shields_4 }
	give_technology = { message = no tech = tech_planetary_shield_generator }
	give_technology = { message = no tech = tech_sensors_3 }
	give_technology = { message = no tech = tech_power_hub_2 }
	give_technology = { message = no tech = tech_hyper_drive_3 }
	give_technology = { message = no tech = tech_wormhole_stabilization }
	give_technology = { message = no tech = tech_lasers_4 }
	give_technology = { message = no tech = tech_plasma_2 }
	give_technology = { message = no tech = tech_disruptors_2 }
	give_technology = { message = no tech = tech_energy_torpedoes_1 }
	give_technology = { message = no tech = tech_colonization_4 }
	give_technology = { message = no tech = tech_tomb_world_adaption }
	give_technology = { message = no tech = tech_ecological_adaptation }
	give_technology = { message = no tech = tech_gene_tailoring }
	give_technology = { message = no tech = tech_glandular_acclimation }
	give_technology = { message = no tech = tech_gene_expressions }
	give_technology = { message = no tech = tech_selected_lineages }
	give_technology = { message = no tech = tech_regenerative_hull_tissue }
	give_technology = { message = no tech = tech_doctrine_fleet_size_3 }
	give_technology = { message = no tech = tech_refit_standards }
	give_technology = { message = no tech = tech_command_matrix }
	give_technology = { message = no tech = tech_doctrine_navy_size_2 }
	give_technology = { message = no tech = tech_combat_training }
	give_technology = { message = no tech = tech_psionic_theory }
	give_technology = { message = no tech = tech_telepathy }
	give_technology = { message = no tech = tech_galactic_bureaucracy }
	give_technology = { message = no tech = tech_collective_self }
	give_technology = { message = no tech = tech_embodied_dynamism }
	give_technology = { message = no tech = tech_synthetic_thought_patterns }
	give_technology = { message = no tech = tech_autocurating_vault }
	give_technology = { message = no tech = tech_binary_motivators }
}

human_fallen_empires_effect_init_give_tech_t4 = {
	human_fallen_empires_effect_init_give_tech_t1 = yes
	human_fallen_empires_effect_init_give_tech_t2 = yes
	human_fallen_empires_effect_init_give_tech_t3 = yes
	give_technology = { message = no tech = tech_battleships }
	give_technology = { message = no tech = tech_cruiser_hull_2 }
	give_technology = { message = no tech = tech_battleship_build_speed }
	give_technology = { message = no tech = tech_battleship_hull_1 }
	give_technology = { message = no tech = tech_starbase_5 }
	give_technology = { message = no tech = tech_ship_armor_5 }
	give_technology = { message = no tech = tech_thrusters_4 }
	give_technology = { message = no tech = tech_mining_network_4 }
	give_technology = { message = no tech = tech_engineering_lab_3 }
	give_technology = { message = no tech = tech_synthetic_workers }
	give_technology = { message = no tech = tech_synthetic_leaders }
	give_technology = { message = no tech = tech_mass_drivers_5 }
	give_technology = { message = no tech = tech_kinetic_artillery_2 }
	give_technology = { message = no tech = tech_mass_accelerator_1 }
	give_technology = { message = no tech = tech_mass_accelerator_2 }
	give_technology = { message = no tech = tech_autocannons_3 }
	give_technology = { message = no tech = tech_flak_batteries_3 }
	give_technology = { message = no tech = tech_missiles_5 }
	give_technology = { message = no tech = tech_swarmer_missiles_2 }
	give_technology = { message = no tech = tech_physics_lab_3 }
	give_technology = { message = no tech = tech_global_research_initiative }
	give_technology = { message = no tech = tech_sapient_ai }
	give_technology = { message = no tech = tech_combat_computers_3 }
	give_technology = { message = no tech = tech_combat_computers_autonomous }
	give_technology = { message = no tech = tech_zero_point_power }
	give_technology = { message = no tech = tech_shields_5 }
	give_technology = { message = no tech = tech_sensors_4 }
	give_technology = { message = no tech = tech_power_plant_4 }
	give_technology = { message = no tech = tech_gateway_activation }
	give_technology = { message = no tech = tech_lasers_5 }
	give_technology = { message = no tech = tech_energy_lance_1 }
	give_technology = { message = no tech = tech_energy_lance_2 }
	give_technology = { message = no tech = tech_plasma_3 }
	give_technology = { message = no tech = tech_arc_emitter_1 }
	give_technology = { message = no tech = tech_arc_emitter_2 }
	give_technology = { message = no tech = tech_disruptors_3 }
	give_technology = { message = no tech = tech_energy_torpedoes_2 }
	give_technology = { message = no tech = tech_pd_tracking_3 }
	give_technology = { message = no tech = tech_nano_vitality_crops }
	give_technology = { message = no tech = tech_nutrient_replication }
	give_technology = { message = no tech = tech_biolab_3 }
	give_technology = { message = no tech = tech_colonization_5 }
	give_technology = { message = no tech = tech_climate_restoration }
	give_technology = { message = no tech = tech_gene_seed_purification }
	give_technology = { message = no tech = tech_morphogenetic_field_mastery }
	give_technology = { message = no tech = tech_capacity_boosters }
	give_technology = { message = no tech = tech_doctrine_fleet_size_4 }
	give_technology = { message = no tech = tech_doctrine_fleet_size_5 }
	give_technology = { message = no tech = tech_doctrine_navy_size_3 }
	give_technology = { message = no tech = tech_doctrine_navy_size_4 }
	give_technology = { message = no tech = tech_precognition_interface }
	give_technology = { message = no tech = tech_manifest_destiny }
	give_technology = { message = no tech = tech_galactic_campaigns }
	give_technology = { message = no tech = tech_galactic_administration }
	give_technology = { message = no tech = tech_galactic_markets }
	give_technology = { message = no tech = tech_galactic_benevolence }
	give_technology = { message = no tech = tech_transcendent_faith }
	give_technology = { message = no tech = tech_mine_neutronium }
	give_technology = { message = no tech = tech_mine_zro }
	give_technology = { message = no tech = tech_robomodding_points_2 }
	give_technology = { message = no tech = tech_probability_theory }
	give_technology = { message = no tech = tech_nanite_assemblers }
	give_technology = { message = no tech = tech_biomechanics }
	give_technology = { message = no tech = tech_singularity_core }
}

human_fallen_empires_effect_init_give_tech_t5 = {
	human_fallen_empires_effect_init_give_tech_t1 = yes
	human_fallen_empires_effect_init_give_tech_t2 = yes
	human_fallen_empires_effect_init_give_tech_t3 = yes
	human_fallen_empires_effect_init_give_tech_t4 = yes
	give_technology = { message = no tech = tech_pk_cracker }
	give_technology = { message = no tech = tech_pk_shielder }
	give_technology = { message = no tech = tech_pk_neutron }
	give_technology = { message = no tech = tech_pk_godray }
	give_technology = { message = no tech = tech_pk_nanobots }
	give_technology = { message = no tech = tech_titans }
	give_technology = { message = no tech = tech_battleship_hull_2 }
	give_technology = { message = no tech = tech_titan_hull_1 }
	give_technology = { message = no tech = tech_titan_hull_2 }
	give_technology = { message = no tech = tech_mega_engineering }
	give_technology = { message = no tech = tech_gateway_construction }
	give_technology = { message = no tech = tech_jump_drive_1 }
	give_technology = { message = no tech = tech_psi_jump_drive_1 }
	give_technology = { message = no tech = tech_ascension_theory }
	give_technology = { message = no tech = tech_ascension_theory_apoc }
	give_technology = { message = no tech = tech_mine_living_metal }
}

# for country make colony, need human_fallen_empires_init_target
human_fallen_empires_effect_init_make_colony = {
	event_target:human_fallen_empires_init_target.capital_scope = {
		closest_system = {
			limit = {
				or = {
					and = {
						exists = space_owner
						space_owner = {
							is_country = event_target:human_fallen_empires_init_target
						}
					}
					not = {
						exists = space_owner
					}
				}
				any_planet = {
					habitability = {
						who = event_target:human_fallen_empires_init_target.species
						value > 0.2
					}
					has_owner = no
				}
				not = {
					any_ship_in_system = {
						exists = owner
						owner = {
							is_hostile = event_target:human_fallen_empires_init_target
						}
					}
				}
			}
			random_system_planet = {
				limit = {
					habitability = {
						who = event_target:human_fallen_empires_init_target.species
						value > 0.2
					}
					has_owner = no
				}
				create_colony = {
					owner = event_target:human_fallen_empires_init_target
					species = owner
				}
				random_tile = {
					limit = {
						has_building = building_colony_shelter
					}
					remove_building = yes
				}
				human_fallen_empires_effect_init_develop_colony = yes
			}
		}
	}
}

human_fallen_empires_effect_init_develop_colony = {
	human_fallen_empires_effect_init_clear_blockers = yes
	# set buildings
	if = {
		limit = {
			any_tile = {
				or = {
					autobuild_trigger_tile_has_energy_more_than_others = yes
					has_any_resource = no
				}
				has_blocker = no
				num_adjacent_tiles > 3
			}
		}
		random_tile = {
			limit = {
				or = {
					autobuild_trigger_tile_has_energy_more_than_others = yes
					has_resource = no
				}
				has_blocker = no
				num_adjacent_tiles > 3
			}
			human_fallen_empires_effect_init_set_capital = yes
		}
		else = {
			random_tile = {
				limit = {
					or = {
						autobuild_trigger_tile_has_energy_more_than_others = yes
						has_resource = no
					}
					has_blocker = no
					num_adjacent_tiles > 2
				}
				human_fallen_empires_effect_init_set_capital = yes
			}
		}
	}
	every_tile = {
		limit = {
			has_any_resource = yes
			has_building = no
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_science_more_than_others = yes
			}
			human_fallen_empires_effect_init_set_lab = yes
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_energy_more_than_others = yes
			}
			human_fallen_empires_effect_init_set_power_plant = yes
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_minerals_more_than_others = yes
			}
			human_fallen_empires_effect_init_set_mine = yes
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_food_more_than_others = yes
			}
			if = {
				limit = {
					owner = {
						has_authority = auth_machine_intelligence
					}
				}
				human_fallen_empires_effect_init_set_power_plant = yes
				else = {
					human_fallen_empires_effect_init_set_farm = yes
				}
			}
		}
	}
	human_fallen_empires_effect_init_set_pops = yes
	human_fallen_empires_effect_init_set_starbase = yes
}

human_fallen_empires_effect_init_clear_blockers = {
	every_tile = {
		limit = {
			has_any_resource = yes
			has_blocker = yes
		}
		remove_blocker = yes
	}
}

human_fallen_empires_effect_init_set_pops = {
	every_tile = {
		limit = {
			has_building = yes
			has_pop = no
		}
		create_pop = {
			species = event_target:human_fallen_empires_init_target.species
		}
	}
}

human_fallen_empires_effect_init_set_capital = {
	if = {
		limit = {
			owner = {
				has_technology = tech_colonial_centralization
			}
		}
		set_building = building_capital_2
		else = {
			set_building = building_capital_1
		}
	}
}

human_fallen_empires_effect_init_set_lab = {
	if = {
		limit = {
			has_resource = physics_research
		}
		owner = {
			switch = {
				trigger = has_technology
				tech_physics_lab_3 = {
					prev = {
						# if = {
						# 	limit = {
						# 		planet = {
						# 			has_building = building_capital_3
						# 		}
						# 	}
						# }
						set_building = building_physics_lab_3
					}
				}
				tech_physics_lab_2 = {
					prev = {
						set_building = building_physics_lab_2
					}
				}
				tech_physics_lab_1 = {
					prev = {
						set_building = building_physics_lab_1
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = society_research
				}
				owner = {
					switch = {
						trigger = has_technology
						tech_biolab_3 = {
							prev = {
								set_building = building_biolab_3
							}
						}
						tech_biolab_2 = {
							prev = {
								set_building = building_biolab_2
							}
						}
						tech_biolab_1 = {
							prev = {
								set_building = building_biolab_1
							}
						}
					}
				}
				else = {
					if ={
						limit = {
							has_resource = engineering_research
						}
						owner = {
							switch = {
								trigger = has_technology
								tech_engineering_lab_3 = {
									prev = {
										set_building = building_engineering_facility_3
									}
								}
								tech_engineering_lab_2 = {
									prev = {
										set_building = building_engineering_facility_2
									}
								}
								tech_engineering_lab_1 = {
									prev = {
										set_building = building_engineering_facility_1
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

human_fallen_empires_effect_init_set_power_plant = {
	owner = {
		switch = {
			trigger = has_technology
			tech_power_plant_4 = {
				prev = {
					set_building = building_power_plant_4
				}
			}
			tech_power_plant_3 = {
				prev = {
					set_building = building_power_plant_3
				}
			}
			tech_power_plant_2 = {
				prev = {
					set_building = building_power_plant_2
				}
			}
			tech_power_plant_1 = {
				prev = {
					set_building = building_power_plant_1
				}
			}
		}
	}
}

human_fallen_empires_effect_init_set_mine = {
	owner = {
		switch = {
			trigger = has_technology
			tech_mining_network_4 = {
				prev = {
					set_building = building_mining_network_4
				}
			}
			tech_mining_network_3 = {
				prev = {
					set_building = building_mining_network_3
				}
			}
			tech_mining_network_2 = {
				prev = {
					set_building = building_mining_network_2
				}
			}
			tech_basic_industry = {
				prev = {
					set_building = building_mining_network_1
				}
			}
		}
	}
}

human_fallen_empires_effect_init_set_farm = {
	owner = {
		switch = {
			trigger = has_technology
			tech_nano_vitality_crops = {
				prev = {
					set_building = building_hydroponics_farm_4
				}
			}
			tech_gene_crops = {
				prev = {
					set_building = building_hydroponics_farm_3
				}
			}
			tech_hydroponics = {
				prev = {
					set_building = building_hydroponics_farm_2
				}
			}
			tech_eco_simulation = {
				prev = {
					set_building = building_hydroponics_farm_1
				}
			}
		}
	}
}

human_fallen_empires_effect_init_develop_capital = {
	human_fallen_empires_effect_init_clear_blockers = yes
	# set buildings
	random_tile = {
		limit = {
			autobuild_trigger_has_planet_capital = yes
		}
		human_fallen_empires_effect_init_set_capital_cap = yes
	}
	every_tile = {
		limit = {
			has_any_resource = yes
			autobuild_trigger_has_planet_capital = no
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_science_more_than_others = yes
			}
			human_fallen_empires_effect_init_set_lab_cap = yes
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_energy_more_than_others = yes
			}
			human_fallen_empires_effect_init_set_power_plant_cap = yes
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_minerals_more_than_others = yes
			}
			human_fallen_empires_effect_init_set_mine_cap = yes
		}
		if = {
			limit = {
				autobuild_trigger_tile_has_food_more_than_others = yes
				# is robot trigger = no
			}
			human_fallen_empires_effect_init_set_farm_cap = yes
		}
	}
	human_fallen_empires_effect_init_set_pops = yes
	human_fallen_empires_effect_init_set_starbase = yes
}

human_fallen_empires_effect_init_set_capital_cap = {
	if = {
		limit = {
			owner = {
				has_technology = tech_galactic_administration
			}
		}
		set_building = building_capital_3
		else = {
			human_fallen_empires_effect_init_set_capital = yes
		}
	}
}

human_fallen_empires_effect_init_set_lab_cap = {
	if = {
		limit = {
			has_resource = physics_research
		}
		owner = {
			switch = {
				trigger = has_technology
				tech_physics_lab_3 = {
					prev = {
						set_building = building_physics_lab_4
					}
				}
				tech_physics_lab_2 = {
					prev = {
						set_building = building_physics_lab_2
					}
				}
				tech_physics_lab_1 = {
					prev = {
						set_building = building_physics_lab_1
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = society_research
				}
				owner = {
					switch = {
						trigger = has_technology
						tech_biolab_3 = {
							prev = {
								set_building = building_biolab_4
							}
						}
						tech_biolab_2 = {
							prev = {
								set_building = building_biolab_2
							}
						}
						tech_biolab_1 = {
							prev = {
								set_building = building_biolab_1
							}
						}
					}
				}
				else = {
					if ={
						limit = {
							has_resource = engineering_research
						}
						owner = {
							switch = {
								trigger = has_technology
								tech_engineering_lab_3 = {
									prev = {
										set_building = building_engineering_facility_4
									}
								}
								tech_engineering_lab_2 = {
									prev = {
										set_building = building_engineering_facility_2
									}
								}
								tech_engineering_lab_1 = {
									prev = {
										set_building = building_engineering_facility_1
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

human_fallen_empires_effect_init_set_power_plant_cap = {
	owner = {
		switch = {
			trigger = has_technology
			tech_power_plant_4 = {
				prev = {
					set_building = building_power_plant_5
				}
			}
			tech_power_plant_3 = {
				prev = {
					set_building = building_power_plant_3
				}
			}
			tech_power_plant_2 = {
				prev = {
					set_building = building_power_plant_2
				}
			}
			tech_power_plant_1 = {
				prev = {
					set_building = building_power_plant_1
				}
			}
		}
	}
}

human_fallen_empires_effect_init_set_mine_cap = {
	owner = {
		switch = {
			trigger = has_technology
			tech_mining_network_4 = {
				prev = {
					set_building = building_mining_network_5
				}
			}
			tech_mining_network_3 = {
				prev = {
					set_building = building_mining_network_3
				}
			}
			tech_mining_network_2 = {
				prev = {
					set_building = building_mining_network_2
				}
			}
			tech_basic_industry = {
				prev = {
					set_building = building_mining_network_1
				}
			}
		}
	}
}

human_fallen_empires_effect_init_set_farm_cap = {
	owner = {
		switch = {
			trigger = has_technology
			tech_nano_vitality_crops = {
				prev = {
					set_building = building_hydroponics_farm_5
				}
			}
			tech_gene_crops = {
				prev = {
					set_building = building_hydroponics_farm_3
				}
			}
			tech_hydroponics = {
				prev = {
					set_building = building_hydroponics_farm_2
				}
			}
			tech_eco_simulation = {
				prev = {
					set_building = building_hydroponics_farm_1
				}
			}
		}
	}
}

human_fallen_empires_effect_init_set_starbase = {
	human_fallen_empires_effect_create_starbase_outpost_from_planet = yes
	starbase = {
		human_fallen_empires_effect_create_starbase_upgrade = yes
	}
}

# for country
human_fallen_empires_effect_init_set_minings_stations = {
	every_system_within_border = {
		every_system_planet = {
			limit = {
				has_owner = no
				has_orbital_station = no
				or = {
					has_deposit_for = shipclass_mining_station
					has_deposit_for = shipclass_research_station
				}
			}
			if = {
				limit = {
					has_deposit_for = shipclass_mining_station
				}
				create_mining_station = {
					owner = prevprevprev
				}
				else = {
					create_research_station = {
						owner = prevprevprev
					}
				}
			}
		}
	}
}

human_fallen_empires_effect_init_expand_borders = {
	save_event_target_as = human_fallen_empires_starbase_owner
	every_system_within_border = {
		every_neighbor_system = {
			limit = {
				has_owner = no
			}
			ignore_hyperlanes = no
			human_fallen_empires_effect_create_starbase = yes
		}
	}
}

human_fallen_empires_effect_init_make_fleet = {
	create_fleet_from_naval_cap = 0.2
	# create admiral?
}
