#

# for planet
human_fallen_empires_effect_plague_planet_clean = {
	remove_planet_flag = human_fallen_empires_plague_planet
	remove_modifier = human_fallen_empires_plague_lvl_1
	remove_modifier = human_fallen_empires_plague_lvl_2
	remove_modifier = human_fallen_empires_plague_lvl_3
	every_owned_pop = {
		remove_pop_flag = human_fallen_empires_plague_pop
	}
	if = {
		limit = {
			exists = owner
			owner = {
				has_event_chain = human_fallen_empires_chain_plague_count
			}
		}
		owner = {
			add_event_chain_counter = {
				event_chain = human_fallen_empires_chain_plague_count
				counter = human_fallen_empires_chain_plague_infested_planet
				amount = -1
			}
		}
	}
	every_playable_country = {
		limit = {
			has_event_chain = human_fallen_empires_chain_plague_count
		}
		add_event_chain_counter = {
			event_chain = human_fallen_empires_chain_plague_count
			counter = human_fallen_empires_chain_plague_infested_planet_total
			amount = -1
		}
	}
}

# human_fallen_empires_plague_get_zombie = {
	# if = {
		# limit = {
			# not = {
				# exists = event_target:human_fallen_empires_plague_zombie_country
			# }
		# }
		# log = "plague country ton exists"
		# random_country = {
			# limit = {
				# is_country_type = human_fallen_empires_plague_zombie
			# }
			# save_event_target_as = human_fallen_empires_plague_zombie_country
		# }
	# }
# }

human_fallen_empires_effect_plague_give_immune_option = {
	if = {
		limit = {
			has_global_flag = human_fallen_empires_plague_started
			nor = {
				has_technology = human_fallen_empires_tech_plague_immune
				has_tech_option = human_fallen_empires_tech_plague_immune
			}
		}
		add_research_option = human_fallen_empires_tech_plague_immune
	}
}

human_fallen_empires_effect_plague_give_immune_tech = {
	if = {
		limit = {
			has_global_flag = human_fallen_empires_plague_started
			not = {
				has_technology = human_fallen_empires_tech_plague_immune
			}
		}
		give_technology = {
			tech = human_fallen_empires_tech_plague_immune
			message = yes
		}
	}
}
