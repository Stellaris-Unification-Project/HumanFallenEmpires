#

# for default country, give tier tech
hfe_effect_init_give_tech_t1 = {
	if = {
		limit = {
			exists = event_target:hfe_init_placeholder_t1_tech
		}
		copy_techs_from = {
			target = event_target:hfe_init_placeholder_t1_tech
			except = {
			}
		}
	}
	else = {
		create_country = {
			type = hfe_placeholder_t1_tech
			species = this
			ignore_initial_colony_error = yes
			effect = {
				save_global_event_target_as = hfe_init_placeholder_t1_tech
			}
		}
		hfe_effect_init_give_tech_t1 = yes
	}
}

hfe_effect_init_give_tech_t2 = {
	if = {
		limit = {
			exists = event_target:hfe_init_placeholder_t2_tech
		}
		copy_techs_from = {
			target = event_target:hfe_init_placeholder_t2_tech
			except = {
			}
		}
	}
	else = {
		create_country = {
			type = hfe_placeholder_t2_tech
			species = this
			ignore_initial_colony_error = yes
			effect = {
				save_global_event_target_as = hfe_init_placeholder_t2_tech
			}
		}
		hfe_effect_init_give_tech_t2 = yes
	}
}

hfe_effect_init_give_tech_t3 = {
	if = {
		limit = {
			exists = event_target:hfe_init_placeholder_t3_tech
		}
		copy_techs_from = {
			target = event_target:hfe_init_placeholder_t3_tech
			except = {
			}
		}
	}
	else = {
		create_country = {
			type = hfe_placeholder_t3_tech
			species = this
			ignore_initial_colony_error = yes
			effect = {
				save_global_event_target_as = hfe_init_placeholder_t3_tech
			}
		}
		hfe_effect_init_give_tech_t3 = yes
	}
}

hfe_effect_init_give_tech_t4 = {
	if = {
		limit = {
			exists = event_target:hfe_init_placeholder_t4_tech
		}
		copy_techs_from = {
			target = event_target:hfe_init_placeholder_t4_tech
			except = {
			}
		}
	}
	else = {
		create_country = {
			type = hfe_placeholder_t4_tech
			species = this
			ignore_initial_colony_error = yes
			effect = {
				save_global_event_target_as = hfe_init_placeholder_t4_tech
			}
		}
		hfe_effect_init_give_tech_t4 = yes
	}
}

hfe_effect_init_give_tech_t5 = {
	if = {
		limit = {
			exists = event_target:hfe_init_placeholder_t5_tech
		}
		copy_techs_from = {
			target = event_target:hfe_init_placeholder_t5_tech
			except = {
			}
		}
	}
	else = {
		create_country = {
			type = hfe_placeholder_t5_tech
			species = this
			ignore_initial_colony_error = yes
			effect = {
				save_global_event_target_as = hfe_init_placeholder_t5_tech
			}
		}
		hfe_effect_init_give_tech_t5 = yes
	}
}

# for country make colony, need hfe_init_target
hfe_effect_init_make_colony = {
	event_target:hfe_init_target.capital_scope = {
		closest_system = {
			limit = {
				or = {
					and = {
						exists = owner
						owner = {
							is_country = event_target:hfe_init_target
						}
					}
					has_presence = no
				}
				any_planet = {
					habitability = {
						who = event_target:hfe_init_target.species
						value > 0.2
					}
					not = {
						exists = owner
					}
				}
			}
			random_system_planet = {
				limit = {
					habitability = {
						who = event_target:hfe_init_target.species
						value > 0.2
					}
					not = {
						exists = owner
					}
				}
				create_colony = {
					owner = event_target:hfe_init_target
				}
				if = {
					limit = {
						not = {
							exists = owner
						}
					}
					log = "owner not exists on [this.GetName] during init event"
				}
			}
		}
	}
}

hfe_effect_init_set_pops_20 = {
	while = {
		count = 20
		create_pop = {
			species = owner
		}
	}
}

hfe_effect_init_set_pops_40 = {
	while = {
		count = 40
		create_pop = {
			species = owner
		}
	}
}

hfe_effect_init_develop_planet = {
	# remove low tier buildings from capital
	# set buildings
	# TODO

	hfe_effect_init_set_pops_20 = yes
	hfe_effect_init_set_starbase = yes
}

hfe_effect_init_set_starbase = {
	hfe_effect_create_starbase_outpost_from_planet = yes
	starbase = {
		hfe_effect_create_starbase_upgrade = yes
	}
}

# for country
hfe_effect_init_set_minings_stations = {
	every_system_within_border = {
		every_system_planet = {
			limit = {
				not = {
					exists = owner
				}
				has_orbital_station = no
				or = {
					has_deposit_for = shipclass_mining_station
					has_deposit_for = shipclass_research_station
				}
			}
			if = {
				limit = {
					has_deposit_for = shipclass_mining_station
				}
				create_mining_station = {
					owner = prevprevprev
				}
			}
			else = {
				create_research_station = {
					owner = prevprevprev
				}
			}
		}
	}
}

hfe_effect_init_expand_borders = {
	save_event_target_as = hfe_starbase_owner
	every_system_within_border = {
		every_neighbor_system = {
			limit = {
				not = {
					exists = owner
				}
				has_presence = no
			}
			ignore_hyperlanes = no
			hfe_effect_create_starbase = yes
		}
	}
}

hfe_effect_init_make_fleet = {
	create_fleet_from_naval_cap = 0.2
	# create admiral?
}
