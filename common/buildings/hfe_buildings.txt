#

hfe_building_terraformer = {
	icon = building_great_pyramid
	base_buildtime = @fetime
	can_build = no
	can_demolish = no
	category = research
	potential = {
		exists = owner
		owner = { is_gestalt = no }
	}
	destroy_trigger = {
		exists = owner
		owner = { is_gestalt = yes }
	}
	convert_to = {
		hfe_building_terraformer_machine
		hfe_building_terraformer_machine_rogue_servitor
		hfe_building_terraformer_hive_mind
	}
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 4
		}
	}
	country_modifier = {
		job_hfe_job_terraformer_add = 1
	}
	planet_modifier = {
		job_hfe_job_terraformer_add = 4
	}
}

hfe_building_terraformer_machine = {
	icon = building_great_pyramid
	base_buildtime = @fetime
	can_build = no
	can_demolish = no
	category = research
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 4
		}
	}
	potential = {
		exists = owner
		owner = { 
			is_machine_empire = yes
			NOT = { has_valid_civic = civic_machine_servitor }
		}
	}
	destroy_trigger = {
		exists = owner
		owner = {
			OR = {
				is_machine_empire = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}
	convert_to = {
		hfe_building_terraformer
		hfe_building_terraformer_machine_rogue_servitor
		hfe_building_terraformer_hive_mind
	}
	country_modifier = {
		job_hfe_job_terraformer_machine_add = 1
	}
	planet_modifier = {
		job_hfe_job_terraformer_machine_add = 4
	}
}

hfe_building_terraformer_machine_rogue_servitor = {
	icon = building_great_pyramid
	base_buildtime = @fetime
	can_build = no
	can_demolish = no
	category = research
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 4
		}
	}
	potential = {
		exists = owner
		owner = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_servitor
		}
	}
	destroy_trigger = {
		exists = owner
		owner = {
			is_machine_empire = yes
			has_valid_civic = civic_machine_servitor
		}
	}
	convert_to = {
		hfe_building_terraformer
		hfe_building_terraformer_machine
		hfe_building_terraformer_hive_mind
	}
	country_modifier = {
		job_hfe_job_terraformer_machine_rogue_servitor_add = 1
	}
	planet_modifier = {
		job_hfe_job_terraformer_machine_rogue_servitor_add = 4
	}
}

hfe_building_terraformer_hive_mind = {
	icon = building_great_pyramid
	base_buildtime = @fetime
	can_build = no
	can_demolish = no
	category = research
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 4
		}
	}
	potential = {
		exists = owner
		owner = {
			is_hive_empire = yes
		}
	}
	destroy_trigger = {
		exists = owner
		owner = {
			is_hive_empire = no
		}
	}
	convert_to = {
		hfe_building_terraformer
		hfe_building_terraformer_machine
		hfe_building_terraformer_machine_rogue_servitor
	}
	country_modifier = {
		job_hfe_job_terraformer_hive_mind_add = 1
	}
	planet_modifier = {
		job_hfe_job_terraformer_hive_mind_add = 4
	}
}

hfe_building_virtual = {
	icon = building_virtual_entertainment_studios
	base_buildtime = @fetime
	can_build = no
	#can_demolish = no
	category = amenity
	resources = {
		category = planet_buildings
		upkeep = {
			energy = 4
		}
	}
}

# hfe_building_assimilator = {
# 	icon = building_great_pyramid
# 	base_buildtime = @fetime	# For repair
# 	cost = {
# 		minerals = @fecost	# For repair
# 	}
# 	is_listed = no
# 	ai_replace = no
# 	#event_building = yes
# 	produced_resources = {
# 		unity = 1
# 	}
# 	active = {
# 		hfe_trigger_assimilator_pop_valid_with_ai_block = yes
# 	}
# }

# hfe_building_crio = {
# 	icon = hfe_thoth_module_science
# 	base_buildtime = @fetime	# For repair
# 	cost = {
# 		minerals = @fecost	# For repair
# 	}
# 	is_listed = no
# 	ai_replace = no
# 	#event_building = yes
# 	planet_modifier_with_pop_trigger = {
# 		key = hfe_building_crio
# 		potential = {
# 			exists = tile
# 			tile = {
# 				has_building = hfe_building_crio
# 				is_ruined = no
# 			}
# 		}
# 		modifier = {
# 			pop_consumer_goods_mult = -1
# 			pop_consumer_goods_add = -1
# 		}
# 	}
# }

hfe_building_thoth_module_energy = {
	icon = hfe_building_thoth_module_energy
	base_buildtime = 60
	base_cap_amount = 1
	resources = {
		category = planet_buildings
		produces = {
			energy = 5
		}
	}
	planet_modifier = {
		planet_jobs_energy_produces_mult = 0.2
	}
	potential = {
		exists = owner
		owner = {
			check_variable = {
				which = hfe_building_thoth_module_energy
				value > 0
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_energy
				value = -1
			}
		}
	}
	on_unqueued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_energy
				value = 1
			}
		}
	}
}

hfe_building_thoth_module_mineral = {
	icon = hfe_building_thoth_module_mineral
	base_buildtime = 60
	base_cap_amount = 1
	resources = {
		category = planet_buildings
		produces = {
			minerals = 5
		}
	}
	planet_modifier = {
		planet_jobs_minerals_produces_mult = 0.2
	}
	potential = {
		exists = owner
		owner = {
			check_variable = {
				which = hfe_building_thoth_module_mineral
				value > 0
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_mineral
				value = -1
			}
		}
	}
	on_unqueued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_mineral
				value = 1
			}
		}
	}
}

hfe_building_thoth_module_food = {
	icon = hfe_building_thoth_module_food
	base_buildtime = 60
	base_cap_amount = 1
	resources = {
		category = planet_buildings
		produces = {
			food = 5
		}
	}
	planet_modifier = {
		planet_jobs_food_produces_mult = 0.2
	}
	potential = {
		exists = owner
		owner = {
			check_variable = {
				which = hfe_building_thoth_module_food
				value > 0
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_food
				value = -1
			}
		}
	}
	on_unqueued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_food
				value = 1
			}
		}
	}
}

hfe_building_thoth_module_science = {
	icon = hfe_building_thoth_module_science
	base_buildtime = 60
	base_cap_amount = 1
	resources = {
		category = planet_buildings
		produces = {
			engineering_research = 2
			physics_research = 2
			society_research = 2
		}
	}
	planet_modifier = {
		planet_jobs_physics_research_produces_mult = 0.2
		planet_jobs_society_research_produces_mult = 0.2
		planet_jobs_engineering_research_produces_mult = 0.2
	}
	potential = {
		exists = owner
		owner = {
			check_variable = {
				which = hfe_building_thoth_module_science
				value > 0
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_science
				value = -1
			}
		}
	}
	on_unqueued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_science
				value = 1
			}
		}
	}
}

hfe_building_thoth_module_industry = {
	icon = hfe_building_thoth_module_industry
	base_buildtime = 60
	base_cap_amount = 1
	resources = {
		category = planet_buildings
		produces = {
			consumer_goods = 1
			alloys = 1
		}
	}
	planet_modifier = {
		planet_jobs_alloys_produces_mult = 0.1
		planet_jobs_consumer_goods_produces_mult = 0.1
	}
	potential = {
		exists = owner
		owner = {
			check_variable = {
				which = hfe_building_thoth_module_industry
				value > 0
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_industry
				value = -1
			}
		}
	}
	on_unqueued = {
		owner = {
			change_variable = {
				which = hfe_building_thoth_module_industry
				value = 1
			}
		}
	}
}