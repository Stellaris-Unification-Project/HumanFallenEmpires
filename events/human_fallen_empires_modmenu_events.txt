namespace = human_fallen_empires_menu

## menu
country_event = {
	id = human_fallen_empires_menu.1
	title = modmenu.1.name
	desc = {
		trigger = {
			text = human_fallen_empires_menu.1.desc.0
			success_text = {
				text = human_fallen_empires_menu.1.desc.1.0
				has_global_flag = human_fallen_empires_installed
			}
			fail_text = {
				text = human_fallen_empires_menu.1.desc.1.1
				has_global_flag = human_fallen_empires_installed
			}
			success_text = {
				text = human_fallen_empires_menu.1.desc.2.0
				any_country = {
					has_country_flag = human_fallen_empires_egypt
				}
			}
			fail_text = {
				text = human_fallen_empires_menu.1.desc.2.1
				any_country = {
					has_country_flag = human_fallen_empires_egypt
				}
			}
			success_text = {
				text = human_fallen_empires_menu.1.desc.3.0
				any_country = {
					has_country_flag = human_fallen_empires_future
				}
			}
			fail_text = {
				text = human_fallen_empires_menu.1.desc.3.1
				any_country = {
					has_country_flag = human_fallen_empires_future
				}
			}
		}
	}
	picture = GFX_evt_alien_city
	is_triggered_only = yes

	# make humans undivided
	option = {
		name = human_fallen_empires_menu.0
		custom_tooltip = human_fallen_empires_menu.0.tooltip
		trigger = {
			has_global_flag = human_fallen_empires_installed
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			every_country = {
				limit = {
					has_country_flag = human_fallen_empires_marked_as_human
					species = {
						not = {
							is_same_value = event_target:human_fallen_empires_human_species
						}
					}
				}
				species = { set_species_identity = event_target:human_fallen_empires_human_species }
			}
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	option = {
		name = human_fallen_empires_menu.1
		custom_tooltip = human_fallen_empires_menu.1.tooltip
		trigger = {
			has_global_flag = human_fallen_empires_installed
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires_marked_as_human
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	# disable pirate
	option = {
		name = human_fallen_empires_menu.2.on
		trigger = {
			has_global_flag = human_fallen_empires_disable_pirate
		}
		custom_tooltip = human_fallen_empires_menu.2.on.tooltip
		hidden_effect = {
			remove_global_flag = human_fallen_empires_disable_pirate
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	option = {
		name = human_fallen_empires_menu.2.off
		trigger = {
			not = {
				has_global_flag = human_fallen_empires_disable_pirate
			}
		}
		custom_tooltip = human_fallen_empires_menu.2.off.tooltip
		hidden_effect = {
			set_global_flag = human_fallen_empires_disable_pirate
			every_country = {
				limit = {
					is_country_type = human_fallen_empires_pirate
				}
				destroy_country = yes
			}
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	# disable planet decay
	option = {
		name = human_fallen_empires_menu.3.on
		trigger = {
			has_global_flag = human_fallen_empires_disable_planet_decay
		}
		custom_tooltip = human_fallen_empires_menu.3.on.tooltip
		hidden_effect = {
			remove_global_flag = human_fallen_empires_disable_planet_decay
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	option = {
		name = human_fallen_empires_menu.3.off
		trigger = {
			not = {
				has_global_flag = human_fallen_empires_disable_planet_decay
			}
		}
		custom_tooltip = human_fallen_empires_menu.3.off.tooltip
		hidden_effect = {
			set_global_flag = human_fallen_empires_disable_planet_decay
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	# disable migration
	option = {
		name = human_fallen_empires_menu.4.on
		trigger = {
			has_global_flag = human_fallen_empires_disable_migration
		}
		custom_tooltip = human_fallen_empires_menu.4.on.tooltip
		hidden_effect = {
			remove_global_flag = human_fallen_empires_disable_migration
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	option = {
		name = human_fallen_empires_menu.4.off
		trigger = {
			not = {
				has_global_flag = human_fallen_empires_disable_migration
			}
		}
		custom_tooltip = human_fallen_empires_menu.4.off.tooltip
		hidden_effect = {
			every_planet = {
				limit = {
					or = {
						has_modifier = human_fallen_empires_migration_yellow_ring
						has_modifier = human_fallen_empires_migration_red_ring
						has_modifier = human_fallen_empires_migration_green_ring
						has_modifier = human_fallen_empires_migration_blue_ring
						has_modifier = human_fallen_empires_migration_ban_auto_migrate
						has_modifier = human_fallen_empires_migration_overpopulated_planet
						has_modifier = human_fallen_empires_migration_unpopulated_planet
					}
				}
				remove_modifier = human_fallen_empires_migration_yellow_ring
				remove_modifier = human_fallen_empires_migration_red_ring
				remove_modifier = human_fallen_empires_migration_green_ring
				remove_modifier = human_fallen_empires_migration_blue_ring
				remove_modifier = human_fallen_empires_migration_ban_auto_migrate
				remove_modifier = human_fallen_empires_migration_overpopulated_planet
				remove_modifier = human_fallen_empires_migration_unpopulated_planet
			}
			set_global_flag = human_fallen_empires_disable_migration
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	# disable planet decay
	option = {
		name = human_fallen_empires_menu.5.on
		trigger = {
			has_global_flag = human_fallen_empires_disable_plague
		}
		custom_tooltip = human_fallen_empires_menu.5.on.tooltip
		hidden_effect = {
			remove_global_flag = human_fallen_empires_disable_plague
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	option = {
		name = human_fallen_empires_menu.5.off
		trigger = {
			not = {
				has_global_flag = human_fallen_empires_disable_plague
			}
		}
		custom_tooltip = human_fallen_empires_menu.5.off.tooltip
		hidden_effect = {
			set_global_flag = human_fallen_empires_disable_plague
			remove_global_flag = human_fallen_empires_plague_srarted
			remove_global_flag = human_fallen_empires_plague_lvl_2
			remove_global_flag = human_fallen_empires_plague_lvl_3
			every_planet = {
				limit = {
					or = {
						has_planet_flag = human_fallen_empires_plague_planet
						has_modifier = human_fallen_empires_plague_lvl_1
						has_modifier = human_fallen_empires_plague_lvl_2
						has_modifier = human_fallen_empires_plague_lvl_3
					}
				}
				remove_planet_flag = human_fallen_empires_plague_planet
				remove_modifier = human_fallen_empires_plague_lvl_1
				remove_modifier = human_fallen_empires_plague_lvl_2
				remove_modifier = human_fallen_empires_plague_lvl_3
			}
			every_country = {
				if = {
					limit = {
						is_country_type = human_fallen_empires_plague_zombie
					}
					destroy_country = yes
				}
			}
			country_event = { id = human_fallen_empires_menu.1 }
		}
	}
	# stats
	option = {
		name = human_fallen_empires_menu.6
		custom_tooltip = human_fallen_empires_menu.5.tooltip
		hidden_effect = {
			country_event = { id = human_fallen_empires_statistics.0 }
		}
	}
	option = {
		name = modmenu_exit
	}
}
