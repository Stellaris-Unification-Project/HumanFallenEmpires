namespace = human_fallen_empires

@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500


@human_fallen_empires_discovery_docking_update_minerals_cost = 100
@human_fallen_empires_discovery_docking_update_energy_cost = 100

# functional section 0 - 50

# spawn human fallen empires
country_event = {
	id = human_fallen_empires.0
	fire_only_once = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				not = { has_global_flag = human_fallen_empires_installed }
			}
			if = {
				limit = {
					any_country = {
						or = {
							has_country_flag = human_1
							has_country_flag = human_2
							species_portrait = human
						}
					}
				}
				every_country = {
					limit = {
						or = {
							has_country_flag = human_1
							has_country_flag = human_2
							species_portrait = human
						}
					}
					set_country_flag = human_fallen_empires_marked_as_human
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = human_fallen_empires_marked_as_human
							is_ai = no
						}
					}
					random_country = {
						limit = {
							has_country_flag = human_fallen_empires_marked_as_human
							is_ai = no
						}
						species = { save_event_target_as = human_fallen_empires_human_species }
					}
					else = {
						random_country = {
							limit = {
								has_country_flag = human_fallen_empires_marked_as_human
							}
							species = { save_event_target_as = human_fallen_empires_human_species }
						}
					}
				}
				create_species = {
					name = "Ju Ahet"
					plural = "Ju Ahet"
					class = "MAM"
					portrait = human_fallen_empires_egypt_portrait
					traits = {
						ideal_planet_class = "pc_continental"
						trait = trait_extremely_adaptive
						trait = trait_venerable
						trait = trait_slow_breeders
					}
					immortal = yes
				}
				last_created_species = {
					set_species_identity = event_target:human_fallen_empires_human_species
					save_global_event_target_as = human_fallen_empires_egypt_species
				}
				create_species = {
					name = Human
					plural = Humans
					class = "MAM"
					portrait = "human"
					traits = {
						ideal_planet_class = "pc_continental"
						trait = trait_intelligent
						trait = trait_thrifty
						trait = trait_strong
						trait = trait_enduring
					}
				}
				last_created_species = {
					set_species_identity = event_target:human_fallen_empires_human_species
					save_global_event_target_as = human_fallen_empires_future_species
				}
				else = {
					create_species = {
						name = "Ju Ahet"
						plural = "Ju Ahet"
						class = "MAM"
						portrait = human_fallen_empires_egypt_portrait
						traits = {
							ideal_planet_class = "pc_continental"
							trait = trait_extremely_adaptive
							trait = trait_venerable
							trait = trait_slow_breeders
						}
					}
					last_created_species = {
						save_global_event_target_as = human_fallen_empires_egypt_species
					}
					create_species = {
						name = Human
						plural = Humans
						class = "MAM"
						portrait = "human"
						traits = {
							ideal_planet_class = "pc_continental"
							trait = trait_intelligent
							trait = trait_thrifty
							trait = trait_strong
							trait = trait_solitary
						}
					}
					last_created_species = {
						set_species_identity = event_target:human_fallen_empires_egypt_species
						save_global_event_target_as = human_fallen_empires_future_species
					}
				}
			}
			random_rim_system  = {
				limit = {
					nor = {
						any_neighbor_system = {
							exists = space_owner
							any_neighbor_system = {
								exists = space_owner
								any_neighbor_system = {
									exists = space_owner
									any_neighbor_system = {
										exists = space_owner
										any_neighbor_system = {
											exists = space_owner
											any_neighbor_system = {
												exists = space_owner
											}
										}
									}
								}
							}
						}
						exists = space_owner
						is_fe_cluster = yes
					}
				}
				spawn_system = {
					initializer = "human_fallen_empires_future"
				}
				set_global_flag = human_fallen_empires_future_spawned
			}
			create_species = {
				name = Ahet
				plural = Ahet
				class = "REP"
				portrait = random
				traits = {
					ideal_planet_class = "pc_tropical"
					trait = trait_slow_breeders
					trait = trait_strong
					trait = random_traits
				}
			}
			last_created_species = { save_global_event_target_as = human_fallen_empires_ahet_species }
			create_species = {
				name = Varelse
				plural = Varelse
				class = "REP"
				portrait = random
				traits = {
					ideal_planet_class = "pc_desert"
					trait = trait_industrious
					trait = trait_natural_engineers
					trait = trait_strong
					trait = trait_repugnant
				}
			}
			last_created_species = { save_global_event_target_as = human_fallen_empires_varelse_species }
			random_system = {
				limit = {
					nor = {
						any_neighbor_system = {
							exists = space_owner
							any_neighbor_system = {
								exists = space_owner
								any_neighbor_system = {
									exists = space_owner
									any_neighbor_system = {
										exists = space_owner
										any_neighbor_system = {
											exists = space_owner
											any_neighbor_system = {
												exists = space_owner
											}
										}
									}
								}
							}
						}
						exists = space_owner
						is_fe_cluster = yes
					}
				}
				spawn_system = {
					initializer = "human_fallen_empires_egypt"
				}
				spawn_system = {
					#		min_distance = 5
					#		max_distance = 15
					initializer = "human_fallen_empires_hope"
				}
				spawn_system = {
					#		min_distance = 10
					#		max_distance = 20
					initializer = "human_fallen_empires_gift"
				}
				spawn_system = {
					min_distance = 10
					max_distance = 20
					initializer = "human_fallen_empires_ban"
				}
				set_global_flag = human_fallen_empires_egypt_spawned
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_memorial_01" }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_memorial_02" }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_memorial_03" }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_memorial_04" }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_varelse" }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_ahet" }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_ahet_2" }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = "human_fallen_empires_too_ideal_planet" }
			}
			# discovery setup
			if = {
				limit = {
					any_country = {
						has_country_flag = human_fallen_empires_discovery
					}
				}
				every_country = {
					limit = {
						has_country_flag = human_fallen_empires_discovery
					}
					set_country_type = human_fallen_empires_discovery
					modify_species = {
						species = this
						remove_trait = trait_pc_nuked_preference
						add_trait = trait_pc_continental_preference
					}
					every_owned_fleet = {
						limit = {
							exists = leader
						}
						leader = {
							unassign_leader = this
						}
						destroy_fleet = this
					}
					random_owned_planet = {
						solar_system = {
							every_system_planet = {
								prevent_anomaly = yes
							}
						}
						destroy_colony = yes
						create_fleet = {
							name = Discovery
							effect = {
								set_owner = prevprev
								create_ship = {
									name = Discovery
									design = Deepvoid
								}
								last_created_ship = {
									set_ship_flag = human_fallen_empires_discovery_ship
								}
								set_location = prev
							}
						}
					#	create_ship_design = {
					#		design = Constructor
					#		ftl = warp
					#	}
					#	create_fleet = {
					#		name = Constructor
					#		effect = {
					#			set_owner = prevprev
					#			create_ship = {
					#				name = random
					#				design = last_created_design
					#			}
					#			set_location = prev
					#		}
					#	}
						create_ship_design = {
							design = Prototype
							ftl = warp
						}
						create_fleet = {
							name = "Science Ship"
							effect = {
								set_owner = prevprev
								create_ship = {
									name = random
									design = last_created_design
								}
								set_location = prev
							}
						}
					}
					every_owned_ship = {
						repair_ship = yes
						add_modifier = {
							modifier = human_fallen_empires_unkeep
							days = -1
						}
					}
					add_minerals = 500
					add_energy = 500
				}
			}
			# drones
			random_system = {
				limit = {
					nor = {
						any_neighbor_system = {
							exists = space_owner
							any_neighbor_system = {
								exists = space_owner
								any_neighbor_system = {
									exists = space_owner
									any_neighbor_system = {
										exists = space_owner
										any_neighbor_system = {
											exists = space_owner
											any_neighbor_system = {
												exists = space_owner
											}
										}
									}
								}
							}
						}
						exists = space_owner
						is_fe_cluster = yes
					}
				}
				spawn_system = {
					initializer = "human_fallen_empires_drone_sector_01"
				}
				spawn_system = {
					initializer = "human_fallen_empires_drone_sector_02"
				}
				spawn_system = {
					initializer = "human_fallen_empires_drone_sector_03"
				}
			}
		}
		set_global_flag = human_fallen_empires_installed
	}
}

# functional events for bi yearly pulse
event = {
	id = human_fallen_empires.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# make discovery default country
		if = {
			limit = {
				any_country = {
					is_country_type = human_fallen_empires_discovery
					num_owned_planets > 0
				}
			}
			random_country = {
				limit = {
					is_country_type = human_fallen_empires_discovery
					num_owned_planets > 0
				}
				set_country_type = default
			}
		}
		# assimilation event for coalition
		random_country = {
			limit = {
				has_country_flag = human_fallen_empires_coalition_leader
			}
			country_event = { id = human_fallen_empires.5020 }
		}
		# varelse mahanicus event
		if = {
			limit = {
				not = {
					has_global_flag = human_fallen_empires_varelse_mehanicus
				}
			}
			random_planet = {
				limit = {
					has_planet_flag = human_fallen_empires_varelse_colony
					has_observation_outpost = yes
					exists = owner
					owner = {
						is_country_type = primitive
					}
					observation_outpost_owner = {
						is_ai = no
					}
				}
				planet_event = { id = human_fallen_empires.101 days = 1 random = 365 }
			}
		}
		# fallen emp drain resurces from vassals
		if = {
			limit = {
				has_global_flag = human_fallen_empires_war_in_heaven_started
				any_country = {
					is_country_type = awakened_fallen_empire
					is_at_war = yes
					is_war_leader = yes
					is_proposing_war_demands = yes
					or = {
						any_war = {
							any_defender = {
								is_country = prev
							}
							defender_war_score < -20
						}
						any_war = {
							any_defender = {
								is_country = prev
							}
							attacker_war_score < -20
						}
					}
				}
			}
			random_country = {
				limit = {
					is_country_type = awakened_fallen_empire
					is_at_war = yes
					is_war_leader = yes
					is_proposing_war_demands = yes
					or = {
						any_war = {
							any_defender = {
								is_country = prevprev
							}
							defender_war_score < -20
						}
						any_war = {
							any_defender = {
								is_country = prevprev
							}
							attacker_war_score < -20
						}
					}
				}
				every_subject = {
					limit = {
						not = {
							has_modifier = human_fallen_empires_fallen_resurces_drain
						}
					}
					country_event = { id = human_fallen_empires.10050 }
				}
			}
		}
	}
}

# functional events for decade pulse
event = {
	id = human_fallen_empires.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# kad republic buy robots dialoge
		if = {
			limit = {
				exists = event_target:human_fallen_empires_future_country
				not = {
					has_global_flag = human_fallen_empires_future_take_robot
				}
				any_country = {
					is_ai = no
					any_owned_pop = {
						has_trait = trait_mechanical
					}
					not = {
						has_country_flag = human_fallen_empires_future_try_take_robot
					}
					event_target:human_fallen_empires_future_country = {
						has_communications = prev
					}
				}
			}
			random_list = {
				2 = { }
				1 = {
					random_country = {
						limit = {
							is_ai = no
							any_owned_pop = {
								has_trait = trait_mechanical
							}
							not = {
								has_country_flag = human_fallen_empires_future_try_take_robot
							}
						}
						country_event = { id = human_fallen_empires.5100 days = 1 random = 3650 }
					}
				}
			}
		}

		# future is in expansion
		if = {
			limit = {
				exists = event_target:human_fallen_empires_future_country
			}
			event_target:human_fallen_empires_future_country = {
				country_event = { id = human_fallen_empires.5010 days = 1 random = 3650 }
			}
		}
		# egypt is in expansion
		if = {
			limit = {
				exists = event_target:human_fallen_empires_egypt_country
			}
			event_target:human_fallen_empires_egypt_country = {
				country_event = { id = human_fallen_empires.11 days = 1 random = 3650 }
			}
		}
	}
}

# contact with egypt
ship_event  = {
	id = human_fallen_empires.4
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		nor = {
			has_global_flag = human_fallen_empires_egypt_in_expansion
			owner = { has_country_flag = human_fallen_empires_egypt_contacted }
		}
		from = {
			exists = space_owner
			space_owner = {
				has_country_flag = human_fallen_empires_egypt
			}
		}
	}

	immediate = {
		from = {
			space_owner = {
				establish_communications = root.owner
			}
		}
		owner = {
			if = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.5 }
				else = {
					event_target:human_fallen_empires_egypt_country = {
						set_closed_borders = {
							who = root
							status = yes
						}
					}
				}
			}
			set_country_flag = human_fallen_empires_egypt_contacted
		}
	}
}

# meeting dialoge egypt
country_event = {
	id = human_fallen_empires.5
	title = TRANSMISSION
	desc = {
		trigger = {
			switch = {
				trigger = has_country_flag
				egp_wormhole = { text = human_fallen_empires.5.desc }
				default = { text = human_fallen_empires.5.desc.1 }
				egp_step1 = { text = human_fallen_empires.5.desc.2 }
				egp_step2 = { text = human_fallen_empires.5.desc.3 }
				egp_step3 = { text = human_fallen_empires.5.desc.4 }
				egp_step4 = { text = human_fallen_empires.5.desc.5 }
				egp_stepbadend = { text = human_fallen_empires.5.desc.6 }
			}
		}
	}
	#show_sound = testtest
	diplomatic = yes
	is_triggered_only = yes

	immediate = {
		remove_country_flag = egp_wormhole
	}

	picture_event_data = {
		portrait = event_target:human_fallen_empires_egypt_country
		planet_background = event_target:human_fallen_empires_egypt_country
		graphical_culture = event_target:human_fallen_empires_egypt_country
		city_level = event_target:human_fallen_empires_egypt_country
		room = event_target:human_fallen_empires_egypt_country
	}

	# step 0
	option = {
		name = human_fallen_empires.5.0.0
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
				has_country_flag = human_fallen_empires_marked_as_human
			}
			has_ethic = ethic_fanatic_xenophobe
		}
		hidden_effect = {
			set_country_flag = egp_stepbadend
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.1
		trigger = {
			any_country = {
				has_communications = root
				not = { is_same_value = root}
				has_country_flag = human_fallen_empires_future
			}
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
			}
		}
		hidden_effect = {
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.2
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
			}
			human_fallen_empires_is_xenophobe_trigger = no
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.3
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.4
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
			}
			has_ethic = ethic_fanatic_spiritualist
		}
		hidden_effect = {
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
		# добавить плюс к отношениям
	}
	option = {
		name = human_fallen_empires.5.0.5
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
			}
			has_ethic = ethic_fanatic_militarist
			fleet_power > 20000
		}
		hidden_effect = {
			set_country_flag = egp_stepbadend
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.6
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
				has_country_flag = human_fallen_empires_marked_as_human
			}
			any_country = {
				has_communications = root
				not = { is_same_value = root}
				or = {
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
		hidden_effect = {
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	# step 1
	option = {
		name = human_fallen_empires.5.1.0
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_militarist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.1
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.2
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_materialist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.3
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_individualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.4
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_pacifist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.5
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.6
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_spiritualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.7
		trigger = {
			has_country_flag = egp_step1
			human_fallen_empires_is_collectivist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	# step 2
	option = {
		name = human_fallen_empires.5.2.0
		trigger = {
			has_country_flag = egp_step2
			or = {
				has_country_flag = human_1
				and = {
					any_system_within_border = {
						has_star_flag = sol
					}
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.1
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_2
			or = {
				not = {
					any_system = {
						has_star_flag = sol
					}
				}
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = no
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.2
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_2
			any_system = {
				has_star_flag = sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.3
		trigger = {
			has_country_flag = egp_step2
			nor = {
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = yes
					}
				}
				has_country_flag = human_1
				has_country_flag = human_2
			}
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.4
		trigger = {
			has_country_flag = egp_step2
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			any_country = {
				is_country_type = default
				has_communications = root
				not = { is_country = root}
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.5
		trigger = {
			has_country_flag = egp_step2
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			or = {
				not = {
					any_system = {
						has_star_flag = sol
					}
				}
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = no
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.6
		trigger = {
			has_country_flag = egp_step2
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			any_system = {
				has_star_flag = sol
				has_star_flag = nuked_sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.7
		trigger = {
			has_country_flag = egp_step2
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			any_system = {
				has_star_flag = sol
				has_star_flag = primitive_sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.8
		trigger = {
			has_country_flag = egp_step2
			or = {
				has_country_flag = human_fallen_empires_marked_as_human
				human_fallen_empires_is_xenophile_trigger = yes
			}
			or = {
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = no
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
			begin_event_chain = {
				event_chain = "human_fallen_empires_find_sol_chain"
				target = root
			}
			random_system = {
				limit = {
					has_star_flag = sol
				}
				save_event_target_as = human_fallen_empires_sol
				set_star_flag = human_fallen_empires_sol_target
			}
			set_country_flag = human_fallen_empires_sol_search
			create_point_of_interest = {
				id = human_fallen_empires_sol.1
				name = "sol_1_poi"
				desc = human_fallen_empires_find_sol_chain_desc.1
				event_chain = human_fallen_empires_find_sol_chain
				location = event_target:human_fallen_empires_sol
			}
		}
	}
	#step 3
	option = {
		name = human_fallen_empires.5.3.0
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_militarist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.1
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.2
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_materialist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.3
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_individualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.4
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_pacifist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.5
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.6
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_spiritualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.7
		trigger = {
			has_country_flag = egp_step3
			human_fallen_empires_is_collectivist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	#step 4
	option = {
		name = human_fallen_empires.5.4.0
		trigger = {
			has_country_flag = egp_step4
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = egp_step4
			event_target:human_fallen_empires_egypt_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}

		#добавить бонус к счастью
	}
	option = {
		name = human_fallen_empires.5.4.1
		trigger = {
			has_country_flag = egp_step4
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = egp_step4
			event_target:human_fallen_empires_egypt_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.5.4.2
		trigger = {
			has_country_flag = egp_step4
		}
		hidden_effect = {
			remove_country_flag = egp_step4
			event_target:human_fallen_empires_egypt_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	#сделать бонусную ветку
}

# make egypt default country
country_event = {
	id = human_fallen_empires.11
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		not = {
			has_global_flag = human_fallen_empires_egypt_in_expansion
		}
		or = {
			years_passed > 90
						 any_country = {
				is_country_type = default
				fleet_power > 30000
			}
		}
	}

	immediate = {
		every_owned_ship = {
			repair_ship = yes
			add_modifier = {
				modifier = human_fallen_empires_unkeep
				days = -1
			}
		}
		add_modifier = {
			modifier = human_fallen_empires_navy_size
			days = 3650
		}
		country_add_ethic = ethic_xenophobe
		every_owned_pop = {
			pop_add_ethic = ethic_xenophobe
			pop_add_ethic = ethic_fanatic_spiritualist
		}
		set_country_type = default
		set_global_flag = human_fallen_empires_egypt_in_expansion
		ruler = {
			save_event_target_as = human_fallen_empires_egypt_ruler
		}
		every_country = {
			establish_communications_no_message = event_target:human_fallen_empires_egypt_country
			if = {
				limit = { is_ai = no }
				country_event = {
					id = human_fallen_empires.12
				}
				set_country_flag = human_fallen_empires_egypt_contacted
			}
		}
	}
}

# go to expansion dialoge
country_event = {
	id = human_fallen_empires.12
	title = "human_fallen_empires.12.name"
	desc = "human_fallen_empires.12.desc.0"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_egypt_ruler
		planet_background = event_target:human_fallen_empires_egypt_country
		graphical_culture = event_target:human_fallen_empires_egypt_country
		city_level = event_target:human_fallen_empires_egypt_country
		room = event_target:human_fallen_empires_egypt_country
	}

	option = {
		name = human_fallen_empires.12.0
	}
}


## anomalys and after survey on actions 50 - 100

# wormhole to ju ahet 50
ship_event = {
	id = human_fallen_empires.50
	title = "human_fallen_empires.50.name"
	desc = "human_fallen_empires.50.desc"
	picture = GFX_evt_human_fallen_empires_wormhole
	show_sound = event_ship_thrusters
	location = root
    is_triggered_only = yes

	immediate = {
		random_country = {
			limit = {
				has_country_flag = human_fallen_empires_egypt
			}
			random_owned_planet = {
				limit = { is_capital = yes }
				save_event_target_as = human_fallen_empires_ra_home
			}
			establish_communications = root.owner
		}
		fleet = {
			set_location = {
				target = event_target:human_fallen_empires_ra_home
				distance = 5
				angle = random
			}
		}
	}

	option = {
		name = human_fallen_empires.50.0
		hidden_effect = {
			root.owner = {
				country_event = {
					id = human_fallen_empires.5
				}
			}
		}
	}
}

# varelse fleet in time trap 51-53

# start event
ship_event = {
	id = human_fallen_empires.51
	title = human_fallen_empires.51.name
	desc = human_fallen_empires.51.desc
	picture = GFX_evt_human_fallen_empires_events_station
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_varelse_fleet_location
	is_triggered_only = yes

	trigger = {
		not = {
			has_global_flag = human_fallen_empires_has_event.51
		}
		owner = {
			is_ai = no
		}
	}

	immediate = {
		set_global_flag = human_fallen_empires_has_event.51
		create_ambient_object = {
			type = ancient_battlefield_object
			location = solar_system
		}
		last_created_ambient_object = {
			save_event_target_as = human_fallen_empires_varelse_fleet_location
		}
		enable_special_project = {
			name = human_fallen_empires_varelse_fleet_project
			location = event_target:human_fallen_empires_varelse_fleet_location
			owner = root.owner
		}
	}

	option = {
		name = human_fallen_empires.51.0
		trigger = {
			is_ship_size = science
		}
	}
	option = {
		name = human_fallen_empires.51.1
		trigger = {
			not = {
				is_ship_size = science
			}
		}
	}
}

# project complite
ship_event = {
	id = human_fallen_empires.52
	title = human_fallen_empires.52.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.52.desc.0
				owner = {
					has_country_flag = human_fallen_empires_egypt_contacted
				}
			}
			text = human_fallen_empires.52.desc.1
		}
	}
	picture = GFX_evt_human_fallen_empires_events_wormhole
	show_sound = event_ship_thrusters
	location = root
    is_triggered_only = yes

	immediate = {
		create_country = {
			name = "Varelse Hegemony"
			type = neutral_faction
			effect = {
				establish_communications_no_message = root.owner
				#		set_faction_hostility = {
				#			set_hostile = no
				#		}
				create_leader = {
					type = admiral
					species = event_target:human_fallen_empires_varelse_species
					name = random
					skill = 500
				}
			}
		}
		create_fleet = {
			name = "11th Strike Force"
			effect = {
				set_owner = last_created_country
				while = {
					count = 10
					create_ship = {
						name = random
						design = Sunset
						graphical_culture = "reptilian_01"
					}
				}
				assign_leader = last_created_leader
				while = {
					count = 30
					create_ship = {
						name = random
						design = Farstar
						graphical_culture = "reptilian_01"
					}
				}
				owner = {
					every_owned_ship = {
						add_modifier = {
							modifier = human_fallen_empires_unkeep
							days = -1
						}
					}
				}
				set_location = event_targe:human_fallen_empires_varelse_fleet_location
				save_event_target_as = human_fallen_empires_varelse_fleet
			}
		}
		#	destroy_ambient_object = event_targe:human_fallen_empires_varelse_fleet_location
	}

	option = {
		name = human_fallen_empires_at_the_sreen
		hidden_effect = {
			owner = {
				country_event = { id = human_fallen_empires.53 }
				set_country_flag = human_fallen_empires.53.0
			}
		}
	}
}

# dialogue with fleet
country_event = {
	id = human_fallen_empires.53
	title = TRANSMISSION
	desc = {
		trigger = {
			success_text = {
				text = "human_fallen_empires.53.desc.0.0"
				has_country_flag = human_fallen_empires.53.0
			}
			success_text = {
				text = "human_fallen_empires.53.desc.1.0"
				has_country_flag = human_fallen_empires.53.0.0
			}
			success_text = {
				text = "human_fallen_empires.53.desc.1.1"
				or = {
					has_country_flag = human_fallen_empires.53.0.1
					has_country_flag = human_fallen_empires.53.0.2
				}
			}
			success_text = {
				text = "human_fallen_empires.53.desc.1.2"
				or = {
					has_country_flag = human_fallen_empires.53.0.3
					has_country_flag = human_fallen_empires.53.0.4
				}
			}
		}
	}
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_varelse_species
		room = human_fallen_empires_varelse_room
	}

	option = {
		name = human_fallen_empires.53.0.0
		trigger = {
			has_country_flag = human_fallen_empires.53.0
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.0
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.1
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			has_country_flag = human_fallen_empires_egypt_contacted
			human_fallen_empires_is_xenophobe_trigger = yes

		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.1
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.2
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			has_country_flag = human_fallen_empires_egypt_contacted
			human_fallen_empires_is_militarist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.2
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.3
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			has_country_flag = human_fallen_empires_egypt_contacted
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.3
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.4
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			human_fallen_empires_is_pacifist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.4
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.1.0
		trigger = {
			or = {
				has_country_flag = human_fallen_empires.53.0.0
				has_country_flag = human_fallen_empires.53.0.1
				has_country_flag = human_fallen_empires.53.0.2
				has_country_flag = human_fallen_empires.53.0.3
				has_country_flag = human_fallen_empires.53.0.4
			}
		}
		hidden_effect = {
			# attack home of light
			if = {
				limit = {
					or = {
						has_country_flag = human_fallen_empires.53.0.0
						has_country_flag = human_fallen_empires.53.0.1
						has_country_flag = human_fallen_empires.53.0.2
					}
				}
				remove_country_flag = human_fallen_empires.53.0.0
				remove_country_flag = human_fallen_empires.53.0.1
				remove_country_flag = human_fallen_empires.53.0.2
				event_target:human_fallen_empires_varelse_fleet = {
					human_fallen_empires_varelse_fleet_attack_home_of_light = yes
				}
			}
			# found new home
			if = {
				limit = {
					or = {
						has_country_flag = human_fallen_empires.53.0.3
						has_country_flag = human_fallen_empires.53.0.4
					}
				}
				remove_country_flag = human_fallen_empires.53.0.3
				remove_country_flag = human_fallen_empires.53.0.4
				event_target:human_fallen_empires_varelse_fleet = {
					human_fallen_empires_varelse_fleet_find_new_home = yes
				}
			}
		}
	}
}



### varelse section 100 - 150

# varlse colony after curvey 100
ship_event = {
	id = human_fallen_empires.100
	title = "human_fallen_empires.100.name"
	desc = "human_fallen_empires.100.desc"
	picture = GFX_evt_human_fallen_empire_events_valeres_planet
	location = root
    is_triggered_only = yes

	trigger = {
		from = { has_planet_flag = human_fallen_empires_varelse_colony }
		from.owner = { is_country_type = primitive }
	}

	option = {
		name = human_fallen_empires.100.0
	}
}


## observation outpost events


## varelse mehanicus

# start event
planet_event = {
	id = human_fallen_empires.101
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_observation_outpost = yes
	}

	immediate = {
		set_global_flag = human_fallen_empires_varelse_mehanicus
		observation_outpost_owner = {
			country_event = { id = human_fallen_empires.102 }
		}
		save_event_target_as = human_fallen_empires_varelse_colony
	}
}

# choice
country_event = {
	id = human_fallen_empires.102
	title = "human_fallen_empires.102.name"
	desc = "human_fallen_empires.102.desc"
	picture = GFX_evt_human_fallen_empires_events_varelse_planet
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_varelse_colony
	is_triggered_only = yes

	#lets go to artifact
	option = {
		name = "human_fallen_empires.102.0"
		hidden_effect = {
			country_event = { id = human_fallen_empires.103 days = 12 random = 4 }
		}
		custom_tooltip = human_fallen_empires.102.0.tooltip
	}
	option = {
		name = "human_fallen_empires.102.1"
		hidden_effect = {
			if = {
				limit = {
					human_fallen_empires_is_xenophobe_trigger = yes
				}
				country_event = { id = human_fallen_empires.105 days = 10 random = 5 }#lets go to factory and destroy it
				else = {
					country_event = { id = human_fallen_empires.106 days = 11 random = 5 }#lets go to factory
				}
			}
		}
		custom_tooltip = human_fallen_empires.102.1.tooltip
	}
	#lets revolt (materialist)
	option = {
		name = "human_fallen_empires.102.2"
		trigger = {
			human_fallen_empires_is_materialist_trigger = yes
		}
		hidden_effect = {
			country_event = { id = human_fallen_empires.107 days = 100 random = 20 }
		}
	}
	#lets infiltrat
	option = {
		name = "human_fallen_empires.102.3"
		trigger = {
			from = {
				observation_outpost = { has_mission = covert_infiltration }
			}
		}
		hidden_effect = {
			country_event = { id = human_fallen_empires.108 days = 100 random = 20 }
		}
	}
	option = {
		name = "human_fallen_empires.102.4"
	}
}

# lets go to artifact
country_event = {
	id = human_fallen_empires.103
	title = "human_fallen_empires.103.name"
	desc = "human_fallen_empires.103.desc"
	# картинка скрижали?
	picture = GFX_evt_human_fallen_empire_events_valeres_planet
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires_at_the_sreen"
		hidden_effect = {
			country_event = { id = human_fallen_empires.104 }
		}
	}
}

# history of varelse
country_event = {
	id = human_fallen_empires.104
	title = "human_fallen_empires.104.name"
	desc = "human_fallen_empires.104.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		room = human_fallen_empires_varelse_room
	}

	option = {
		name = human_fallen_empires.104.0
		response_text = human_fallen_empires.104.0.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.104.1
		response_text = human_fallen_empires.104.1.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.104.2
		response_text = human_fallen_empires.104.2.response
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier2researchreward
					 min = @tier2researchmin
							max = @tier2researchmax
		}
	}
}

# lets go to factory
country_event = {
	id = human_fallen_empires.105
	title = "human_fallen_empires.105.name"
	desc = "human_fallen_empires.105.desc"
	picture = GFX_evt_human_fallen_empire_events_valeres_planet
	show_sound = event_cityscape
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires_good_job"
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier2researchreward
					 min = @tier2researchmin
							max = @tier2researchmax
		}
	}
}

# lets go to factory and destroy it
country_event = {
	id = human_fallen_empires.106
	title = "human_fallen_empires.105.name"
	desc = "human_fallen_empires.106.desc"
	picture = GFX_evt_human_fallen_empire_events_valeres_planet
	show_sound = event_cityscape
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			owner = {
				human_fallen_empires_down_primitive_teh_lvl = yes
			}
			every_tile = {
				limit = { has_building = yes }
				set_ruined = yes
			}
			random_pop = {
				kill_pop = yes
			}
			random_pop = {
				kill_pop = yes
			}
		}
	}

	option = {
		name = "human_fallen_empires.106.0"
		trigger = {
			human_fallen_empires_is_xenophobe_trigger = yes
		}
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier2researchreward
					 min = @tier2researchmin
							max = @tier2researchmax
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
					 min = @tier2researchmin
							max = @tier2researchmax
		}
	}
}

# materialist result lets revolt
country_event = {
	id = human_fallen_empires.107
	title = "human_fallen_empires.107.name"
	desc = "human_fallen_empires.107.desc"
	picture = GFX_evt_human_fallen_empire_events_valeres_planet
	show_sound = event_planetary_riot
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			owner = {
				human_fallen_empires_up_primitive_teh_lvl = yes
				country_remove_ethic = "ethic_spiritualist"
				country_add_ethic = "ethic_materialist"
				every_owned_pop = {
					pop_remove_ethic = "ethic_spiritualist"
					pop_add_ethic = "ethic_materialist"
				}
			}
		}
	}

	option = {
		name = "human_fallen_empires.107.0"
		trigger = {
			human_fallen_empires_is_materialist_trigger = yes
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
					 min = @tier2researchmin
							max = @tier2researchmax
		}
	}
}

# lets infiltrate
country_event = {
	id = human_fallen_empires.108
	title = "human_fallen_empires.108.name"
	desc = "human_fallen_empires.108.desc"
	picture = GFX_evt_human_fallen_empire_events_valeres_planet
	show_sound = event_primitive_civilization
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			observation_outpost = { add_mission_progress = 0.3 }
		}
	}

	option = {
		name = "human_fallen_empires_good_job"
	}
}



### memorial section 150 - 350


## pyramid events 150 - 200

# start
planet_event = {
	id = human_fallen_empires.150
	title = "human_fallen_empires.150.name"
	desc = "human_fallen_empires.150.desc"
	picture = GFX_evt_human_fallen_empires_pyramid_2
	show_sound = event_mystic_reveal
	location = ROOT
	is_triggered_only = yes

	trigger = {
		not = { has_planet_flag = human_fallen_empires_planet_pyramid }
		has_modifier = "human_fallen_empires_memorial"
		exists = owner
		owner = {
			is_ai = no
		}
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_planet_pyramid
	}

	option = {
		name = "human_fallen_empires.150.0"
		enable_special_project = {
			name = "human_fallen_empires_pyramid_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}
	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# golocube
ship_event = {
	id = human_fallen_empires.151
	title = "human_fallen_empires.151.name"
	desc = "human_fallen_empires.151.desc"
	picture = GFX_evt_human_fallen_empires_pyramid_2
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	option = {
		name = "human_fallen_empires.151.0"
		hidden_effect = {
			root.owner = {
				country_event = { id = human_fallen_empires.152 }
				set_country_flag = human_fallen_empires_has_event.151
			}
		}
	}
}

# memorial story
country_event = {
	id = human_fallen_empires.152
	title = "human_fallen_empires.152.name"
	desc = {
		trigger = {
			switch = {
				trigger = has_country_flag
				human_fallen_empires.152.0 = { text = human_fallen_empires.152.desc.1 }
				default = { text = human_fallen_empires.152.desc.0 }
			}
		}
	}
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = human_fallen_empires_memorial_story_room
	}

	option = {
		name = human_fallen_empires.152.0
		trigger = {
			not = {
				has_country_flag = human_fallen_empires.152.0
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.152.0
			country_event = { id = human_fallen_empires.152 }
		}
	}
	option = {
		name = human_fallen_empires.152.1
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = governor
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}

		}
	}
	option = {
		name = human_fallen_empires.152.2
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = scientist
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}

		}
	}
	option = {
		name = human_fallen_empires.152.3
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = admiral
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}
		}
	}
	option = {
		name = human_fallen_empires.152.4
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = general
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}
		}
	}
	#	option = {
	#		name = human_fallen_empires.152.5
	#		trigger = {
	#			has_country_flag = human_fallen_empires.152.0
	#		}
	#		hidden_effect = {
	#		# добавить технологию
	#		}
	#	}

	after = {
		remove_country_flag = human_fallen_empires.152
	}
}

# obelisk
ship_event = {
	id = human_fallen_empires.153
	title = "human_fallen_empires.153.name"
	desc = "human_fallen_empires.153.desc"
	picture = GFX_evt_human_fallen_empires_obelisk
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.153
		}
		event_target:human_fallen_empires_memorial_planet = {
			create_country = {
				name = "Gnosis"
				type = faction
				effect = {
					establish_communications_no_message = root.owner
				}
			}
			create_species = {
				name = "Gnosis"
				class = random
				portrait = random
				traits = random
			}
			# запилить новый тип армии
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_guardian_army"
			}
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_assault_army"
			}
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_assault_army"
			}
		}
	}

	option = {
		name = "human_fallen_empires.153.0"
	}
}

# mutant cloud
ship_event = {
	id = human_fallen_empires.154
	title = "human_fallen_empires.154.name"
	desc = "human_fallen_empires.154.desc"
	picture = GFX_evt_human_fallen_empire_events_city_cloud
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.154
		}
		event_target:human_fallen_empires_memorial_planet = {
			planet_event = { id = human_fallen_empires.155 days = 15 }
		}
	}

	option = {
		name = "human_fallen_empires.155.0"
	}
}

# lets mutate
planet_event = {
	id = human_fallen_empires.155
	title = "human_fallen_empires.154.name"
	desc = "human_fallen_empires.155.desc"
	picture = GFX_evt_human_fallen_empire_events_city_cloud
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		every_owned_pop = {
			human_fallen_empires_add_random_trait = yes
		}
	}

	option = {
		name = "human_fallen_empires.155.0"
		custom_tooltip = human_fallen_empires.155.tooltip
	}
}

# tomb
ship_event = {
	id = human_fallen_empires.156
	title = "human_fallen_empires.156.name"
	desc = "human_fallen_empires.156.desc"
	picture = GFX_evt_human_fallen_empires_events_strange_tech
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.156
		}
	}

	option = {
		name = "human_fallen_empires.156.0"
		hidden_effect = {
			event_target:human_fallen_empires_memorial_planet = {
				random_list = {
					50 = {
						add_modifier = {
							modifier = "human_fallen_empires_tomb_happy"
							days = 360
						}
					}
					50 = {
						add_modifier = {
							modifier = "human_fallen_empires_tomb_unhappy"
							days = 360
						}
					}
				}
			}
		}
		# нужно добавить штраф к отношениям
	}
}


## military warehouse events 200 - 250

# start
planet_event = {
	id = human_fallen_empires.200
	title = "human_fallen_empires.200.name"
	desc = "human_fallen_empires.200.desc"
	picture = GFX_evt_human_fallen_empire_events_weapon_storage
	show_sound = event_mystic_reveal
	location = ROOT
	is_triggered_only = yes

	trigger = {
		not = { has_planet_flag = human_fallen_empires_military_warehouse_planet }
		has_modifier = "human_fallen_empires_memorial"
		has_owner = yes
		owner = {
			is_ai = no
		}
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_military_warehouse_planet
	}

	option = {
		name = "human_fallen_empires.200.0"
		enable_special_project = {
			name = "human_fallen_empires_military_warehouse_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}

	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# defense system
ship_event = {
	id = human_fallen_empires.201
	title = "human_fallen_empires.201.name"
	desc = "human_fallen_empires.201.desc"
	picture = GFX_evt_human_fallen_empire_events_weapon_storage_2
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.201
		}
	}

	option = {
		name = "human_fallen_empires.201.0"
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = "human_fallen_empires_army_planet_defense_damage_mult"
				days = -1
			}
		}
	}
}

# abandoned armory
ship_event = {
	id = human_fallen_empires.202
	title = "human_fallen_empires.202.name"
	desc = "human_fallen_empires.202.desc"
	picture = GFX_evt_human_fallen_empire_events_weapon_storage_2
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.202
		}
	}

	option = {
		name = "human_fallen_empires.202.0"
		owner = {
			add_modifier = {
				modifier = "human_fallen_empires_army_attack_damage_mult"
				days = -1
			}
		}
	}
}

# abandoned librariy
ship_event = {
	id = human_fallen_empires.203
	title = "human_fallen_empires.203.name"
	desc = "human_fallen_empires.203.desc"
	picture = GFX_evt_human_fallen_empire_events_library_old
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.203
		}
	}

	option = {
		name = "human_fallen_empires.203.0"
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = "human_fallen_empires_army_defense_damage_mult"
				days = -1
			}
		}
	}
}

# abandoned military academy
ship_event = {
	id = human_fallen_empires.204
	title = "human_fallen_empires.204.name"
	desc = "human_fallen_empires.204.desc"
	picture = GFX_evt_human_fallen_empire_events_weapon_storage
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.204
		}
	}

	option = {
		name = "human_fallen_empires.204.0"
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = "human_fallen_empires_army_academy"
				days = -1
			}
		}
	}
}

# explosion of the warehouse
country_event = {
	id = human_fallen_empires.205
	title = "human_fallen_empires.205.name"
	desc = {
		trigger = {
			# scientist survived
			success_text = {
				text = "human_fallen_empires.205.desc.0"
				has_country_flag = human_fallen_empires.205.0
			}
			# scientist wounded
			success_text = {
				text = "human_fallen_empires.205.desc.1"
				has_country_flag = human_fallen_empires.205.1
			}
			# scientist recovered
			success_text = {
				text = "human_fallen_empires.205.desc.2"
				has_country_flag = human_fallen_empires.205.2
			}
			# scientist dead
			success_text = {
				text = "human_fallen_empires.205.desc.3"
				has_country_flag = human_fallen_empires.205.3
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_explosion
	show_sound = event_ship_explosion
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		set_country_flag = human_fallen_empires_has_event.205
		if = {
			limit = {
				has_country_flag = human_fallen_empires.205.1
			}
			event_target:human_fallen_empires_ship = {
				fleet = {
					exile_leader_as = human_fallen_empires_scientist_wounded
				}
			}
		}
		if = {
			limit = {
				has_country_flag = human_fallen_empires.205.2
			}
			if = {
				limit = {
					exists = event_target:human_fallen_empires_ship
				}
				event_target:human_fallen_empires_ship = {
					fleet = {
						set_leader = human_fallen_empires_scientist_wounded
					}
				}
				else = {
					set_leader = human_fallen_empires_scientist_wounded
				}
			}
		}
		if = {
			limit = {
				has_country_flag = human_fallen_empires.205.3
			}
			event_target:human_fallen_empires_ship = {
				fleet = {
					kill_leader = {	type = scientist show_notification = no }
				}
			}
		}
	}

	option = {
		name = "human_fallen_empires.205.0"
		trigger = {
			has_country_flag = human_fallen_empires.205.0
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.0
		}
	}
	option = {
		name = "human_fallen_empires.205.1"
		trigger = {
			has_country_flag = human_fallen_empires.205.1
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.1
			set_country_flag = human_fallen_empires.205.2
			country_event = { id = human_fallen_empires.205 days = 60 random = 120 }
		}
	}
	option = {
		name = "human_fallen_empires.205.2"
		trigger = {
			has_country_flag = human_fallen_empires.205.2
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.2
		}
	}
	option = {
		name = "human_fallen_empires.205.3"
		trigger = {
			has_country_flag = human_fallen_empires.205.3
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.3
		}
	}
}

# scientific bonus of the warehouse
ship_event = {
	id = human_fallen_empires.206
	title = "human_fallen_empires.206.name"
	desc = "human_fallen_empires.206.desc"
	picture = GFX_evt_human_fallen_empire_events_weapon_storage
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.206
		}
	}

	option = {
		name = "human_fallen_empires.206.0"
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
						 min = @tier3researchmin
								max = @tier3researchmax
			}
			set_country_flag = human_fallen_empires_military_warehouse_events_6
		}
	}
}

# dr moro
ship_event = {
	id = human_fallen_empires.207
	title = "human_fallen_empires.207.name"
	desc = "human_fallen_empires.207.desc"
	picture = GFX_evt_human_fallen_empire_events_weapon_storage
	show_sound = event_alien_nature
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.207
		}
	}

	option = {
		name = "human_fallen_empires.207.0"
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = "human_fallen_empires_tomb_unhappy"
				days = 360
			}
		}
	}
}


## found cruiser 250 - 300

# start
planet_event = {
	id = human_fallen_empires.250
	title = "human_fallen_empires.250.name"
	desc = "human_fallen_empires.250.desc"
	picture = GFX_evt_human_fallen_empires_events_ship_old
	show_sound = event_mystic_reveal
	location = ROOT
	is_triggered_only = yes

	trigger = {
		not = { has_planet_flag = human_fallen_empires_found_cruiser_planet }
		has_modifier = "human_fallen_empires_memorial"
		has_owner = yes
		owner = { is_ai = no }
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_found_cruiser_planet
	}

	option = {
		name = "human_fallen_empires.250.0"
		enable_special_project = {
			name = "human_fallen_empires_found_cruiser_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}

	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# rotten skeleton
ship_event = {
	id = human_fallen_empires.251
	title = "human_fallen_empires.251.name"
	desc = "human_fallen_empires.251.desc"
	picture = GFX_evt_human_fallen_empires_events_ship_old
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.251
		}
	}

	option = {
		name = "human_fallen_empires.251.0"
		owner = {
			add_monthly_resource_mult = {
				resource = minerals
				value = @tier2materialreward
						 min = @tier2materialmin
								max = @tier2materialmax
			}
		}
	}
	option = {
		name = "human_fallen_empires.251.1"
		owner = {
			#add_modifier = { modifier = "human_fallen_empires_ship_weapon_range_mult" days = -1 }
			add_monthly_resource_mult = {
				resource = energy
				value = @tier2materialreward
						 min = @tier2materialmin
								max = @tier2materialmax
			}
		}
	}
	option = {
		name = "human_fallen_empires.251.2"
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
						 min = @tier3researchmin
								max = @tier3researchmax
			}
		}
	}
}

# explosion on the cruiser scientist dead
ship_event = {
	id = human_fallen_empires.252
	title = "human_fallen_empires.252.name"
	desc = "human_fallen_empires.252.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.252
		}
	}

	option = {
		name = "human_fallen_empires.252.0"
		hidden_effect = {
			kill_leader = {	type = scientist show_notification = no }
		}
	}
}

# runaway cruiser
ship_event = {
	id = human_fallen_empires.253
	title = "human_fallen_empires.253.name"
	desc = {
		trigger = {
			fail_text = {
				text = "human_fallen_empires.253.desc.0"
				has_country_flag = human_fallen_empires_egypt_country
			}
			success_text = {
				text = "human_fallen_empires.253.desc.1"
				has_country_flag = human_fallen_empires_egypt_country
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_ship
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.253
		}
	}

	immediate = {
		create_country = {
			name = "Cruiser"
			type = neutral_faction
			effect = {
				establish_communications_no_message = root.owner
				#		set_faction_hostility = {
				#			set_hostile = no
				#		}
			}
		}
		create_fleet = {
			name = "Cruiser"
			effect = {
				save_event_target_as = human_fallen_empires_cruiser # убрать, если работает owner
				set_owner = last_created_country
				create_ship = {
					name = random
					design = "Seth"
					graphical_culture = "mammalian_01"
					prefix = no
				}
				set_location = root
				set_fleet_stance = aggressive
				queue_actions = {
					find_closest_system = {
						trigger = {
							id = "human_fallen_empires.253.trigger.0"
							any_planet = {
								has_planet_flag = human_fallen_empires_varelse_colony
							}
						}
						found_system = {
							move_to = this
						}
					}
					find_closest_planet = {
						trigger = {
							id = "human_fallen_empires.253.trigger.1"
							has_planet_flag = human_fallen_empires_varelse_colony
						}
						found_planet = {
							orbit_planet = this
							effect = {
								id = "human_fallen_empires.253.effect.0"
								owner = {
									set_faction_hostility = {
										set_hostile = yes
									}
								}
							}
							repeat = {
								wait = 100
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = "human_fallen_empires.253.0"
	}
}

# cruiser became aggressive
ship_event = {
	id = human_fallen_empires.254
	title = "human_fallen_empires.254.name"
	desc = "human_fallen_empires.254.desc"
	picture = GFX_evt_human_fallen_empires_events_ship
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.254
		}
		create_country = {
			name = "Mad Cruiser"
			type = faction
			effect = {
				#		set_faction_hostility = {
				#			set_hostile = yes
				#		}
				establish_communications_no_message = root.owner
			}
		}
		create_fleet = {
			name = "Mad Cruiser"
			effect = {
				set_owner = last_created_country
				create_ship = {
					name = random
					design = "Seth"
					graphical_culture = "mammalian_01"
					prefix = no
				}
				set_fleet_stance = aggressive
				set_location = root
				queue_actions = {
					repeat = {
						find_closest_system = {
							trigger = {
								id = "human_fallen_empires.254.trigger.0"
								any_planet = {
									or = {
										has_mining_station = yes
										has_research_station = yes
									}
									exists = controller
									controller = { is_country = root.owner }
								}
							}
							found_system = {
								move_to = THIS
							}
						}
						find_closest_planet = {
							trigger = {
								id = "human_fallen_empires.254.trigger.1"
								or = {
									has_mining_station = yes
									has_research_station = yes
								}
								exists = controller
								controller = { is_country = root.owner }
							}
							found_planet = {
								orbit_planet = THIS
								wait = {
									duration = 20
								}
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = "human_fallen_empires.254.0"
	}
}

# love is
ship_event = {
	id = human_fallen_empires.255
	title = "human_fallen_empires.255.name"
	desc = "human_fallen_empires.255.desc"
	picture = GFX_evt_human_fallen_empires_events_ship_new
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.255
		}
		create_fleet = { name = "Marvin"}
		last_created_fleet = {
			set_owner = root.owner
			create_ship = {
				name = "Marvin"
				design = "Seth"
				graphical_culture = "mammalian_01"
				prefix = no
			}
			last_created_ship = {
				add_modifier = {
					modifier = "human_fallen_empires_ship_weapon_range_mult"
					days = -1
				}
			}
			set_location = root
			set_fleet_stance = aggressive
		}
	}

	option = {
		name = "human_fallen_empires.255.0"
	}
}

# new cruiser
#ship_event = {
#	id = human_fallen_empires.257
#	title = "human_fallen_empires.257.name"
#	desc = "human_fallen_empires.257.desc"
#	picture = GFX_evt_archaeological_dig
#	show_sound = event_airlock
#	location = event_target:human_fallen_empires_memorial_planet
#
#	is_triggered_only = yes
#
#	immediate = {
#		create_fleet = { name = "Cruiser"}
#		last_created_fleet = {
#			set_owner = root.owner
#			create_ship = {
#				name = random
#				design = "Seth"
#				graphical_culture = "mammalian_01"
#				prefix = no
#			}
#			set_location = root
#			set_fleet_stance = aggressive
#		}
#	}
#
#	option = {
#		name = "human_fallen_empires.257.0"
#	}
#}


## sputnik 300 - 350

# start
planet_event = {
	id = human_fallen_empires.300
	title = "human_fallen_empires.300.name"
	desc = "human_fallen_empires.300.desc"
	picture = GFX_evt_human_fallen_empires_events_satellite
	show_sound = event_mystic_reveal
	location = root
	is_triggered_only = yes

	trigger = {
		not = { has_planet_flag = human_fallen_empires_sputnik_planet }
		has_modifier = "human_fallen_empires_memorial"
		has_owner = yes
		owner = {
			is_ai = no
		}
		has_ground_combat = no
		num_pops > 0
		owner = {
			not = {
				and = {
					has_country_flag = human_fallen_empires_has_event.301
					has_country_flag = human_fallen_empires_has_event.302
					has_country_flag = human_fallen_empires_has_event.304
				}
			}
		}
	}

	immediate = {
		set_planet_flag = human_fallen_empires_sputnik_planet
	}

	option = {
		name = "human_fallen_empires.300.0"
		enable_special_project = {
			name = "human_fallen_empires_sputnik_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}

	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# bonus to the sensors
ship_event = {
	id = human_fallen_empires.301
	title = "human_fallen_empires.301.name"
	desc = "human_fallen_empires.301.desc"
	picture = GFX_evt_human_fallen_empires_events_satellite
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.301
		}
	}

	option = {
		name = human_fallen_empires.301.0
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = human_fallen_empires_planet_sensor_range_mult
				days = -1
			}
		}
	}
}

# go to another events
ship_event = {
	id = human_fallen_empires.302
	title = "human_fallen_empires.302.name"
	desc = "human_fallen_empires.302.desc"
	picture = GFX_evt_human_fallen_empires_events_satellite
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.302
		}
	}

	option = {
		name = human_fallen_empires.302.0
		hidden_effect = {
			event_target:human_fallen_empires_memorial_planet = {
				random_list = {
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_planet_pyramid
						}
						planet_event = { id = human_fallen_empires.150 days = 1 }
					}
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_military_warehouse_planet
						}
						planet_event = { id = human_fallen_empires.200 days = 1 }
					}
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_found_cruiser_planet
						}
						planet_event = { id = human_fallen_empires.250 days = 1 }
					}
					1 = {
						root = {
							ship_event = { id = human_fallen_empires.303 days = 15 }
						}
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.302.1
	}
}

# go to nothing
ship_event = {
	id = human_fallen_empires.303
	title = "human_fallen_empires.303.name"
	desc = "human_fallen_empires.303.desc"
	picture = GFX_evt_human_fallen_empires_events_satellite_2
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.303.0
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
						 min = @tier1researchmin
								max = @tier1researchmax
			}
		}
	}
}

# eng bonus
ship_event = {
	id = human_fallen_empires.304
	title = "human_fallen_empires.304.name"
	desc = "human_fallen_empires.304.desc"
	picture = GFX_evt_human_fallen_empires_events_satellite
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.304
		}
	}

	option = {
		name = human_fallen_empires.304.0
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
						 min = @tier3researchmin
								max = @tier3researchmax
			}
		}
	}
}


## find sol 350
ship_event = {
	id = human_fallen_empires.350
	title = human_fallen_empires.350.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.350.desc.0
				owner = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
			fail_text = {
				text = human_fallen_empires.350.desc.1
				owner = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_sol_system
	show_sound = event_scanner
	location = root
	is_triggered_only = yes

	trigger = {
		from = { has_star_flag = human_fallen_empires_sol_target }
		owner = { has_country_flag = human_fallen_empires_sol_search }
	}

	immediate = {
		from = { remove_star_flag = human_fallen_empires_sol_target }
		owner = {
			remove_country_flag = human_fallen_empires_sol_search
			add_event_chain_counter = {
				event_chain = "human_fallen_empires_find_sol_chain"
				counter = "found"
				amount = 1
			}
		}
	}

	option = {
		name = human_fallen_empires.350.0
		trigger = {
			owner = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
						 min = @tier2influencemin
								max = @tier2influencemax
			}
		}
	}
	option = {
		name = human_fallen_empires.350.1
		trigger = {
			owner = {
				human_fallen_empires_is_xenophile_trigger = yes
				not = { has_country_flag = human_fallen_empires_marked_as_human }
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
						 min = @tier2influencemin
								max = @tier2influencemax
			}
		}
	}
	option = {
		name = human_fallen_empires.350.2
		trigger = {
			owner = {
				human_fallen_empires_is_xenophile_trigger = yes
				human_fallen_empires_is_collectivist_trigger = yes
				not = { has_country_flag = human_fallen_empires_marked_as_human }
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
						 min = @tier2influencemin
								max = @tier2influencemax
			}
		}
	}
	after = {
		owner = { end_event_chain = "human_fallen_empires_find_sol_chain" }
	}
}



### Ahet section 400 - 401

# ahet colonys after survey

# сolony 1
ship_event = {
	id = human_fallen_empires.400
	title = "human_fallen_empires.400.name"
	desc = {
		trigger = {
			success_text = {
				text = "human_fallen_empires.400.desc.0"
				has_country_flag = human_fallen_empires_ahet_found
			}
			fail_text = {
				text = "human_fallen_empires.400.desc.1"
				has_country_flag = human_fallen_empires_ahet_found
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_ship_old_jungle
	location = from

    is_triggered_only = yes

	trigger = {
		from = { has_planet_flag = human_fallen_empires_ahet_colony }
		from.owner = { is_country_type = primitive }
	}

	option = {
		name = human_fallen_empires.400.0
		trigger = {
			owner = {
				has_country_flag = human_fallen_empires_ahet_found
			}
		}
	}
	option = {
		name = human_fallen_empires.400.1
		trigger = {
			owner = {
				human_fallen_empires_is_materialist_trigger = no
			}
		}
	}
	option = {
		name = human_fallen_empires.400.2
		trigger = {
			owner = {
				human_fallen_empires_is_materialist_trigger = yes
			}
		}
	}
	after = {
		owner = { set_country_flag = human_fallen_empires_ahet_found }
	}
}

# colony 2
ship_event = {
	id = human_fallen_empires.401
	title = "human_fallen_empires.401.name"
	desc = {
		trigger = {
			success_text = {
				text = "human_fallen_empires.401.desc.0"
				has_country_flag = human_fallen_empires_ahet_found
			}
			fail_text = {
				text = "human_fallen_empires.401.desc.1"
				has_country_flag = human_fallen_empires_ahet_found
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_ship_old_jungle_2
	location = from

    is_triggered_only = yes

	trigger = {
		from = { has_planet_flag = human_fallen_empires_ahet_colony_2 }
		from.owner = { is_country_type = primitive }
	}

	option = {
		name = human_fallen_empires.401.0
		trigger = {
			owner = { has_country_flag = human_fallen_empires_ahet_found }
		}
	}
	option = {
		name = human_fallen_empires.401.1
		trigger = {
			owner = {
				human_fallen_empires_is_xenophile_trigger = yes
			}
		}
	}
	option = {
		name = human_fallen_empires.401.2
		trigger = {
			owner = {
				human_fallen_empires_is_xenophobe_trigger = yes
			}
		}
	}
	option = {
		name = human_fallen_empires.401.3
		trigger = {
			owner = {
				human_fallen_empires_is_xenophile_trigger = no
				human_fallen_empires_is_xenophobe_trigger = no
			}
		}
	}
	after = {
		owner = { set_country_flag = human_fallen_empires_ahet_found }
	}
}

# Ra'ar story (then home of light captured) 500 - 501

# start event
planet_event = {
	id = human_fallen_empires.500
	title = "human_fallen_empires.500.name"
	desc = "human_fallen_empires.500.desc"
	picture = GFX_evt_human_fallen_empires_events_holocube_2
	location = root

    is_triggered_only = yes

	trigger = {
		has_planet_flag = human_fallen_empires_home_of_light
		exists = owner
		owner = {
			is_ai = no
		}
	}

	option = {
		name = human_fallen_empires_at_the_sreen
		owner = {
			country_event = { id = human_fallen_empires.501 }
		}
	}
}

# raar story
country_event = {
	id = human_fallen_empires.501
	title = "human_fallen_empires.501.name"
	desc = "human_fallen_empires.501.desc"
	show_sound = event_mystic_reveal
	is_triggered_only = yes
	diplomatic = yes

    picture_event_data = {
		room = human_fallen_empires_raar_room
	}

	option = {
		name = human_fallen_empires.501.0
		response_text = human_fallen_empires.501.0.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.1
		response_text = human_fallen_empires.501.1.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.2
		response_text = human_fallen_empires.501.2.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.3
		response_text = human_fallen_empires.501.3.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.4
		response_text = human_fallen_empires.501.4.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.5
		response_text = human_fallen_empires.501.5.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.6
		response_text = human_fallen_empires.501.6.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.7
		response_text = human_fallen_empires.501.7.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.8
		response_text = human_fallen_empires.501.8.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.9
		response_text = human_fallen_empires.501.9.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.10
		response_text = human_fallen_empires.501.10.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.11
		response_text = human_fallen_empires.501.11.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.12
		response_text = human_fallen_empires.501.12.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.13
		custom_tooltip = human_fallen_empires.501.13.tooltip
	}
}


## discovery section 550

# harvest minerals from frags
# This = owner of ship 1 (combatant)
# From = owner of ship 2 (destroyed)
# FromFrom = ship 1
# FromFromFrom = ship 2
country_event = {
	id = human_fallen_empires.550
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_discovery
		fromfrom = {
			has_ship_flag = human_fallen_empires_discovery_ship
		}
	}

	immediate = {
		if = {
			limit = {
				fromfromfrom = {
					or = {
						is_ship_size = destroyer
						is_ship_size = small_ship_fallen_empire
						is_ship_size = nomad_destroyer
						is_ship_size = pirate_destroyer
						is_ship_size = military_station_small_ai
						is_ship_size = ancient_destroyer
						is_ship_size = crystal_ship_small_blue
						is_ship_size = crystal_ship_small_green
						is_ship_size = crystal_ship_small_yellow
						is_ship_size = crystal_ship_small_red
						is_ship_size = crystal_ship_small_blue_elite
						is_ship_size = crystal_ship_small_green_elite
						is_ship_size = crystal_ship_small_yellow_elite
						is_ship_size = crystal_ship_small_red_elite
					}
				}
			}
			add_minerals = 100
			else = {
				if = {
					limit = {
						fromfromfrom = {
							or = {
								is_ship_size = cruiser
								is_ship_size = military_station_small_fallen_empire
								is_ship_size = pirate_cruiser
								is_ship_size = pirate_station
								is_ship_size = space_amoeba_mother
								is_ship_size = crystal_ship_medium_blue
								is_ship_size = crystal_ship_medium_green
								is_ship_size = crystal_ship_medium_yellow
								is_ship_size = crystal_ship_medium_red
								is_ship_size = crystal_ship_medium_blue_elite
								is_ship_size = crystal_ship_medium_green_elite
								is_ship_size = crystal_ship_medium_yellow_elite
								is_ship_size = crystal_ship_medium_red_elite
							}
						}
					}
					add_minerals = 150
					else = {
						if = {
							limit = {
								fromfromfrom = {
									or = {
										is_ship_size = battleship
										is_ship_size = massive_ship_fallen_empire
										is_ship_size = large_ship_fallen_empire
										is_ship_size = military_station_large_fallen_empire
										is_ship_size = large_ship_ai
										is_ship_size = military_station_large_ai
										is_ship_size = crystal_ship_large_blue
										is_ship_size = crystal_ship_large_green
										is_ship_size = crystal_ship_large_yellow
										is_ship_size = crystal_ship_large_red
										is_ship_size = crystal_ship_large_blue_elite
										is_ship_size = crystal_ship_large_green_elite
										is_ship_size = crystal_ship_large_yellow_elite
										is_ship_size = crystal_ship_large_red_elite
										is_ship_size = orbital_station
									}
								}
							}
							add_minerals = 200
							else = {
								if = {
									limit = {
										fromfromfrom = {
											or = {
												is_ship_size = massive_ship_fallen_empire
												is_ship_size = core_ai
												is_ship_size = crystal_station_large
												is_ship_size = asteroid
											}
										}
									}
									add_minerals = 1000
									else = {
										add_minerals = 50
									}
								}
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				from = {
					or = {
						is_country_type = cloud
						is_country_type = extradimensional
						is_country_type = extradimensional_2
						is_country_type = extradimensional_3
					}
				}
			}
			add_energy = 50
		}
		fromfrom = {
			solar_system = {
				if = {
					limit = {
						exists = space_owner
						space_owner = {
							energy > 50
								   nor = {
								is_country = root
								is_hostile = root
								is_country = from
							}
								   is_hostile = from
						}
					}
					space_owner = {
						add_opinion_modifier = { who = root modifier = human_fallen_empires_option_discovery_kill_enemy }
						add_energy = -50
						root = {
							add_energy = 50
						}
					}
				}
			}
		}
	}
}

# contact
country_event = {
	id = human_fallen_empires.551
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_discovery
		from = {
			or = {
				is_country_type = default
				is_country_type = fallen_empire
				is_country_type = awakened_fallen_empire
			}
		}
	}

	immediate = {
		establish_communications = from
	}
}

# if discovery destroed = end game
# This = owner of ship 1 (destroyed)
# From = owner of ship 2 (combatant)
# FromFrom = ship 1
# FromFromFrom = ship 2
country_event = {
	id = human_fallen_empires.552
	title = human_fallen_empires.552.name
	desc = human_fallen_empires.552.desc
	location = fromfrom
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_discovery
		fromfrom = {
			has_ship_flag = human_fallen_empires_discovery_ship
		}
	}

	option = {
		name = human_fallen_empires.552.0
		hidden_effect = {
			destroy_country = yes
		}
	}
}

# First Contact Empires for discovery
country_event = {
	id = human_fallen_empires.553
	title = "action.10.name"
	desc = "action.15.desc"
	picture = GFX_evt_star_chart
	show_sound = advisor_notification_alien_vessel_encountered
	location = FROMFROMFROM

	is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_discovery
		NOT = { has_country_flag = day_0 } # посмотреть что это за флаг
		from = { NOT = { has_country_flag = day_0 } }
		from = {
			OR = {
				is_country_type = default
				and = {
					is_country_type = amoeba
					not = {
						root = {
							has_country_flag = amoeba_encountered
						}
					}
				}
				and = {
					is_country_type = crystal
					not = {
						root = {
							has_country_flag = crystal_encountered
						}
					}
				}
				and = {
					is_country_type = drone
					not = {
						root = {
							has_country_flag = drone_encountered
						}
					}
				}
				and = {
					is_country_type = cloud
					not = {
						root = {
							has_country_flag = cloud_encountered
						}
					}
				}
				and = {
					is_country_type = tianki
					not = {
						root = {
							has_country_flag = cloud_encountered
						}
					}
				}
				and = {
					is_country_type = pirate
					not = {
						root = {
							has_country_flag = pirate_encountered
						}
					}
				}
			}
		}
	}

	immediate = {
		from = {
			random_owned_planet = {
				save_event_target_as = pc_home
			}
		}
		if = {
			limit = {
				from = {
					is_country_type = default
				}
			}
			from = {
				enable_special_project = {
					name = "ESTABLISH_COMMUNICATIONS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
		if = {
			limit = {
				from = {
					is_country_type = amoeba
				}
			}
			set_country_flag = amoeba_encountered
			from = {
				enable_special_project = {
					name = "INVESTIGATE_SPACE_AMOEBA"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
		if = {
			limit = {
				from = {
					is_country_type = crystal
				}
			}
			set_country_flag = crystal_encountered
			from = {
				enable_special_project = {
					name = "INVESTIGATE_CRYSTALS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
		if = {
			limit = {
				from = {
					is_country_type = drone
				}
			}
			set_country_flag = drone_encountered
			from = {
				enable_special_project = {
					name = "INVESTIGATE_DRONES"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
		if = {
			limit = {
				from = {
					is_country_type = cloud
				}
			}
			set_country_flag = cloud_encountered
			from = {
				enable_special_project = {
					name = "INVESTIGATE_SPACE_CLOUDS"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
		if = {
			limit = {
				from = {
					is_country_type = tiyanki
				}
			}
			from = {
				set_country_flag = tiyanki_encountered
				enable_special_project = {
					name = "INVESTIGATE_TIYANKI"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
		if = {
			limit = {
				from = {
					is_country_type = pirate
				}
			}
			from = {
				set_country_flag = pirate_encountered
				enable_special_project = {
					name = "INVESTIGATE_PIRATES"
					location = event_target:pc_home
					owner = ROOT
				}
			}
		}
	}

	option = {
		name = "action.10.a"
	}
}



# trade and update on planet
# from = docking planet
fleet_event = {
	id = human_fallen_empires.560
	show_sound = event_airlock
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		#count_fleet_ships
		is_ship_size = deepvoid
		exists = owner
		owner = {
			is_country_type = human_fallen_empires_discovery
		}
		from = {
			exists = owner
			has_spaceport = yes
			owner = {
				is_country_type = default
				not = {
					is_hostile = root.owner
				}
			}
		}
	}

	immediate = {
		#repair_ship = yes
		from = {
			save_event_target_as = human_fallen_empires_discovery_docking_planet
			owner = {
				save_event_target_as = human_fallen_empires_discovery_docking_planet_owner
			}
		}
		random_owned_ship = {
			limit = {
				has_ship_flag = human_fallen_empires_discovery_ship
			}
			save_event_target_as = human_fallen_empires_discovery_docking_ship
		}
		owner = {
			country_event = { id = human_fallen_empires.561 }
		}
	}
}

# trade and update on planet
# from = docking planet
country_event = {
	id = human_fallen_empires.561
	title = human_fallen_empires.561.name
	desc = {
		trigger = {
			fail_text = {
				text = human_fallen_empires.561.desc.0.0
				#	text = human_fallen_empires.561.desc.0.1
				or = {
					has_country_flag = human_fallen_empires.561.weapon_menu
					has_country_flag = human_fallen_empires.561.defense_menu
					has_country_flag = human_fallen_empires.561.engine_menu
					has_country_flag = human_fallen_empires.561.other_menu
				}
			}
			success_text = {
				text = human_fallen_empires.561.weapon_menu.desc.0
				has_country_flag = human_fallen_empires.561.weapon_menu
			}
			success_text = {
				text = human_fallen_empires.561.defense_menu.desc.0
				has_country_flag = human_fallen_empires.561.defense_menu
			}
			success_text = {
				text = human_fallen_empires.561.engine_menu.desc.0
				has_country_flag = human_fallen_empires.561.engine_menu
			}
			success_text = {
				text = human_fallen_empires.561.other_menu.desc.0
				has_country_flag = human_fallen_empires.561.other_menu
			}
		}
	}
	location = root
	is_triggered_only = yes
	diplomatic = yes
	force_open = yes

	picture_event_data = {
		room = enclave_trader_room # add room
	}

	# update weapons
	option = {
		name = human_fallen_empires.561.0
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.561.weapon_menu
				has_country_flag = human_fallen_empires.561.defense_menu
				has_country_flag = human_fallen_empires.561.engine_menu
				has_country_flag = human_fallen_empires.561.other_menu
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.561.weapon_menu
			country_event = { id = human_fallen_empires.561 }
		}
	}
	# damage lvl 1
	option = {
		name = human_fallen_empires.561.weapon_menu.0.0
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.0.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_damage_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 300
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# damage lvl 2
	option = {
		name = human_fallen_empires.561.weapon_menu.0.1
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.0.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_damage_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# damage lvl 3
	option = {
		name = human_fallen_empires.561.weapon_menu.0.2
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.0.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_damage_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# damage lvl 4
	option = {
		name = human_fallen_empires.561.weapon_menu.0.3
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.0.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_damage_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# damage lvl 5
	option = {
		name = human_fallen_empires.561.weapon_menu.0.4
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.0.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_damage_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# damage lvl 6
	option = {
		name = human_fallen_empires.561.weapon_menu.0.5
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_damage_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.0.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_damage_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# fire rate lvl 1
	option = {
		name = human_fallen_empires.561.weapon_menu.1.0
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.1.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_fire_rate_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# fire rate lvl 2
	option = {
		name = human_fallen_empires.561.weapon_menu.1.1
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.1.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_fire_rate_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# fire rate lvl 3
	option = {
		name = human_fallen_empires.561.weapon_menu.1.2
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.1.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_fire_rate_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# fire rate lvl 4
	option = {
		name = human_fallen_empires.561.weapon_menu.1.3
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.1.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_fire_rate_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# fire rate lvl 5
	option = {
		name = human_fallen_empires.561.weapon_menu.1.4
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.1.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_fire_rate_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# fire rate lvl 6
	option = {
		name = human_fallen_empires.561.weapon_menu.1.5
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_fire_rate_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.1.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_fire_rate_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# accuracy lvl 1
	option = {
		name = human_fallen_empires.561.weapon_menu.2.0
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.2.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_accuracy_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# accuracy lvl 2
	option = {
		name = human_fallen_empires.561.weapon_menu.2.1
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.2.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_accuracy_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# accuracy lvl 3
	option = {
		name = human_fallen_empires.561.weapon_menu.2.2
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.2.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_accuracy_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# accuracy lvl 4
	option = {
		name = human_fallen_empires.561.weapon_menu.2.3
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.2.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_accuracy_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# accuracy lvl 5
	option = {
		name = human_fallen_empires.561.weapon_menu.2.4
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.2.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_accuracy_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# accuracy lvl 6
	option = {
		name = human_fallen_empires.561.weapon_menu.2.5
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_accuracy_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.2.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_accuracy_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# range lvl 1
	option = {
		name = human_fallen_empires.561.weapon_menu.3.0
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.3.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_range_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# range lvl 2
	option = {
		name = human_fallen_empires.561.weapon_menu.3.1
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.3.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_range_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# range lvl 3
	option = {
		name = human_fallen_empires.561.weapon_menu.3.2
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.3.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_range_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# range lvl 4
	option = {
		name = human_fallen_empires.561.weapon_menu.3.3
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.3.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_range_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# range lvl 5
	option = {
		name = human_fallen_empires.561.weapon_menu.3.4
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.3.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_range_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# range lvl 6
	option = {
		name = human_fallen_empires.561.weapon_menu.3.5
		trigger = {
			has_country_flag = human_fallen_empires.561.weapon_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_range_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.3.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_range_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# update defenses
	option = {
		name = human_fallen_empires.561.1
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.561.weapon_menu
				has_country_flag = human_fallen_empires.561.defense_menu
				has_country_flag = human_fallen_empires.561.engine_menu
				has_country_flag = human_fallen_empires.561.other_menu
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.561.defense_menu
			country_event = { id = human_fallen_empires.561 }
		}
	}
	# hp lvl 1
	option = {
		name = human_fallen_empires.561.defense_menu.0.0
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.0.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_hp_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# hp lvl 2
	option = {
		name = human_fallen_empires.561.defense_menu.0.1
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.0.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_hp_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# hp lvl 3
	option = {
		name = human_fallen_empires.561.defense_menu.0.2
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.0.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_hp_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# hp lvl 4
	option = {
		name = human_fallen_empires.561.defense_menu.0.3
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.0.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_hp_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# hp lvl 5
	option = {
		name = human_fallen_empires.561.defense_menu.0.4
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.0.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_hp_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# hp lvl 6
	option = {
		name = human_fallen_empires.561.defense_menu.0.5
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_hp_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.0.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_hp_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# armor lvl 1
	option = {
		name = human_fallen_empires.561.defense_menu.1.0
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.1.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_armor_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# armor lvl 2
	option = {
		name = human_fallen_empires.561.defense_menu.1.1
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.1.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_armor_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# armor lvl 3
	option = {
		name = human_fallen_empires.561.defense_menu.1.2
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.1.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_armor_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# armor lvl 4
	option = {
		name = human_fallen_empires.561.defense_menu.1.3
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.1.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_armor_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# armor lvl 5
	option = {
		name = human_fallen_empires.561.defense_menu.1.4
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.1.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_armor_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# armor lvl 6
	option = {
		name = human_fallen_empires.561.defense_menu.1.5
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_armor_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.1.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_armor_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# shield lvl 1
	option = {
		name = human_fallen_empires.561.defense_menu.2.0
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.2.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_shield_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# shield lvl 2
	option = {
		name = human_fallen_empires.561.defense_menu.2.1
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.2.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_shield_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# shield lvl 3
	option = {
		name = human_fallen_empires.561.defense_menu.2.2
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.2.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_shield_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# shield lvl 4
	option = {
		name = human_fallen_empires.561.defense_menu.2.3
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.2.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_shield_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# shield lvl 5
	option = {
		name = human_fallen_empires.561.defense_menu.2.4
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.defense_menu.2.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_shield_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# shield lvl 6
	option = {
		name = human_fallen_empires.561.defense_menu.2.5
		trigger = {
			has_country_flag = human_fallen_empires.561.defense_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_shield_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.weapon_menu.3.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_shield_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# update engine
	option = {
		name = human_fallen_empires.561.2
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.561.weapon_menu
				has_country_flag = human_fallen_empires.561.defense_menu
				has_country_flag = human_fallen_empires.561.engine_menu
				has_country_flag = human_fallen_empires.561.other_menu
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.561.engine_menu
			country_event = { id = human_fallen_empires.561 }
		}
	}
	# subspase speed lvl 1
	option = {
		name = human_fallen_empires.561.engine_menu.0.0
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.0.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_speed_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# subspase speed lvl 2
	option = {
		name = human_fallen_empires.561.engine_menu.0.1
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.0.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_speed_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# subspase speed lvl 3
	option = {
		name = human_fallen_empires.561.engine_menu.0.2
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.0.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_speed_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# subspase speed lvl 4
	option = {
		name = human_fallen_empires.561.engine_menu.0.3
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.0.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_speed_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# subspase speed lvl 5
	option = {
		name = human_fallen_empires.561.engine_menu.0.4
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.0.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_speed_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# subspase speed lvl 6
	option = {
		name = human_fallen_empires.561.engine_menu.0.5
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_speed_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.0.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_speed_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# warp range lvl 1
	option = {
		name = human_fallen_empires.561.engine_menu.1.0
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.1.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_warp_range_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# warp range lvl 2
	option = {
		name = human_fallen_empires.561.engine_menu.1.1
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.1.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_warp_range_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# warp range lvl 3
	option = {
		name = human_fallen_empires.561.engine_menu.1.2
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.1.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_warp_range_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# warp range lvl 4
	option = {
		name = human_fallen_empires.561.engine_menu.1.3
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.1.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_warp_range_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# warp range lvl 5
	option = {
		name = human_fallen_empires.561.engine_menu.1.4
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.1.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_warp_range_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# warp range lvl 6
	option = {
		name = human_fallen_empires.561.engine_menu.1.5
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_warp_range_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.1.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_warp_range_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# inerstellar speed lvl 1
	option = {
		name = human_fallen_empires.561.engine_menu.2.0
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.2.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_interstellar_speed_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# inerstellar speed lvl 2
	option = {
		name = human_fallen_empires.561.engine_menu.2.1
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.2.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_interstellar_speed_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# inerstellar speed lvl 3
	option = {
		name = human_fallen_empires.561.engine_menu.2.2
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.2.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_interstellar_speed_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# inerstellar speed lvl 4
	option = {
		name = human_fallen_empires.561.engine_menu.2.3
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.2.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_interstellar_speed_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# inerstellar speed lvl 5
	option = {
		name = human_fallen_empires.561.engine_menu.2.4
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.2.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_interstellar_speed_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}

	# inerstellar speed lvl 6
	option = {
		name = human_fallen_empires.561.engine_menu.2.5
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_interstellar_speed_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.2.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_interstellar_speed_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# winddown lvl 1
	option = {
		name = human_fallen_empires.561.engine_menu.3.0
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_1
				}
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_1
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.3.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_winddown_1
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# winddown lvl 2
	option = {
		name = human_fallen_empires.561.engine_menu.3.1
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_2
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_2
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 1
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.3.1.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_winddown_2
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# winddown lvl 3
	option = {
		name = human_fallen_empires.561.engine_menu.3.2
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_3
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_3
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 2
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.3.2.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_winddown_3
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# winddown lvl 4
	option = {
		name = human_fallen_empires.561.engine_menu.3.3
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_4
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_4
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 3
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.3.3.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_winddown_4
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# winddown lvl 5
	option = {
		name = human_fallen_empires.561.engine_menu.3.4
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_5
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_5
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 4
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.3.4.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_winddown_5
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# winddown lvl 6
	option = {
		name = human_fallen_empires.561.engine_menu.3.5
		trigger = {
			has_country_flag = human_fallen_empires.561.engine_menu
			event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_6
				}
			}
			event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}
		allow = {
			minerals > 300
					 energy > 300
					 event_target:human_fallen_empires_discovery_docking_ship = {
				not = {
					has_modifier = human_fallen_empires_discovery_winddown_6
				}
			}
					 event_target:human_fallen_empires_discovery_docking_planet = {
				num_spaceport_modules > 5
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.engine_menu.3.5.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			add_modifier = {
				modifier = human_fallen_empires_discovery_winddown_6
				days = -1
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# other menu
	option = {
		name = human_fallen_empires.561.3
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.561.weapon_menu
				has_country_flag = human_fallen_empires.561.defense_menu
				has_country_flag = human_fallen_empires.561.engine_menu
				has_country_flag = human_fallen_empires.561.other_menu
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.561.other_menu
			country_event = { id = human_fallen_empires.561 }
		}
	}
	option = {
		name = human_fallen_empires.561.other_menu.0
		trigger = {
			has_country_flag = human_fallen_empires.561.other_menu
		}
		allow = {
			minerals > 300
			energy > 300
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.561.other_menu.0.response

		add_minerals = -300
		add_energy = -300
		event_target:human_fallen_empires_discovery_docking_ship = {
			create_ship_design = {
				design = Prototype
				ftl = warp
			}
			create_fleet = {
				name = random
				effect = {
					set_owner = event_target:human_fallen_empires_discovery_docking_ship.owner
					create_ship = {
						name = random
						design = last_created_design
					}
					set_location = event_target:human_fallen_empires_discovery_docking_ship
				}
			}
		}

		event_target:human_fallen_empires_discovery_docking_planet_owner = {
			add_minerals = 150
			add_energy = 150
			add_trust = {
				who = root
				amount = 5
			}
		}
		add_trust = {
			who = event_target:human_fallen_empires_discovery_docking_planet_owner
			amount = 5
		}
	}
	# return
	option = {
		name =  modmenu_return
		trigger = {
			or = {
				has_country_flag = human_fallen_empires.561.weapon_menu
				has_country_flag = human_fallen_empires.561.defense_menu
				has_country_flag = human_fallen_empires.561.engine_menu
				has_country_flag = human_fallen_empires.561.other_menu
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.561.weapon_menu
			remove_country_flag = human_fallen_empires.561.defense_menu
			remove_country_flag = human_fallen_empires.561.engine_menu
			remove_country_flag = human_fallen_empires.561.other_menu
			country_event = { id = human_fallen_empires.561 }
		}
	}
	# exit
	option = {
		name =  human_fallen_empires.561.exit
		hidden_effect = {
			remove_country_flag = human_fallen_empires.561.weapon_menu
			remove_country_flag = human_fallen_empires.561.defense_menu
			remove_country_flag = human_fallen_empires.561.engine_menu
			remove_country_flag = human_fallen_empires.561.other_menu
		}
	}
}


## drone country section 600
#
ship_event = {
	id = human_fallen_empires.600
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		owner = {
			is_country_type = human_fallen_empires_drone
		}
	}

	immediate = {
		from = {
			every_system_planet = {
				surveyed = {
					set_surveyed = yes
					surveyor = root.owner
				}
			}
		}
	}
}




### Kad Republic section

# 5000-10000

# functional on actions events 5000 - 5050

# contact dialoge with future 5000 - 5002
ship_event  = {
	id = human_fallen_empires.5000
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		nor = {
			has_global_flag = human_fallen_empires_future_in_expansion
			owner = {
				has_country_flag = human_fallen_empires_future_contacted
			}
		}
		from = {
			exists = space_owner
			space_owner = {
				has_country_flag = human_fallen_empires_future
			}
		}
	}

	immediate = {
		from = {
			space_owner = {
				establish_communications = root.owner
				random_owned_leader = {
					limit = {
						gender = female
					}
					save_event_target_as = human_fallen_empires_female_leader
				}
				random_owned_leader = {
					limit = {
						not = { gender = female }
						leader_class = admiral
					}
					save_event_target_as = human_fallen_empires_male_leader
				}
			}
		}
		owner = {
			if = {
				limit = {
					is_ai = no
				}
				set_country_flag = human_fallen_empires.5001.step0
				country_event = { id = human_fallen_empires.5001 }
				else = {
					event_target:human_fallen_empires_future_country = {
						set_closed_borders = {
							who = root.owner
							status = yes
						}
					}
				}
			}
			set_country_flag = human_fallen_empires_future_contacted
		}
	}
}



# main dialoge
country_event = {
	id = human_fallen_empires.5001
	title = TRANSMISSION
	desc = {
		trigger = {
			success_text = {
				text = "human_fallen_empires.5001.desc.0"
				has_country_flag = human_fallen_empires.5001.step0
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.1"
				has_country_flag = human_fallen_empires.5001.step1
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.2"
				has_country_flag = human_fallen_empires.5001.step2
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.3"
				has_country_flag = human_fallen_empires.5001.step3
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.4"
				has_country_flag = human_fallen_empires.5001.step4
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.5"
				has_country_flag = human_fallen_empires.5001.step5
			}
		}
	}
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_female_leader
		room = human_fallen_empires_future_room
	}

	# step 0
	option = {
		name = human_fallen_empires.5001.0.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			any_country = {
				has_communications = root
				not = {
					is_country = root
				}
				has_country_flag = human_fallen_empires_marked_as_human
			}
			human_fallen_empires_is_xenophobe_trigger = yes
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			any_country = {
				has_communications = root
				not = { is_country = root}
				has_country_flag = human_fallen_empires_egypt
			}
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.2
		trigger = {
			has_country_flag = human_fallen_empires_marked_as_human
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				any_country = {
					has_communications = root
					not = { is_country = root}
					has_country_flag = human_fallen_empires_egypt
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.3
		trigger = {
			has_country_flag = human_fallen_empires_marked_as_human
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				any_country = {
					has_communications = root
					not = { is_country = root}
					has_country_flag = human_fallen_empires_egypt
				}
			}
			human_fallen_empires_is_materialist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			human_fallen_empires_is_xenophobe_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.6
		trigger = {
			human_fallen_empires_is_xenophobe_trigger = no
			human_fallen_empires_is_xenophile_trigger = no
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.7
		trigger = {
			human_fallen_empires_is_materialist_trigger = yes
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		add_energy = 500
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	# step 1
	option = {
		name = human_fallen_empires.5001.1.0
		trigger = {
			has_country_flag = human_fallen_empires_marked_as_human
			has_country_flag = human_fallen_empires.5001.step1
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			set_country_flag = human_fallen_empires.5001.step2.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.1.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			human_fallen_empires_is_xenophobe_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.1.2
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.1.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			human_fallen_empires_is_spiritualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }

		}
	}
	option = {
		name = human_fallen_empires.5001.1.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			nor = {
				has_country_flag = human_fallen_empires_marked_as_human
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }

		}
	}
	# step 2
	option = {
		name = human_fallen_empires.5001.2.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			has_country_flag = human_fallen_empires.5001.step2.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			remove_country_flag = human_fallen_empires.5001.step2.human
			set_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step3.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.2.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			not = { has_country_flag = human_fallen_empires.5001.step2.human }
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			set_country_flag = human_fallen_empires.5001.step3
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.2.2
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			human_fallen_empires_is_xenophobe_trigger = yes
			not = { has_country_flag = human_fallen_empires.5001.step2.human }
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			event_target:human_fallen_empires_future_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.5001.2.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			human_fallen_empires_is_xenophobe_trigger = no
			nor = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_country_flag = human_fallen_empires.5001.step2.human
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			event_target:human_fallen_empires_future_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	# step 3
	option = {
		name = human_fallen_empires.5001.3.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			has_country_flag = human_fallen_empires.5001.step3.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			remove_country_flag = human_fallen_empires.5001.step3.human
			set_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step4.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_collectivist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_individualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_xenophobe_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_militarist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.6
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_pacifist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.7
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_spiritualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.8
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_is_materialist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	# step 4
	option = {
		name = human_fallen_empires.5001.4.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			has_country_flag = human_fallen_empires.5001.step4.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			remove_country_flag = human_fallen_empires.5001.step4.human
			set_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step5.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_collectivist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_individualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_xenophobe_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_militarist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.6
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_pacifist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.7
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_spiritualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.8
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_is_materialist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	# step 5
	option = {
		name = human_fallen_empires.5001.5.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			has_country_flag = human_fallen_empires.5001.step5.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			remove_country_flag = human_fallen_empires.5001.step5.human
			set_country_flag = human_fallen_empires.5001.step6
			set_country_flag = human_fallen_empires.5001.step6.human
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_collectivist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.2
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_individualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_xenophobe_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_xenophile_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_militarist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.6
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_pacifist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.7
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_spiritualist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.8
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_is_materialist_trigger = yes
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
}

# part 2 for male portrait
country_event = {
	id = human_fallen_empires.5002
	title = TRANSMISSION
	desc = {
		trigger = {
			success_text = {
				text = "human_fallen_empires.5001.desc.6.1"
				has_country_flag = human_fallen_empires.5001.step6
				is_species_class = HUM
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.6.2"
				has_country_flag = human_fallen_empires.5001.step6
				not = { is_species_class = HUM }
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.7"
				has_country_flag = human_fallen_empires.5001.step7
			}
		}
	}
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_male_leader
		room = human_fallen_empires_future_room
	}

	# step 6
	option = {
		name = human_fallen_empires.5001.6.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step6
			is_species_class = HUM
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step6
			set_country_flag = human_fallen_empires.5001.step7
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.6.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step6
			not = { is_species_class = HUM }
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step6
			set_country_flag = human_fallen_empires.5001.step7
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.7.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step7
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step7
			event_target:human_fallen_empires_future_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
}

# make future default country, start expansion era 5010 - 5012
country_event = {
	id = human_fallen_empires.5010
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		not = {
			has_global_flag = human_fallen_empires_future_in_expansion
		}
		or = {
			years_passed > 110
						 any_country = {
				is_country_type = default
				fleet_power > 50000
			}
		}
	}

	immediate = {
		every_owned_ship = {
			repair_ship = yes
			add_modifier = {
				modifier = human_fallen_empires_unkeep
				days = -1
			}
		}
		add_modifier = {
			modifier = human_fallen_empires_navy_size
			days = 3650
		}
		country_remove_ethic = ethic_fanatic_pacifist
		country_add_ethic = ethic_fanatic_militarist
		country_add_ethic = ethic_individualist
		every_owned_pop = {
			pop_remove_ethic = ethic_fanatic_pacifist
			pop_add_ethic = ethic_fanatic_militarist
			pop_add_ethic = ethic_individualist
		}
		kill_leader = {
			type = ruler
			show_notification = no
		}
		set_country_type = default
		change_government = martial_demarchy
		set_empire_name = "Kad Republic"
		set_global_flag = human_fallen_empires_future_in_expansion
		ruler = {
			save_event_target_as = human_fallen_empires_future_ruler
		}
		every_country = {
			establish_communications_no_message = event_target:human_fallen_empires_future_country
			if = {
				limit = { is_ai = no }
				country_event = { id = human_fallen_empires.5011 }
			}
		}
	}
}

# future expansion notification
country_event = {
	id = human_fallen_empires.5011
	title = "human_fallen_empires.5011.name"
	desc = "human_fallen_empires.5011.desc.0"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_future_ruler
		room = human_fallen_empires_future_room
	}

	option = {
		name = human_fallen_empires.5011.0
		trigger = {
			has_country_flag = human_fallen_empires_future_contacted
		}
		# добавить эвент приглашения
		#	hidden_effect = {

		#	}
		custom_tooltip = human_fallen_empires.5011.0.tooltip
	}
	option = {
		name = human_fallen_empires.5011.0
		trigger = {
			not = { has_country_flag = human_fallen_empires_future_contacted }
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires_future_contacted
		}
	}
}

# assimilation event (turn regular subject into coalitionmember subject type) 5020 - 5021
country_event = {
	id = human_fallen_empires.5020
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_subject = {
			not = { is_subject_type = human_fallen_empires_future_vassal }
		}
	}

	immediate = {
		random_subject = {
			limit = {
				not = { is_subject_type = human_fallen_empires_future_vassal }
			}
			set_subject_of = {
				who = root
				subject_type = human_fallen_empires_future_vassal
			}
			country_event = { id = human_fallen_empires.5021 }
		}
	}
}

# inform player
country_event = {
	id = human_fallen_empires.5021
	title = "human_fallen_empires.5021.name"
	desc = "human_fallen_empires.5021.desc"
	picture = GFX_evt_human_fallen_empires_coalition
	show_sound = event_administrative_work
	is_triggered_only = yes

	trigger = {
		is_ai = no
	}

	option = {
		name = human_fallen_empires.5021.0
	}
}


## anomalys and after survey on actions 5050 - 5100

# criopods anomaly 5050 - 5055

# switch to country
ship_event = {
	id = human_fallen_empires.5050
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				not = { exists = event_target:human_fallen_empires_future_species }
			}
			random_country = {
				limit = {
					has_country_flag = human_fallen_empires_future
				}
				species = { save_event_target_as = human_fallen_empires_future_species }
			}
		}
		from = { save_event_target_as = human_fallen_empires_criopods_planet }
		owner = { country_event = { id = human_fallen_empires.5051 } }
	}
}

# main event
country_event = {
	id = human_fallen_empires.5051
	title = "human_fallen_empires.5051.name"
	desc = {
		trigger = {
			# step 1
			# have contact
			success_text = {
				text = "human_fallen_empires.5051.step1.desc.1"
				has_country_flag = human_fallen_empires_future_contacted
			}
			# havent contact
			fail_text = {
				text = "human_fallen_empires.5051.step1.desc.2"
				has_country_flag = human_fallen_empires_future_contacted
			}
			# human addition
			success_text = {
				text = "human_fallen_empires.5051.step1.desc.3"
				not = { has_country_flag = human_fallen_empires_future_contacted }
				has_country_flag = human_fallen_empires_marked_as_human
			}
			# step 2
			text = "human_fallen_empires.5051.step2.desc.1"
			# step 3
			# human
			# have contact
			success_text = {
				text = "human_fallen_empires.5051.step3.desc.1"
				has_country_flag = human_fallen_empires_future_contacted
				has_country_flag = human_fallen_empires_marked_as_human
			}
			# havent contact
			success_text = {
				text = "human_fallen_empires.5051.step3.desc.2"
				not = { has_country_flag = human_fallen_empires_future_contacted }
				has_country_flag = human_fallen_empires_marked_as_human
			}
			# non human
			# xenophobe
			success_text = {
				text = "human_fallen_empires.5051.step3.desc.3"
				not = { has_country_flag = human_fallen_empires_marked_as_human }
				or = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
			# xenophile
			success_text = {
				text = "human_fallen_empires.5051.step3.desc.4"
				not = { has_country_flag = human_fallen_empires_marked_as_human }
				or = {
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
			# collectivist
			success_text = {
				text = "human_fallen_empires.5051.step3.desc.5"
				not = { has_country_flag = human_fallen_empires_marked_as_human }
				or = {
					has_ethic = ethic_collectivist
					has_ethic = ethic_fanatic_collectivist
				}
			}
			# individualist
			success_text = {
				text = "human_fallen_empires.5051.step3.desc.6"
				not = { has_country_flag = human_fallen_empires_marked_as_human }
				or = {
					has_ethic = ethic_individualist
					has_ethic = ethic_fanatic_individualist
				}
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_colony_new
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_criopods_planet

	is_triggered_only = yes

	option = {
		name = human_fallen_empires.5051.0
		trigger = {
			has_country_flag = human_fallen_empires_future_contacted
			has_country_flag = human_fallen_empires_marked_as_human
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.1
		trigger = {
			not = { has_country_flag = human_fallen_empires_future_contacted }
			has_country_flag = human_fallen_empires_marked_as_human
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.2
		trigger = {
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			or = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.3
		trigger = {
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			or = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.4
		trigger = {
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			or = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.5
		trigger = {
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			or = {
				has_ethic = ethic_collectivist
				has_ethic = ethic_fanatic_collectivist
			}
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.6
		trigger = {
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			or = {
				has_ethic = ethic_individualist
				has_ethic = ethic_fanatic_individualist
			}
		}
		hidden_effect = {
			random_list = {
				1 = { set_country_flag = human_fallen_empires_criopods_var_1 }
				1 = { set_country_flag = human_fallen_empires_criopods_var_2 }
				1 = { set_country_flag = human_fallen_empires_criopods_var_3 }
			}
			country_event = { id = human_fallen_empires.5052 days = 15 random = 15 }
		}
	}
}

# step 2 for individualist
country_event = {
	id = human_fallen_empires.5052
	title = "human_fallen_empires.5052.name"
	desc = {
		trigger = {
			hidden:root = {
				switch = {
					trigger = has_country_flag

					default = { text = "error" }
					human_fallen_empires_criopods_var_1 = { text = human_fallen_empires.5052.desc.1 }
					human_fallen_empires_criopods_var_2 = { text = human_fallen_empires.5052.desc.2 }
					human_fallen_empires_criopods_var_3 = { text = human_fallen_empires.5052.desc.3 }
				}
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_colony_new
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_criopods_planet
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.5052.1
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_1
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5052.2
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_2
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_country = {
				name = random
				type = default
				species = event_target:human_fallen_empires_future_species
				government = random
				flag = random
				ethos = {
					ethic = ethic_fanatic_individualist
					ethic = "ethic_militarist"
				}
				effect = {
					set_subject_of = {
						who = root
						subject_type = protectorate
					}
				}
			}
			create_colony = {
				owner = last_created_country
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5052.3
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_3
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_country = {
				name = random
				type = default
				species = event_target:human_fallen_empires_future_species
				government = random
				flag = random
				ethos = {
					ethic = ethic_fanatic_individualist
					ethic = "ethic_militarist"
				}
				effect = {
					establish_communications_no_message = root
				}
			}
			create_colony = {
				owner = last_created_country
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5052.4
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_3
			or = {
				has_ethic = ethic_fanatic_militarist
				has_ethic = ethic_militarist
			}
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_country = {
				name = random
				type = default
				species = event_target:human_fallen_empires_future_species
				government = random
				flag = random
				ethos = {
					ethic = ethic_fanatic_individualist
					ethic = "ethic_militarist"
				}
				effect = {
					establish_communications_no_message = root
				}
			}
			create_colony = {
				owner = last_created_country
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
			root = {
				declare_war = {
					who = last_created_country
				}
				add_war_demand = {
					type = cede_planet
					parameter:planet = prev
					target = prev.owner
					warscore_cost = 50
				}
			}
		}
	}
	after = {
		remove_country_flag = human_fallen_empire_criopods_var_1
		remove_country_flag = human_fallen_empire_criopods_var_2
		remove_country_flag = human_fallen_empire_criopods_var_3
	}
}

# dead worms anomaly 5055 - 5057

# start
ship_event = {
	id = human_fallen_empires.5055
	title = "human_fallen_empires.5055.name"
	desc = "human_fallen_empires.5055.desc"
	picture = GFX_evt_human_fallen_empires_events_space_debris
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	option  = {
		name = human_fallen_empires_at_the_sreen
		hidden_effect = {
			owner = {
				country_event = { id = human_fallen_empires.5056 }
			}
		}
	}
}

# diplo event
country_event = {
	id = human_fallen_empires.5056
	title = "human_fallen_empires.5056.name"
	desc = "human_fallen_empires.5056.desc"
	show_sound = event_mystic_reveal
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = human_fallen_empires_dead_worms_room
	}

	option = {
		name = human_fallen_empires.5056.0
		response_text = human_fallen_empires.5056.0.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5056.1
		response_text = human_fallen_empires.5056.1.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5056.2
		hidden_effect = {
			country_event = { id = human_fallen_empires.5057 }
		}
	}
}

# for pic
country_event = {
	id = human_fallen_empires.5057
	title = "human_fallen_empires.5056.name"
	desc = "human_fallen_empires.5056.2.response"
	show_sound = event_space_battle
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = human_fallen_empires_bombardment_room
	}

	option = {
		name = human_fallen_empires.5056.3
		trigger = {
			human_fallen_empires_is_xenophobe_trigger = yes
		}
	}
	option = {
		name = human_fallen_empires.5056.4
		trigger = {
			human_fallen_empires_is_xenophile_trigger = yes
		}
	}
	option = {
		name = human_fallen_empires.5056.5
		trigger = {
			human_fallen_empires_has_clever_trait = yes
		}
	}
	option = {
		name = human_fallen_empires.5056.6
		trigger = {
			human_fallen_empires_is_xenophobe_trigger = no
			human_fallen_empires_is_xenophile_trigger = no
			human_fallen_empires_has_clever_trait = no
		}
	}
}


# other dialoges 5100 - 5200

# buy robots 5100
country_event = {
	id = human_fallen_empires.5100
	title = TRANSMISSION
	desc = {
		trigger = {
			fail_text = {
				text = "human_fallen_empires.5100.desc.0"
				has_country_flag = human_fallen_empires.5100.step1
			}
			success_text = {
				text = "human_fallen_empires.5100.desc.1"
				has_country_flag = human_fallen_empires.5100.step1
			}
		}
	}
	#	show_sound = event_alien_signal
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_future_country
		room = human_fallen_empires_future_room
	}

	trigger = {
		any_owned_pop = {
			has_trait = trait_mechanical
		}
		exists = event_target:human_fallen_empires_future_country
	}

	immediate = {
		set_country_flag = human_fallen_empires_future_try_take_robot
	}

	option = {
		name = human_fallen_empires.5100.0
		trigger = {
			not = {
				has_policy_flag = ai_full_rights
			}
		}
		add_modifier = {
			modifier = human_fallen_empires_army_trained_by_future
			days = -1
		}
		hidden_effect = {
			set_global_flag = human_fallen_empires_future_take_robot
			random_owned_pop = {
				limit = {
					has_trait = trait_mechanical
				}
				kill_pop = yes
			}
			event_target:human_fallen_empires_future_country = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					random_tile = {
						limit = {
							not = {
								exists = pop
							}
						}
						build_pop = {
    						name = buildable_robot_pop_3
    						grown = yes
						}
					}
				}
			}
		}
		custom_tooltip = human_fallen_empires.5100.yes.tooltip
	}
	option = {
		name = human_fallen_empires.5100.1
		trigger = {
			or = {
				human_fallen_empires_is_xenophobe_trigger = yes
				human_fallen_empires_is_collectivist_trigger = yes
			}
			has_policy_flag = ai_full_rights
		}
		add_modifier = {
			modifier = human_fallen_empires_army_trained_by_future
			days = -1
		}
		hidden_effect = {
			set_global_flag = human_fallen_empires_future_take_robot
			random_owned_pop = {
				limit = {
					has_trait = trait_mechanical
				}
				kill_pop = yes
			}
			event_target:human_fallen_empires_future_country = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					random_tile = {
						limit = {
							not = {
								exists = pop
							}
						}
						build_pop = {
    						name = buildable_robot_pop_3
    						grown = yes
						}
					}
				}
			}
		}
		custom_tooltip = human_fallen_empires.5100.yes.tooltip
	}
	option = {
		name = human_fallen_empires.5100.2
		trigger = {
			human_fallen_empires_is_xenophobe_trigger = no
			human_fallen_empires_is_collectivist_trigger = no
			has_policy_flag = ai_full_rights
		}
		response_text = human_fallen_empires.5100.no.response
	}
	option = {
		name = human_fallen_empires.5100.3
		response_text = human_fallen_empires.5100.no.response
	}
	option = {
		name = human_fallen_empires.5100.4
		trigger = {
			not = {
				has_country_flag = human_fallen_empires.5100.step1
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.5100.step1
			country_event = { id = human_fallen_empires.5100 }
		}
	}
	option = {
		name = human_fallen_empires.5100.5
		trigger = {
			has_country_flag = human_fallen_empires.5100.step1
		}
		response_text = human_fallen_empires.5100.5.response
		is_dialog_only = yes
	}
}













### The War in Heavens by Human Fallen Empires
#10000+
# functional events
event = {
	id = human_fallen_empires.10000
	title = OK
	desc = OK
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		host_has_dlc = "Leviathans Story Pack"
		count_countries = {
			limit = {
				is_country_type = awakened_fallen_empire
				is_at_war = no
				fleet_power > 40000
			}
			count > 1
		}
	}

	immediate = {
		every_country = {
			limit = {
				is_country_type = awakened_fallen_empire
			}
			remove_country_flag = ai_no_wars
			country_event = { id = fallen_empires.13 }
			if = {
				limit = {
					any_country = {
						is_country_type = default
						fleet_power > 50000
					}
				}
				country_event = { id = fallen_empires.13 }
			}
		}
		if = {
			limit = {
				count_countries = {
					limit = { is_country_type = awakened_fallen_empire }
					count > 3
				}
			}
			set_global_flag = human_fallen_empires_war_in_heaven_4
		}
		if = {
			limit = {
				count_countries = {
					limit = { is_country_type = awakened_fallen_empire }
					count = 3
				}
			}
			set_global_flag = human_fallen_empires_war_in_heaven_3
		}
		if = {
			limit = {
				count_countries = {
					limit = { is_country_type = awakened_fallen_empire }
					count = 2
				}
			}
			set_global_flag = human_fallen_empires_war_in_heaven_2
		}
		random_country = {
			limit = {
				is_country_type = awakened_fallen_empire
			}
			save_event_target_as = human_fallen_empires_1_awakened
		}
		random_country = {
			limit = {
				is_country_type = awakened_fallen_empire
				not = {
					is_country = event_target:human_fallen_empires_1_awakened
				}
			}
			save_event_target_as = human_fallen_empires_2_awakened
		}
		if = {
			limit = {
				or = {
					has_global_flag = human_fallen_empires_war_in_heaven_3
					has_global_flag = human_fallen_empires_war_in_heaven_4
				}
			}
			random_country = {
				limit = {
					is_country_type = awakened_fallen_empire
					nor = {
						is_country = event_target:human_fallen_empires_1_awakened
						is_country = event_target:human_fallen_empires_2_awakened
					}
				}
				save_event_target_as = human_fallen_empires_3_awakened
			}
		}
		if = {
			limit = {
				has_global_flag = human_fallen_empires_war_in_heaven_4
			}
			random_country = {
				limit = {
					is_country_type = awakened_fallen_empire
					nor = {
						is_country = event_target:human_fallen_empires_1_awakened
						is_country = event_target:human_fallen_empires_2_awakened
						is_country = event_target:human_fallen_empires_3_awakened
					}
				}
				save_event_target_as = human_fallen_empires_4_awakened
			}
		}
		# 1 vs 2
		event_target:human_fallen_empires_1_awakened = {
			declare_war = {
				who = event_target:human_fallen_empires_2_awakened
				major_war = yes
				name = "The War in Heaven"
			}
			add_war_demand = {
				type = "total_defeat"
				parameter:country = event_target:human_fallen_empires_2_awakened
				warscore_cost = 100
				target = this
				enemy = event_target:human_fallen_empires_2_awakened
			}
			event_target:human_fallen_empires_2_awakened = {
				add_war_demand = {
					type = "total_defeat"
					parameter:country = event_target:human_fallen_empires_1_awakened
					warscore_cost = 100
					target = this
					enemy = event_target:human_fallen_empires_1_awakened
				}
			}
		}
		if = {
			limit = {
				or = {
					has_global_flag = human_fallen_empires_war_in_heaven_3
					has_global_flag = human_fallen_empires_war_in_heaven_4
				}
			}
			# 3 vs 2
			event_target:human_fallen_empires_3_awakened = {
				declare_war = {
					who = event_target:human_fallen_empires_2_awakened
					major_war = yes
					name = "The War in Heaven"
				}
				add_war_demand = {
					type = "total_defeat"
					parameter:country = event_target:human_fallen_empires_2_awakened
					warscore_cost = 100
					target = this
					enemy = event_target:human_fallen_empires_2_awakened
				}
				event_target:human_fallen_empires_2_awakened = {
					add_war_demand = {
						type = "total_defeat"
						parameter:country = event_target:human_fallen_empires_3_awakened
						warscore_cost = 100
						target = this
						enemy = event_target:human_fallen_empires_3_awakened
					}
				}
			}
			# 3 vs 1
			event_target:human_fallen_empires_3_awakened = {
				declare_war = {
					who = event_target:human_fallen_empires_1_awakened
					major_war = yes
					name = "The War in Heaven"
				}
				add_war_demand = {
					type = "total_defeat"
					parameter:country = event_target:human_fallen_empires_1_awakened
					warscore_cost = 100
					target = this
					enemy = event_target:human_fallen_empires_1_awakened
				}
				event_target:human_fallen_empires_1_awakened = {
					add_war_demand = {
						type = "total_defeat"
						parameter:country = event_target:human_fallen_empires_3_awakened
						warscore_cost = 100
						target = this
						enemy = event_target:human_fallen_empires_3_awakened
					}
				}
			}
		}
		if = {
			limit = {
				has_global_flag = human_fallen_empires_war_in_heaven_4
			}
			# 4 vs 2
			event_target:human_fallen_empires_4_awakened = {
				declare_war = {
					who = event_target:human_fallen_empires_2_awakened
					major_war = yes
					name = "The War in Heaven"
				}
				add_war_demand = {
					type = "total_defeat"
					parameter:country = event_target:human_fallen_empires_2_awakened
					warscore_cost = 100
					target = this
					enemy = event_target:human_fallen_empires_2_awakened
				}
				event_target:human_fallen_empires_2_awakened = {
					add_war_demand = {
						type = "total_defeat"
						parameter:country = event_target:human_fallen_empires_4_awakened
						warscore_cost = 100
						target = this
						enemy = event_target:human_fallen_empires_4_awakened
					}
				}
			}
			# 4 vs 1
			event_target:human_fallen_empires_4_awakened = {
				declare_war = {
					who = event_target:human_fallen_empires_1_awakened
					major_war = yes
					name = "The War in Heaven"
				}
				add_war_demand = {
					type = "total_defeat"
					parameter:country = event_target:human_fallen_empires_1_awakened
					warscore_cost = 100
					target = this
					enemy = event_target:human_fallen_empires_1_awakened
				}
				event_target:human_fallen_empires_1_awakened = {
					add_war_demand = {
						type = "total_defeat"
						parameter:country = event_target:human_fallen_empires_4_awakened
						warscore_cost = 100
						target = this
						enemy = event_target:human_fallen_empires_4_awakened
					}
				}
			}
			# 4 vs 3
			event_target:human_fallen_empires_4_awakened = {
				declare_war = {
					who = event_target:human_fallen_empires_3_awakened
					major_war = yes
					name = "The War in Heaven"
				}
				add_war_demand = {
					type = "total_defeat"
					parameter:country = event_target:human_fallen_empires_3_awakened
					warscore_cost = 100
					target = this
					enemy = event_target:human_fallen_empires_3_awakened
				}
				event_target:human_fallen_empires_3_awakened = {
					add_war_demand = {
						type = "total_defeat"
						parameter:country = event_target:human_fallen_empires_4_awakened
						warscore_cost = 100
						target = this
						enemy = event_target:human_fallen_empires_4_awakened
					}
				}
			}
		}
		if = {
			limit = {
				not = { exists = event_target:human_fallen_empires_future_country }
			}
			random_country = {
				limit = { has_country_flag = human_fallen_empires_future }
				save_event_target_as = human_fallen_empires_future_country
			}
		}
		every_country = {
			limit = {
				is_country_type = default
			}
			country_event = { id = human_fallen_empires.10100 }
		}
		set_global_flag = human_fallen_empires_war_in_heaven_started
	}
}

# events with text
country_event = {
	id = human_fallen_empires.10100
	title = "human_fallen_empires.10100.name"
	desc = {
		trigger = {
			fail_text = {
				text = "human_fallen_empires.10100.desc.0.0"
				exists = event_target:human_fallen_empires_3_awakened
			}
			success_text = {
				text = "human_fallen_empires.10100.desc.0.1"
				exists = event_target:human_fallen_empires_3_awakened
				not = { exists = event_target:human_fallen_empires_4_awakened }
			}
			success_text = {
				text = "human_fallen_empires.10100.desc.0.2"
				exists = event_target:human_fallen_empires_4_awakened
			}
			text = newline
			success_text = {
				text = "human_fallen_empires.10100.desc.1.0"
				exists = event_target:human_fallen_empires_coalition_leader
			}
			text = newline
			success_text = {
				text = "human_fallen_empires.10100.desc.1.1"
				exists = event_target:human_fallen_empires_egypt_country
				event_target:human_fallen_empires_egypt_country = {
					not = {
						is_country = event_target:human_fallen_empires_coalition_leader
					}
				}
			}
			text = newline
			text = "human_fallen_empires.10100.desc.2.0"
		}
	}
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10100.0
		trigger = {
			is_subject = no
			#is_at_war = no		#подумать над этим
			is_country_type = default
			exists = event_target:human_fallen_empires_1_awakened
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_militarist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_xenophile_trigger = no
					}
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_spiritualist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_materialist_trigger = no
					}
					human_fallen_empires_is_xenophobe_trigger = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_xenophile_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_militarist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_spiritualist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_1_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_materialist_trigger = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			event_target:human_fallen_empires_1_awakened = {
				guarantee_country = {
					target = root
					free_guarantee_days = 3650
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_1_awakened = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_1_awakened
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_1_awakened = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_1_awakened
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_1_awakened = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_1_awakened
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_1_awakened = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_1_awakened
					subject_type = satellite
				}
			}
			add_opinion_modifier = { who = event_target:human_fallen_empires_1_awakened modifier = opinion_war_in_heaven_ally }
			event_target:human_fallen_empires_1_awakened = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			# стоит ли добавить модификатор врага? from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
			join_war = event_target:human_fallen_empires_1_awakened
		}
	}
	option = {
		name = human_fallen_empires.10100.1
		trigger = {
			is_subject = no
			#is_at_war = no		#подумать над этим
			is_country_type = default
			exists = event_target:human_fallen_empires_2_awakened
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_militarist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_xenophile_trigger = no
					}
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_spiritualist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_materialist_trigger = no
					}
					human_fallen_empires_is_xenophobe_trigger = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_xenophile_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_militarist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_spiritualist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_2_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_materialist_trigger = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			event_target:human_fallen_empires_2_awakened = {
				guarantee_country = {
					target = root
					free_guarantee_days = 3650
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_2_awakened = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_2_awakened
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_2_awakened = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_2_awakened
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_2_awakened = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_2_awakened
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_2_awakened = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_2_awakened
					subject_type = satellite
				}
			}
			add_opinion_modifier = { who = event_target:human_fallen_empires_2_awakened modifier = opinion_war_in_heaven_ally }
			event_target:human_fallen_empires_2_awakened = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			# стоит ли добавить модификатор врага? from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
			join_war = event_target:human_fallen_empires_2_awakened
		}
	}
	option = {
		name = human_fallen_empires.10100.2
		trigger = {
			is_subject = no
			#is_at_war = no		#подумать над этим
			is_country_type = default
			has_global_flag = human_fallen_empires_war_in_heaven_3
			exists = event_target:human_fallen_empires_3_awakened
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_militarist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_xenophile_trigger = no
					}
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_spiritualist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_materialist_trigger = no
					}
					human_fallen_empires_is_xenophobe_trigger = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_xenophile_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_militarist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_spiritualist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_3_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_materialist_trigger = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			event_target:human_fallen_empires_3_awakened = {
				guarantee_country = {
					target = root
					free_guarantee_days = 3650
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_3_awakened = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_3_awakened
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_3_awakened = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_3_awakened
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_3_awakened = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_3_awakened
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_3_awakened = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_3_awakened
					subject_type = satellite
				}
			}
			add_opinion_modifier = { who = event_target:human_fallen_empires_3_awakened modifier = opinion_war_in_heaven_ally }
			event_target:human_fallen_empires_3_awakened = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			# стоит ли добавить модификатор врага? from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
			join_war = event_target:human_fallen_empires_3_awakened
		}
	}
	option = {
		name = human_fallen_empires.10100.3
		trigger = {
			is_subject = no
			#is_at_war = no		#подумать над этим
			is_country_type = default
			exists = event_target:human_fallen_empires_4_awakened
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_militarist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_xenophile_trigger = no
					}
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_spiritualist_trigger = no
					}
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_materialist_trigger = no
					}
					human_fallen_empires_is_xenophobe_trigger = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_is_xenophile_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_is_militarist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_is_spiritualist_trigger = yes
					}
					and = {
						event_target:human_fallen_empires_4_awakened = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_is_materialist_trigger = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			event_target:human_fallen_empires_4_awakened = {
				guarantee_country = {
					target = root
					free_guarantee_days = 3650
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_4_awakened = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_4_awakened
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_4_awakened = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_4_awakened
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_4_awakened = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_4_awakened
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_4_awakened = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_4_awakened
					subject_type = satellite
				}
			}
			add_opinion_modifier = { who = event_target:human_fallen_empires_4_awakened modifier = opinion_war_in_heaven_ally }
			event_target:human_fallen_empires_4_awakened = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			# стоит ли добавить модификатор врага? from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
			join_war = event_target:human_fallen_empires_4_awakened
		}
	}
	option = {
		name = human_fallen_empires.10100.4
		trigger = {
			is_subject = no
			#is_at_war = no		#подумать над этим
			is_country_type = default
			exists = event_target:human_fallen_empires_coalition_leader
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				human_fallen_empires_is_individualist_trigger = no
				human_fallen_empires_is_xenophile_trigger = no
				human_fallen_empires_is_militarist_trigger = no
			}
			modifier = {
				factor = 0.1
				or = {
					human_fallen_empires_is_collectivist_trigger = yes
					human_fallen_empires_is_xenophobe_trigger = yes
					human_fallen_empires_is_pacifist_trigger = yes
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			event_target:human_fallen_empires_coalition_leader = {
				guarantee_country = {
					target = root
					free_guarantee_days = 3650
				}
			}
			set_subject_of = {
				who = event_target:human_fallen_empires_coalition_leader
				subject_type = human_fallen_empires_future_vassal
			}
			add_opinion_modifier = { who = event_target:human_fallen_empires_future_country modifier = opinion_war_in_heaven_ally }
			event_target:human_fallen_empires_coalition_leader = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			# стоит ли добавить модификатор врага? from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
			join_war = event_target:human_fallen_empires_coalition_leader
		}
	}
	option = {
		name = human_fallen_empires.10100.5
		trigger = {
			is_subject = no
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				fleet_power < 5000
			}
			modifier = {
				factor = 0.5
				fleet_power < 10000
			}
			modifier = {
				factor = 1.5
				fleet_power > 20000
			}
			modifier = {
				factor = 2
				fleet_power > 30000
			}
			modifier = {
				factor = 10
				fleet_power > 40000
			}
			modifier = {
				factor = 5
				has_federation = yes
			}
			modifier = {
				factor = 2
				any_country = {
					is_ai = no
					is_in_federation_with = root
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.10100.6
		trigger = {
			is_subject = yes
		}
		if = {
			limit = {
				overlord = { is_country = event_target:human_fallen_empires_1_awakened }
			}
			join_war = event_target:human_fallen_empires_1_awakened
		}
		if = {
			limit = {
				overlord = { is_country = event_target:human_fallen_empires_2_awakened }
			}
			join_war = event_target:human_fallen_empires_2_awakened
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_3_awakened
				overlord = { is_country = event_target:human_fallen_empires_3_awakened }
			}
			join_war = event_target:human_fallen_empires_3_awakened
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_4_awakened
				overlord = { is_country = event_target:human_fallen_empires_4_awakened }
			}
			join_war = event_target:human_fallen_empires_4_awakened
		}
	}
}

# event for default empire after total war
country_event = {
	id = human_fallen_empires.10010
	title = "human_fallen_empires.10010.name"
	desc = "human_fallen_empires.10010.desc.0"
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_space_battle
	is_triggered_only = yes

	# make primitive
	option = {
		name = human_fallen_empires.10010.0
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				human_fallen_empires_is_materialist_trigger = no
			}
		}
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10020 }
			}
		}
	}
	# annex
	option = {
		name = human_fallen_empires.10010.1
		ai_chance = {
			factor = 100
			modifier = {
				factor = 100
				has_country_flag = human_fallen_empires_egypt
			}
			modifier = {
				factor = 0
				human_fallen_empires_is_collectivist_trigger = no
				human_fallen_empires_is_individualist_trigger = no
			}
		}
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10021 }
			}
		}
	}
	# make vassal
	option = {
		name = human_fallen_empires.10010.2
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				human_fallen_empires_is_spiritualist_trigger = no
				human_fallen_empires_is_xenophile_trigger = no
				not = { has_country_flag = human_fallen_empires_coalition_leader }
			}
		}
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10022 }
			}
		}
	}
	# kill them all
	option = {
		name = human_fallen_empires.10010.3
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				human_fallen_empires_is_xenophobe_trigger = no
			}
		}
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10023 }
			}
			event_target:WarInHeavenLoserFE = {
				every_owned_planet = {
					add_threat = {
						who = root
						amount = 3 # scales to pops
					}
					destroy_colony = yes
				}
			}
		}
	}
}

# inform
country_event = {
	id = human_fallen_empires.10020
	title = human_fallen_empires.10020.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.10020.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10020.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_tech_fail
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10020.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10020.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}


country_event = {
	id = human_fallen_empires.10021
	title = "human_fallen_empires.10021.name"
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.10021.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10021.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_ships_on_orbit
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10021.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10021.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}

country_event = {
	id = human_fallen_empires.10022
	title = human_fallen_empires.10022.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.10022.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10022.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_city_center
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10022.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10022.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}

country_event = {
	id = human_fallen_empires.10023
	title = human_fallen_empires.10023.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.100203.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10023.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_events_ruins
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10023.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10023.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}


# fallen drain resurces if losing war 10050
country_event = {
	id = human_fallen_empires.10050
	title = human_fallen_empires.10050.name
	desc = human_fallen_empires.10050.desc.0
	picture = GFX_evt_human_fallen_empires_events_fallen_3
	show_sound = event_alien_signal
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10050.0
		add_modifier = {
			modifier = human_fallen_empires_fallen_resurces_drain
			days = 1825
		}
		overlord = {
			add_modifier = {
				modifier = human_fallen_empires_fallen_ship_build_buff
				days = 1825
			}
		}
	}
}
