#
namespace = human_fallen_empires


@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500

# pirate
@human_fallen_empires_pirate_base_cost = 4000
@human_fallen_empires_pirate_base_cost_minus = -4000
@human_fallen_empires_pirate_slave_cost = 300
@human_fallen_empires_pirate_slave_cost_minus = -300
@pirate_fleet_power_minimum = 4000

# functional section 0 - 50

# install mod
country_event = {
	id = human_fallen_empires.0
	fire_only_once = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				not = {
					has_global_flag = human_fallen_empires_installed
				}
			}
			# prevent spawn vanilla pirate
			every_country = {
				set_country_flag = birth_of_piracy
			}
			# prevent vanilla awake
			set_global_flag = sleepers_awake_happened
			if = {
				limit = {
					any_country = {
						or = {
							has_country_flag = human_1
							has_country_flag = human_2
							species_portrait = human
						}
					}
				}
				every_country = {
					limit = {
						or = {
							has_country_flag = human_1
							has_country_flag = human_2
							species_portrait = human
						}
					}
					set_country_flag = human_fallen_empires_marked_as_human
				}
				if = {
					limit = {
						any_country = {
							has_country_flag = human_fallen_empires_marked_as_human
							is_ai = no
						}
					}
					random_country = {
						limit = {
							has_country_flag = human_fallen_empires_marked_as_human
							is_ai = no
						}
						species = { save_event_target_as = human_fallen_empires_human_species }
					}
					else = {
						random_country = {
							limit = {
								has_country_flag = human_fallen_empires_marked_as_human
							}
							species = { save_event_target_as = human_fallen_empires_human_species }
						}
					}
				}
				create_species = {
					name = "Ju Ahet"
					plural = "Ju Ahet"
					class = "HUM"
					portrait = human_fallen_empires_egypt_portrait
					traits = {
						ideal_planet_class = pc_continental
						trait = trait_extremely_adaptive
						trait = trait_venerable
						trait = trait_slow_breeders
					}
					immortal = yes
				}
				last_created_species = {
					set_species_identity = event_target:human_fallen_empires_human_species
					save_global_event_target_as = human_fallen_empires_egypt_species
				}
				else = {
					create_species = {
						name = "Ju Ahet"
						plural = "Ju Ahet"
						class = "HUM"
						portrait = human_fallen_empires_egypt_portrait
						traits = {
							ideal_planet_class = pc_continental
							trait = trait_extremely_adaptive
							trait = trait_venerable
							trait = trait_slow_breeders
						}
					}
					last_created_species = {
						save_global_event_target_as = human_fallen_empires_egypt_species
					}
				}
			}
			create_species = {
				name = Human
				plural = Humans
				class = "HUM"
				portrait = "human"
				traits = {
					ideal_planet_class = pc_continental
					trait = trait_intelligent
					trait = trait_thrifty
					trait = trait_strong
					trait = trait_solitary
				}
			}
			last_created_species = {
				set_species_identity = event_target:human_fallen_empires_egypt_species
				save_global_event_target_as = human_fallen_empires_future_species
			}
			random_rim_system  = {
				limit = {
					nor = {
						any_system = {
							distance = {
								source = prev
								max_distance = 60
								min_distance = 0
							}
							exists = space_owner
						}
						exists = space_owner
						is_fe_cluster = yes
					}
				}
				spawn_system = { initializer = human_fallen_empires_future }
				set_global_flag = human_fallen_empires_future_spawned
			}
			create_species = {
				name = Ahet
				plural = Ahet
				class = "REP"
				portrait = random
				traits = {
					ideal_planet_class = pc_tropical
					trait = trait_slow_breeders
					trait = trait_strong
					trait = random_traits
				}
			}
			last_created_species = {
				save_global_event_target_as = human_fallen_empires_ahet_species
			}
			create_species = {
				name = Varelse
				plural = Varelse
				class = "REP"
				portrait = random
				traits = {
					ideal_planet_class = pc_desert
					trait = trait_industrious
					trait = trait_natural_engineers
					trait = trait_strong
					trait = trait_repugnant
				}
			}
			last_created_species = {
				save_global_event_target_as = human_fallen_empires_varelse_species
			}
			random_system = {
				limit = {
					nor = {
						any_system = {
							distance = {
								source = prev
								max_distance = 90
								min_distance = 0
							}
							exists = space_owner
						}
						exists = space_owner
						is_fe_cluster = yes
					}
				}
				spawn_system = {
					min_distance = 0
					max_distance = 10
					initializer = human_fallen_empires_egypt
				}
				spawn_system = {
					min_distance = 0
					max_distance = 10
					initializer = human_fallen_empires_hope
				}
				spawn_system = {
					min_distance = 0
					max_distance = 10
					initializer = human_fallen_empires_gift
				}
				# spawn_system = {
				# 	min_distance = 10
				# 	max_distance = 20
				# 	initializer = human_fallen_empires_ban
				# }
				set_global_flag = human_fallen_empires_egypt_spawned
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_memorial_01 }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_memorial_02 }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_memorial_03 }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_memorial_04 }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_varelse }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_ahet }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_ahet_2 }
			}
			random_system = {
				limit = {
					has_owner = no
				}
				spawn_system = { initializer = human_fallen_empires_too_ideal_planet }
			}
			# drone
			random_system = {
				limit = {
					nor = {
						any_system = {
							distance = {
								source = prev
								max_distance = 90
								min_distance = 0
							}
							exists = space_owner
						}
						exists = space_owner
						is_fe_cluster = yes
					}
					#any_planet = {
					#	is_rim_system = no
					#}
				}
				spawn_system = {
					min_distance = 0
					max_distance = 10
					initializer = human_fallen_empires_drone_sector_01
				}
				spawn_system = {
					min_distance = 0
					max_distance = 10
					initializer = human_fallen_empires_drone_sector_02
				}
				spawn_system = {
					min_distance = 0
					max_distance = 10
					initializer = human_fallen_empires_drone_sector_03
				}
			}
		}
		set_global_flag = human_fallen_empires_installed
	}
}

# functional events for yearly pulse
event = {
	id = human_fallen_empires.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# pirate module
		if = {
			limit = {
				not = {
					has_global_flag = human_fallen_empires_disable_pirate
				}
			}
			# spawn pirate
			random_country = {
				limit = {
					is_country_type = default
					num_owned_planets > 2
				}
				country_event = { id = human_fallen_empires.650 days = 1 random = 355 }
			}
			# spawn pirate again
			if = {
				limit = {
					any_country = {
						is_country_type = default
						has_country_flag = human_fallen_empires_birth_of_piracy
						not = {
							has_country_flag = human_fallen_empires_pirate_spawned
						}
					}
				}
				every_country = {
					limit = {
						is_country_type = default
						has_country_flag = human_fallen_empires_birth_of_piracy
						not = {
							has_country_flag = human_fallen_empires_pirate_spawned
						}
					}
					random_list = {
						100 = { }
						2 = {
							modifier = {
								factor = 2
								is_at_war = yes
							}
							modifier = {
								factor = 2
								any_owned_planet = {
									is_occupied_flag = yes
								}
							}
							modifier = {
								factor = 2
								any_owned_planet = {
									is_capital = yes
									is_occupied_flag = yes
								}
							}
							modifier = {
								factor = 2
								or = {
									any_war = {
										any_defender = {
											is_country = prev
										}
										defender_war_score < -20
									}
									any_war = {
										any_defender = {
											is_country = prev
										}
										attacker_war_score < -20
									}
								}
							}
							modifier = {
								factor = 2
								or = {
									any_war = {
										any_defender = {
											is_country = prev
										}
										defender_war_score < -40
									}
									any_war = {
										any_defender = {
											is_country = prev
										}
										attacker_war_score < -40
									}
								}
							}
							modifier = {
								factor = 2
								or = {
									any_war = {
										any_defender = {
											is_country = prev
										}
										defender_war_score < -60
									}
									any_war = {
										any_defender = {
											is_country = prev
										}
										attacker_war_score < -60
									}
								}
							}
							modifier = {
								factor = 2
								or = {
									any_war = {
										any_defender = {
											is_country = prev
										}
										defender_war_score < -80
									}
									any_war = {
										any_defender = {
											is_country = prev
										}
										attacker_war_score < -80
									}
								}
							}
							country_event = { id = human_fallen_empires.655 days = 1 random = 355 }
						}
					}
				}
			}
			# pirate life
			every_country = {
				limit = {
					is_country_type = human_fallen_empires_pirate
				}
				country_event = { id = human_fallen_empires.651 }
			}
		}
	}
}

# functional events for bi yearly pulse
event = {
	id = human_fallen_empires.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# make discovery default country
		if = {
			limit = {
				any_country = {
					is_country_type = human_fallen_empires_discovery
					num_owned_planets > 0
				}
			}
			random_country = {
				limit = {
					is_country_type = human_fallen_empires_discovery
					num_owned_planets > 0
				}
				set_country_type = default
			}
		}
		# assimilation event for coalition
		random_country = {
			limit = {
				has_country_flag = human_fallen_empires_coalition_leader
			}
			country_event = { id = human_fallen_empires.5020 }
		}
		# varelse mahanicus event
		if = {
			limit = {
				not = {
					has_global_flag = human_fallen_empires_varelse_mehanicus
				}
			}
			random_planet = {
				limit = {
					has_planet_flag = human_fallen_empires_varelse_colony
					has_observation_outpost = yes
					exists = owner
					owner = {
						is_country_type = primitive
					}
					observation_outpost_owner = {
						is_ai = no
					}
				}
				planet_event = { id = human_fallen_empires.101 days = 1 random = 355 }
			}
		}
		# fallen emp drain resurces from vassals
		if = {
			limit = {
				has_global_flag = human_fallen_empires_war_in_heaven_started
				any_country = {
					is_country_type = awakened_fallen_empire
					is_at_war = yes
					is_war_leader = yes
					is_proposing_war_demands = yes
					or = {
						any_war = {
							any_defender = {
								is_country = prev
							}
							defender_war_score < -20
						}
						any_war = {
							any_defender = {
								is_country = prev
							}
							attacker_war_score < -20
						}
					}
				}
			}
			random_country = {
				limit = {
					is_country_type = awakened_fallen_empire
					is_at_war = yes
					is_war_leader = yes
					is_proposing_war_demands = yes
					or = {
						any_war = {
							any_defender = {
								is_country = prevprev
							}
							defender_war_score < -20
						}
						any_war = {
							any_defender = {
								is_country = prevprev
							}
							attacker_war_score < -20
						}
					}
				}
				every_subject = {
					limit = {
						not = {
							has_modifier = human_fallen_empires_fallen_resurces_drain
						}
					}
					country_event = { id = human_fallen_empires.10200 }
				}
			}
		}
	}
}

# functional events for decade pulse
event = {
	id = human_fallen_empires.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# plague
		random_country = {
			country_event = { id = human_fallen_empires_plague.0 }
		}
		# planet decay feature
		if = {
			limit = {
				years_passed > 300
				not = {
					has_global_flag = human_fallen_empires_disable_planet_decay
				}
			}
			every_country = {
				limit = {
					is_country_type = default
				}
				every_owned_planet = {
					planet_event = { id = human_fallen_empires_planetdecay.0 days = 1 random = 3650 }
				}
			}
		}
		# kad republic buy robots dialoge
		if = {
			limit = {
				exists = event_target:human_fallen_empires_future_country
				not = {
					has_global_flag = human_fallen_empires_future_take_robot
				}
				any_country = {
					is_ai = no
					any_owned_pop = {
						has_trait = trait_mechanical
					}
					not = {
						has_country_flag = human_fallen_empires_future_try_take_robot
					}
					event_target:human_fallen_empires_future_country = {
						has_communications = prev
					}
				}
			}
			random_list = {
				2 = { }
				1 = {
					random_country = {
						limit = {
							is_ai = no
							any_owned_pop = {
								has_trait = trait_mechanical
							}
							not = {
								has_country_flag = human_fallen_empires_future_try_take_robot
							}
						}
						country_event = { id = human_fallen_empires.5100 days = 1 random = 3650 }
					}
				}
			}
		}
		# future is in expansion
		if = {
			limit = {
				exists = event_target:human_fallen_empires_future_country
			}
			event_target:human_fallen_empires_future_country = {
				country_event = { id = human_fallen_empires.5010 days = 1 random = 3650 }
			}
		}
		# egypt is in expansion
		if = {
			limit = {
				exists = event_target:human_fallen_empires_egypt_country
			}
			event_target:human_fallen_empires_egypt_country = {
				country_event = { id = human_fallen_empires.48 days = 1 random = 3650 }
			}
		}
		# war in heavens trigger
		random_country = {
			country_event = { id = human_fallen_empires.10010 days = 1 random = 3650 }
		}
	}
}

# kill country event for avoid errors in log
country_event  = {
	id = human_fallen_empires.9
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		destroy_country = yes
	}
}




# contact with egypt 46 - 47
country_event  = {
	id = human_fallen_empires.46
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = default
		from = {
			has_country_flag = human_fallen_empires_egypt
			is_country_type = human_fallen_empire
		}
	}

	immediate = {
		establish_communications = from
		set_country_flag = human_fallen_empires_egypt_contacted
		if = {
			limit = {
				is_ai = no
			}
			country_event = { id = human_fallen_empires.47 }
			else = {
				from = {
					set_closed_borders = {
						who = root
						status = yes
					}
				}
			}
		}
	}
}

# meeting dialoge egypt
country_event = {
	id = human_fallen_empires.47
	title = TRANSMISSION
	desc = {
		trigger = {
			switch = {
				trigger = has_country_flag
				human_fallen_empires_egypt_wormhole = { text = human_fallen_empires.47.desc.0 }
				default = { text = human_fallen_empires.47.desc.1 }
				human_fallen_empires.47.step1 = { text = human_fallen_empires.47.desc.2 }
				human_fallen_empires.47.step2 = { text = human_fallen_empires.47.desc.3 }
				human_fallen_empires.47.step3 = { text = human_fallen_empires.47.desc.4 }
				human_fallen_empires.47.step4 = { text = human_fallen_empires.47.desc.5 }
				human_fallen_empires.47.stepbadend = { text = human_fallen_empires.47.desc.6 }
			}
		}
	}
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_egypt_country
		room = human_fallen_empires_egypt_room
	}

	# step 0
	option = {
		name = human_fallen_empires.47.0.0
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.47.step1
				has_country_flag = human_fallen_empires.47.step2
				has_country_flag = human_fallen_empires.47.step3
				has_country_flag = human_fallen_empires.47.step4
				has_country_flag = human_fallen_empires_marked_as_human
			}
			has_ethic = ethic_fanatic_xenophobe
		}
		human_fallen_empires_effect_xenophobe_attraction_high = yes
		hidden_effect = {
			set_country_flag = human_fallen_empires.47.stepbadend
			remove_country_flag = human_fallen_empires_egypt_wormhole
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.0.1
		trigger = {
			any_country = {
				has_communications = root
				not = {
					is_country = root
				}
				has_country_flag = human_fallen_empires_future
			}
			nor = {
				has_country_flag = human_fallen_empires.47.step1
				has_country_flag = human_fallen_empires.47.step2
				has_country_flag = human_fallen_empires.47.step3
				has_country_flag = human_fallen_empires.47.step4
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.47.step1
			remove_country_flag = human_fallen_empires_egypt_wormhole
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.0.2
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.47.step1
				has_country_flag = human_fallen_empires.47.step2
				has_country_flag = human_fallen_empires.47.step3
				has_country_flag = human_fallen_empires.47.step4
			}
			# human_fallen_empires_trigger_is_xenophobe = no
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.47.step1
			remove_country_flag = human_fallen_empires_egypt_wormhole
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.0.3
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.47.step1
				has_country_flag = human_fallen_empires.47.step2
				has_country_flag = human_fallen_empires.47.step3
				has_country_flag = human_fallen_empires.47.step4
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.47.step1
			remove_country_flag = human_fallen_empires_egypt_wormhole
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.0.4
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.47.step1
				has_country_flag = human_fallen_empires.47.step2
				has_country_flag = human_fallen_empires.47.step3
				has_country_flag = human_fallen_empires.47.step4
			}
			has_ethic = ethic_fanatic_spiritualist
		}
		human_fallen_empires_effect_spiritualist_attraction_high = yes
		hidden_effect = {
			set_country_flag = human_fallen_empires.47.step1
			remove_country_flag = human_fallen_empires_egypt_wormhole
			country_event = {
				id = human_fallen_empires.47
			}
		}
		# добавить плюс к отношениям
	}
	option = {
		name = human_fallen_empires.47.0.5
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.47.step1
				has_country_flag = human_fallen_empires.47.step2
				has_country_flag = human_fallen_empires.47.step3
				has_country_flag = human_fallen_empires.47.step4
			}
			has_ethic = ethic_fanatic_militarist
			fleet_power > 20000
		}
		human_fallen_empires_effect_militarist_attraction_high = yes
		hidden_effect = {
			set_country_flag = human_fallen_empires.47.stepbadend
			remove_country_flag = human_fallen_empires_egypt_wormhole
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.0.6
		trigger = {
			nor = {
				has_country_flag = human_fallen_empires.47.step1
				has_country_flag = human_fallen_empires.47.step2
				has_country_flag = human_fallen_empires.47.step3
				has_country_flag = human_fallen_empires.47.step4
				has_country_flag = human_fallen_empires_marked_as_human
			}
			any_country = {
				has_communications = root
				not = {
					is_country = root
				}
				or = {
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.47.step1
			remove_country_flag = human_fallen_empires_egypt_wormhole
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	# step 1
	option = {
		name = human_fallen_empires.47.1.0
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_militarist = yes
		}
		human_fallen_empires_effect_militarist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.1.1
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.1.2
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_materialist = yes
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.1.3
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_egalitarian = yes
		}
		human_fallen_empires_effect_egalitarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.1.4
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_pacifist = yes
		}
		human_fallen_empires_effect_pacifist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.1.5
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.1.6
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_spiritualist = yes
		}
		human_fallen_empires_effect_spiritualist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.1.7
		trigger = {
			has_country_flag = human_fallen_empires.47.step1
			human_fallen_empires_trigger_is_authoritarian = yes
		}
		human_fallen_empires_effect_authoritarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step1
			set_country_flag = human_fallen_empires.47.step2
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	# step 2
	option = {
		name = human_fallen_empires.47.2.0
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			or = {
				has_country_flag = human_1
				and = {
					any_system_within_border = {
						has_star_flag = sol
					}
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.1
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			has_country_flag = human_2
			or = {
				not = {
					any_system = {
						has_star_flag = sol
					}
				}
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = no
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.2
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			has_country_flag = human_2
			any_system = {
				has_star_flag = sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.3
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			nor = {
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = yes
					}
				}
				has_country_flag = human_1
				has_country_flag = human_2
			}
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.4
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
			any_country = {
				is_country_type = default
				has_communications = root
				not = {
					is_country = root
				}
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.5
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
			or = {
				not = {
					any_system = {
						has_star_flag = sol
					}
				}
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = no
					}
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.6
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			any_system = {
				has_star_flag = sol
				has_star_flag = nuked_sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.7
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			not = { has_country_flag = human_fallen_empires_marked_as_human }
			any_system = {
				has_star_flag = sol
				has_star_flag = primitive_sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.2.8
		trigger = {
			has_country_flag = human_fallen_empires.47.step2
			or = {
				has_country_flag = human_fallen_empires_marked_as_human
				human_fallen_empires_trigger_is_xenophile = yes
			}
			or = {
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = no
					}
				}
			}
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step2
			set_country_flag = human_fallen_empires.47.step3
			country_event = {
				id = human_fallen_empires.47
			}
			begin_event_chain = {
				event_chain = human_fallen_empires_find_sol_chain
				target = root
			}
			random_system = {
				limit = {
					has_star_flag = sol
				}
				save_event_target_as = human_fallen_empires_sol
				set_star_flag = human_fallen_empires_sol_target
			}
			set_country_flag = human_fallen_empires_sol_search
			create_point_of_interest = {
				id = human_fallen_empires_sol.1
				name = "sol_1_poi"
				desc = human_fallen_empires_find_sol_chain_desc.1
				event_chain = human_fallen_empires_find_sol_chain
				location = event_target:human_fallen_empires_sol
			}
		}
	}
	#step 3
	option = {
		name = human_fallen_empires.47.3.0
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_militarist = yes
		}
		human_fallen_empires_effect_militarist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.3.1
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.3.2
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_materialist = yes
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.3.3
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_egalitarian = yes
		}
		human_fallen_empires_effect_egalitarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.3.4
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_pacifist = yes
		}
		human_fallen_empires_effect_pacifist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.3.5
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.3.6
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_spiritualist = yes
		}
		human_fallen_empires_effect_spiritualist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	option = {
		name = human_fallen_empires.47.3.7
		trigger = {
			has_country_flag = human_fallen_empires.47.step3
			human_fallen_empires_trigger_is_authoritarian = yes
		}
		human_fallen_empires_effect_authoritarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step3
			set_country_flag = human_fallen_empires.47.step4
			country_event = {
				id = human_fallen_empires.47
			}
		}
	}
	#step 4
	option = {
		name = human_fallen_empires.47.4.0
		trigger = {
			has_country_flag = human_fallen_empires.47.step4
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step4
			event_target:human_fallen_empires_egypt_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}

		#добавить бонус к счастью
	}
	option = {
		name = human_fallen_empires.47.4.1
		trigger = {
			has_country_flag = human_fallen_empires.47.step4
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step4
			event_target:human_fallen_empires_egypt_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.47.4.2
		trigger = {
			has_country_flag = human_fallen_empires.47.step4
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.47.step4
			event_target:human_fallen_empires_egypt_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	#сделать бонусную ветку
}

# make egypt default country 48
country_event = {
	id = human_fallen_empires.48
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		not = {
			has_global_flag = human_fallen_empires_egypt_in_expansion
		}
		or = {
			years_passed > 90
			any_country = {
				is_country_type = default
				fleet_power > 30000
			}
		}
	}

	immediate = {
		every_owned_ship = {
			repair_ship = yes
			add_modifier = {
				modifier = human_fallen_empires_unkeep
				days = -1
			}
		}
		add_modifier = {
			modifier = human_fallen_empires_navy_size
			days = 3650
		}
		country_add_ethic = ethic_xenophobe
		set_country_type = default
		set_global_flag = human_fallen_empires_egypt_in_expansion
		ruler = {
			save_event_target_as = human_fallen_empires_egypt_ruler
		}
		every_country = {
			establish_communications_no_message = event_target:human_fallen_empires_egypt_country
			if = {
				limit = {
					is_ai = no
				}
				country_event = {
					id = human_fallen_empires.49
				}
				set_country_flag = human_fallen_empires_egypt_contacted
			}
		}
		random_country = {
			limit = {
				is_country_type = default
				fleet_power > 30000
				not = {
					is_country = root
				}
			}
			log = "egypt awekened by [This.GetName]"
		}
	}
}

# dialoge 49
country_event = {
	id = human_fallen_empires.49
	title = human_fallen_empires.49.name
	desc = human_fallen_empires.49.desc.0
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_egypt_ruler
		room = human_fallen_empires_egypt_room
	}

	option = {
		name = human_fallen_empires.49.0
	}
}

## anomalys and after survey on actions 50 - 100

# wormhole to ju ahet 50
ship_event = {
	id = human_fallen_empires.50
	title = human_fallen_empires.50.name
	desc = human_fallen_empires.50.desc
	picture = GFX_evt_human_fallen_empires_wormhole
	show_sound = event_ship_thrusters
	location = root
    is_triggered_only = yes

	immediate = {
		random_country = {
			limit = {
				has_country_flag = human_fallen_empires_egypt
			}
			random_owned_planet = {
				limit = {
					is_capital = yes
				}
				save_event_target_as = human_fallen_empires_ra_home
			}
		}
		owner = {
			set_country_flag = human_fallen_empires_egypt_wormhole
		}
	}

	option = {
		name = human_fallen_empires.50.0
		hidden_effect = {
			fleet = {
				set_location = {
					target = event_target:human_fallen_empires_ra_home
					distance = 5
					angle = random
				}
			}
			#	remove_country_flag = human_fallen_empires_egypt_wormhole
		}
	}
}

# varelse fleet in time trap 51-53

# start event
ship_event = {
	id = human_fallen_empires.51
	title = human_fallen_empires.51.name
	desc = human_fallen_empires.51.desc
	picture = GFX_evt_human_fallen_empires_station
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_varelse_fleet_location
	is_triggered_only = yes

	trigger = {
		not = {
			has_global_flag = human_fallen_empires_has_event.51
		}
		exists = owner
		owner = {
			is_ai = no
		}
	}

	immediate = {
		set_global_flag = human_fallen_empires_has_event.51
		create_ambient_object = {
			type = ancient_battlefield_object
			location = solar_system
		}
		last_created_ambient_object = {
			save_event_target_as = human_fallen_empires_varelse_fleet_location
		}
		enable_special_project = {
			name = human_fallen_empires_varelse_fleet_project
			location = event_target:human_fallen_empires_varelse_fleet_location
			owner = root.owner
		}
	}

	option = {
		name = human_fallen_empires.51.0
		trigger = {
			is_ship_size = science
		}
	}
	option = {
		name = human_fallen_empires.51.1
		trigger = {
			not = {
				is_ship_size = science
			}
		}
	}
}

# project complite
ship_event = {
	id = human_fallen_empires.52
	title = human_fallen_empires.52.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.52.desc.0
				owner = {
					has_country_flag = human_fallen_empires_egypt_contacted
				}
			}
			text = human_fallen_empires.52.desc.1
		}
	}
	picture = GFX_evt_human_fallen_empires_wormhole
	show_sound = event_ship_thrusters
	location = root
    is_triggered_only = yes

	immediate = {
		create_country = {
			name = "Varelse Hegemony"
			type = faction
			effect = {
				establish_communications_no_message = root.owner
				set_faction_hostility = {
					set_hostile = no
				}
				create_leader = {
					type = admiral
					species = event_target:human_fallen_empires_varelse_species
					name = random
					skill = 500
				}
			}
		}
		create_fleet = {
			name = "11th Strike Force"
			effect = {
				set_owner = last_created_country
				while = {
					count = 10
					create_ship = {
						name = random
						design = Sunset
						graphical_culture = "reptilian_01"
					}
				}
				assign_leader = last_created_leader
				while = {
					count = 30
					create_ship = {
						name = random
						design = Farstar
						graphical_culture = "reptilian_01"
					}
				}
				owner = {
					every_owned_ship = {
						add_modifier = {
							modifier = human_fallen_empires_unkeep
							days = -1
						}
					}
				}
				set_location = root
				save_event_target_as = human_fallen_empires_varelse_fleet
			}
		}
		#	destroy_ambient_object = event_targe:human_fallen_empires_varelse_fleet_location
	}

	option = {
		name = human_fallen_empires_at_the_sreen
		custom_tooltip = human_fallen_empires.53.0.tooltip
		hidden_effect = {
			owner = {
				country_event = { id = human_fallen_empires.53 }
				set_country_flag = human_fallen_empires.53.0
			}
		}
	}
}

# dialogue with fleet
country_event = {
	id = human_fallen_empires.53
	title = TRANSMISSION
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.53.desc.0.0
				has_country_flag = human_fallen_empires.53.0
			}
			success_text = {
				text = human_fallen_empires.53.desc.1.0
				has_country_flag = human_fallen_empires.53.0.0
			}
			success_text = {
				text = human_fallen_empires.53.desc.1.1
				or = {
					has_country_flag = human_fallen_empires.53.0.1
					has_country_flag = human_fallen_empires.53.0.2
				}
			}
			success_text = {
				text = human_fallen_empires.53.desc.1.2
				or = {
					has_country_flag = human_fallen_empires.53.0.3
					has_country_flag = human_fallen_empires.53.0.4
				}
			}
		}
	}
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_varelse_species
		room = human_fallen_empires_varelse_room
	}

	option = {
		name = human_fallen_empires.53.0.0
		trigger = {
			has_country_flag = human_fallen_empires.53.0
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.0
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.1
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			has_country_flag = human_fallen_empires_egypt_contacted
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.1
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.2
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			has_country_flag = human_fallen_empires_egypt_contacted
			human_fallen_empires_trigger_is_militarist = yes
		}
		human_fallen_empires_effect_militarist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.2
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.3
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			has_country_flag = human_fallen_empires_egypt_contacted
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.3
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires.53.0.4
		trigger = {
			has_country_flag = human_fallen_empires.53.0
			human_fallen_empires_trigger_is_pacifist = yes
		}
		human_fallen_empires_effect_pacifist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.53.0
			set_country_flag = human_fallen_empires.53.0.4
			country_event = { id = human_fallen_empires.53 }
		}
	}
	option = {
		name = human_fallen_empires_end_transmission
		trigger = {
			or = {
				has_country_flag = human_fallen_empires.53.0.0
				has_country_flag = human_fallen_empires.53.0.1
				has_country_flag = human_fallen_empires.53.0.2
				has_country_flag = human_fallen_empires.53.0.3
				has_country_flag = human_fallen_empires.53.0.4
			}
		}
		hidden_effect = {
			# attack home of light
			if = {
				limit = {
					or = {
						has_country_flag = human_fallen_empires.53.0.0
						has_country_flag = human_fallen_empires.53.0.1
						has_country_flag = human_fallen_empires.53.0.2
					}
				}
				remove_country_flag = human_fallen_empires.53.0.0
				remove_country_flag = human_fallen_empires.53.0.1
				remove_country_flag = human_fallen_empires.53.0.2
				event_target:human_fallen_empires_varelse_fleet = {
					human_fallen_empires_effect_varelse_fleet_attack_home_of_light = yes
				}
			}
			# found new home
			if = {
				limit = {
					or = {
						has_country_flag = human_fallen_empires.53.0.3
						has_country_flag = human_fallen_empires.53.0.4
					}
				}
				remove_country_flag = human_fallen_empires.53.0.3
				remove_country_flag = human_fallen_empires.53.0.4
				event_target:human_fallen_empires_varelse_fleet = {
					human_fallen_empires_effect_varelse_fleet_find_new_home = yes
				}
			}
		}
	}
}



### varelse section 100 - 150

# varlse colony after curvey 100
ship_event = {
	id = human_fallen_empires.100
	title = human_fallen_empires.100.name
	desc = human_fallen_empires.100.desc
	picture = GFX_evt_human_fallen_empires_varelse_planet
	location = root
    is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_ai = no
		}
		exists = from
		from = {
			has_planet_flag = human_fallen_empires_varelse_colony
		}
		exists = from.owner
		from.owner = {
			is_country_type = primitive
		}
	}

	option = {
		name = human_fallen_empires.100.0
	}
}


## observation outpost events


## varelse mehanicus

# start event
planet_event = {
	id = human_fallen_empires.101
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_observation_outpost = yes
	}

	immediate = {
		set_global_flag = human_fallen_empires_varelse_mehanicus
		save_event_target_as = human_fallen_empires_varelse_colony
		observation_outpost_owner = {
			country_event = { id = human_fallen_empires.102 }
		}
	}
}

# choice
country_event = {
	id = human_fallen_empires.102
	title = human_fallen_empires.102.name
	desc = human_fallen_empires.102.desc
	picture = GFX_evt_human_fallen_empires_varelse_planet
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_varelse_colony
	is_triggered_only = yes

	#lets go to artifact
	option = {
		name = human_fallen_empires.102.0
		hidden_effect = {
			country_event = { id = human_fallen_empires.103 days = 12 random = 4 }
		}
		custom_tooltip = human_fallen_empires.102.0.tooltip
	}
	# lets go to factory
	option = {
		name = human_fallen_empires.102.1
		hidden_effect = {
			country_event = { id = human_fallen_empires.105 days = 10 random = 5 }
		}
		custom_tooltip = human_fallen_empires.102.1.tooltip
	}
	# lets revolt (materialist)
	option = {
		name = human_fallen_empires.102.2
		trigger = {
			human_fallen_empires_trigger_is_materialist = yes
		}
		hidden_effect = {
			country_event = { id = human_fallen_empires.107 days = 100 random = 20 }
		}
	}
	# lets infiltrat
	option = {
		name = human_fallen_empires.102.3
		trigger = {
			from = {
				observation_outpost = {
					has_mission = covert_infiltration
				}
			}
		}
		hidden_effect = {
			country_event = { id = human_fallen_empires.108 days = 10 random = 20 }
		}
	}
	option = {
		name = human_fallen_empires.102.4
	}
}

# lets go to artifact
country_event = {
	id = human_fallen_empires.103
	title = human_fallen_empires.103.name
	desc = human_fallen_empires.103.desc
	# картинка скрижали?
	picture = GFX_evt_human_fallen_empires_varelse_planet
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_varelse_colony
	is_triggered_only = yes

	option = {
		name = human_fallen_empires_at_the_sreen
		hidden_effect = {
			country_event = { id = human_fallen_empires.104 }
		}
	}
}

# history of varelse
country_event = {
	id = human_fallen_empires.104
	title = human_fallen_empires.104.name
	desc = human_fallen_empires.104.desc
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		room = human_fallen_empires_varelse_room
	}

	option = {
		name = human_fallen_empires.104.0
		response_text = human_fallen_empires.104.0.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.104.1
		response_text = human_fallen_empires.104.1.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.104.2
		response_text = human_fallen_empires.104.2.response
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# lets go to factory
country_event = {
	id = human_fallen_empires.105
	title = human_fallen_empires.105.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.105.desc.0
				human_fallen_empires_trigger_is_xenophobe = no
			}
			success_text = {
				text = human_fallen_empires.105.desc.1
				human_fallen_empires_trigger_is_xenophobe = yes
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_varelse_planet
	show_sound = event_cityscape
	location = event_target:human_fallen_empires_varelse_colony
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				human_fallen_empires_trigger_is_xenophobe = yes
			}
			event_target:human_fallen_empires_varelse_colony = {
				owner = {
					human_fallen_empires_effect_down_primitive_teh_lvl = yes
				}
				every_tile = {
					limit = {
						has_building = yes
					}
					set_ruined = yes
				}
				random_pop = {
					kill_pop = yes
				}
				random_pop = {
					kill_pop = yes
				}
			}
		}
	}

	option = {
		name = human_fallen_empires_good_job
		trigger = {
			human_fallen_empires_trigger_is_xenophobe = no
		}
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
	option = {
		name = human_fallen_empires.105.1
		trigger = {
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_middle = yes
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# materialist result lets revolt
country_event = {
	id = human_fallen_empires.107
	title = human_fallen_empires.107.name
	desc = human_fallen_empires.107.desc
	picture = GFX_evt_human_fallen_empires_varelse_planet
	show_sound = event_planetary_riot
	location = event_target:human_fallen_empires_varelse_colony
	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			owner = {
				human_fallen_empires_effect_up_primitive_teh_lvl = yes
				country_remove_ethic = ethic_spiritualist
				country_add_ethic = ethic_materialist
			}
		}
	}

	option = {
		name = human_fallen_empires.107.0
		trigger = {
			human_fallen_empires_trigger_is_materialist = yes
		}
		human_fallen_empires_effect_materialist_attraction_high = yes
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# lets infiltrate
country_event = {
	id = human_fallen_empires.108
	title = human_fallen_empires.108.name
	desc = human_fallen_empires.108.desc
	picture = GFX_evt_human_fallen_empires_varelse_planet
	show_sound = event_primitive_civilization
	location = event_target:human_fallen_empires_varelse_colony
	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			observation_outpost = {
				add_mission_progress = 0.3
			}
		}
	}

	option = {
		name = human_fallen_empires_good_job
	}
}



# memorial section 150 - 350


## pyramid events 150 - 200

# start
planet_event = {
	id = human_fallen_empires.150
	title = human_fallen_empires.150.name
	desc = human_fallen_empires.150.desc
	picture = GFX_evt_human_fallen_empires_pyramid_2
	show_sound = event_mystic_reveal
	location = root
	is_triggered_only = yes

	trigger = {
		has_modifier = human_fallen_empires_memorial
		nor = {
			has_planet_flag = human_fallen_empires_planet_pyramid
			any_system = {
				any_planet = {
					has_planet_flag = human_fallen_empires_pyramid_project
				}
			}
		}
		exists = owner
		owner = {
			is_ai = no
		}
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_planet_pyramid
	}

	option = {
		name = human_fallen_empires.150.0
		enable_special_project = {
			name = human_fallen_empires_pyramid_project
			location = root
			owner = root.owner
		}
		hidden_effect = {
			set_planet_flag = human_fallen_empires_pyramid_project
			save_event_target_as = human_fallen_empires_memorial_planet
		}
	}
	option = {
		name = human_fallen_empires_not_interested
	}
}

# golocube
ship_event = {
	id = human_fallen_empires.151
	title = human_fallen_empires.151.name
	desc = human_fallen_empires.151.desc
	picture = GFX_evt_human_fallen_empires_pyramid_2
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_pyramid_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_pyramid_project
		}
	}

	option = {
		name = human_fallen_empires.151.0
		hidden_effect = {
			owner = {
				country_event = { id = human_fallen_empires.152 }
				set_country_flag = human_fallen_empires_has_event.151
			}
		}
	}
}

# memorial story
country_event = {
	id = human_fallen_empires.152
	title = human_fallen_empires.152.name
	desc = {
		trigger = {
			switch = {
				trigger = has_country_flag
				human_fallen_empires.152.0 = { text = human_fallen_empires.152.desc.1 }
				default = { text = human_fallen_empires.152.desc.0 }
			}
		}
	}
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = human_fallen_empires_memorial_story_room
	}

	option = {
		name = human_fallen_empires.152.0
		trigger = {
			not = {
				has_country_flag = human_fallen_empires.152.0
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.152.0
			country_event = { id = human_fallen_empires.152 }
		}
	}
	option = {
		name = human_fallen_empires.152.1
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = governor
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}

		}
	}
	option = {
		name = human_fallen_empires.152.2
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = scientist
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}

		}
	}
	option = {
		name = human_fallen_empires.152.3
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = admiral
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}
		}
	}
	option = {
		name = human_fallen_empires.152.4
		trigger = {
			has_country_flag = human_fallen_empires.152.0
		}
		hidden_effect = {
			create_leader = {
				type = general
				species = event_target:human_fallen_empires_egypt_species
				name = random
				skill = 0
			}
			last_created_leader = {
				set_skill = 3
			}
		}
	}
	#	option = {
	#		name = human_fallen_empires.152.5
	#		trigger = {
	#			has_country_flag = human_fallen_empires.152.0
	#		}
	#		hidden_effect = {
	#		# добавить технологию
	#		}
	#	}

	after = {
		remove_country_flag = human_fallen_empires.152
	}
}

# obelisk
ship_event = {
	id = human_fallen_empires.153
	title = human_fallen_empires.153.name
	desc = human_fallen_empires.153.desc
	picture = GFX_evt_human_fallen_empires_obelisk
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.153
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_pyramid_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_pyramid_project
		}
		event_target:human_fallen_empires_memorial_planet = {
			create_country = {
				name = "Gnosis"
				type = faction
				effect = {
					establish_communications_no_message = root.owner
				}
			}
			create_species = {
				name = "Gnosis"
				class = random
				portrait = random
				traits = random
			}
			# запилить новый тип армии
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_guardian_army"
			}
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_assault_army"
			}
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_assault_army"
			}
		}
	}

	option = {
		name = human_fallen_empires.153.0
	}
}

# mutant cloud
ship_event = {
	id = human_fallen_empires.154
	title = human_fallen_empires.154.name
	desc = human_fallen_empires.154.desc
	picture = GFX_evt_human_fallen_empires_city_cloud
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.154
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_pyramid_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_pyramid_project
		}
		event_target:human_fallen_empires_memorial_planet = {
			planet_event = { id = human_fallen_empires.155 days = 15 }
		}
	}

	option = {
		name = human_fallen_empires.155.0
	}
}

# lets mutate
planet_event = {
	id = human_fallen_empires.155
	title = human_fallen_empires.154.name
	desc = human_fallen_empires.155.desc
	picture = GFX_evt_human_fallen_empires_city_cloud
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		every_owned_pop = {
			human_fallen_empires_effect_add_random_trait = yes
		}
	}

	option = {
		name = human_fallen_empires.155.0
		custom_tooltip = human_fallen_empires.155.tooltip
	}
}

# tomb
ship_event = {
	id = human_fallen_empires.156
	title = human_fallen_empires.156.name
	desc = human_fallen_empires.156.desc
	picture = GFX_evt_human_fallen_empires_strange_tech
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.156
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_pyramid_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_pyramid_project
		}
	}

	option = {
		name = human_fallen_empires.156.0
		hidden_effect = {
			event_target:human_fallen_empires_memorial_planet = {
				random_list = {
					50 = {
						add_modifier = {
							modifier = human_fallen_empires_tomb_happy
							days = 360
						}
					}
					50 = {
						add_modifier = {
							modifier = human_fallen_empires_tomb_unhappy
							days = 360
						}
					}
				}
			}
		}
		# нужно добавить штраф к отношениям
	}
}


## military warehouse events 200 - 250

# start
planet_event = {
	id = human_fallen_empires.200
	title = human_fallen_empires.200.name
	desc = human_fallen_empires.200.desc
	picture = GFX_evt_human_fallen_empires_weapon_storage
	show_sound = event_mystic_reveal
	location = root
	is_triggered_only = yes

	trigger = {
		has_modifier = human_fallen_empires_memorial
		not = {
			has_planet_flag = human_fallen_empires_military_warehouse_planet
			any_system = {
				any_planet = {
					has_planet_flag = human_fallen_empires_military_warehouse_project
				}
			}
		}
		exists = owner
		owner = {
			is_ai = no
		}
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_military_warehouse_planet
	}

	option = {
		name = human_fallen_empires.200.0
		enable_special_project = {
			name = human_fallen_empires_military_warehouse_project
			location = root
			owner = root.owner
		}
		hidden_effect = {
			set_planet_flag = human_fallen_empires_military_warehouse_project
			save_event_target_as = human_fallen_empires_memorial_planet
		}
	}

	option = {
		name = human_fallen_empires_not_interested
	}
}

# defense system
ship_event = {
	id = human_fallen_empires.201
	title = human_fallen_empires.201.name
	desc = human_fallen_empires.201.desc
	picture = GFX_evt_human_fallen_empires_weapon_storage_2
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.201
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_military_warehouse_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_military_warehouse_project
		}
	}

	option = {
		name = human_fallen_empires.201.0
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = human_fallen_empires_army_planet_defense_damage_mult
				days = -1
			}
		}
	}
}

# abandoned armory
ship_event = {
	id = human_fallen_empires.202
	title = human_fallen_empires.202.name
	desc = human_fallen_empires.202.desc
	picture = GFX_evt_human_fallen_empires_weapon_storage_2
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.202
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_military_warehouse_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_military_warehouse_project
		}
	}

	option = {
		name = human_fallen_empires.202.0
		owner = {
			add_modifier = {
				modifier = human_fallen_empires_army_attack_damage_mult
				days = -1
			}
		}
	}
}

# abandoned librariy
ship_event = {
	id = human_fallen_empires.203
	title = human_fallen_empires.203.name
	desc = human_fallen_empires.203.desc
	picture = GFX_evt_human_fallen_empires_library_old
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.203
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_military_warehouse_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_military_warehouse_project
		}
	}

	option = {
		name = human_fallen_empires.203.0
		owner = {
			add_modifier = {
				modifier = human_fallen_empires_army_defense_damage_mult
				days = -1
			}
		}
	}
}

# abandoned military academy
ship_event = {
	id = human_fallen_empires.204
	title = human_fallen_empires.204.name
	desc = human_fallen_empires.204.desc
	picture = GFX_evt_human_fallen_empires_weapon_storage
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.204
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_military_warehouse_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_military_warehouse_project
		}
	}

	option = {
		name = human_fallen_empires.204.0
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = human_fallen_empires_army_academy
				days = -1
			}
		}
	}
}

# explosion of the warehouse
country_event = {
	id = human_fallen_empires.205
	title = human_fallen_empires.205.name
	desc = {
		trigger = {
			# scientist survived
			success_text = {
				text = human_fallen_empires.205.desc.0
				has_country_flag = human_fallen_empires.205.0
			}
			# scientist wounded
			success_text = {
				text = human_fallen_empires.205.desc.1
				has_country_flag = human_fallen_empires.205.1
			}
			# scientist recovered
			success_text = {
				text = human_fallen_empires.205.desc.2
				has_country_flag = human_fallen_empires.205.2
			}
			# scientist dead
			success_text = {
				text = human_fallen_empires.205.desc.3
				has_country_flag = human_fallen_empires.205.3
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_explosion
	show_sound = event_ship_explosion
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	immediate = {
		set_country_flag = human_fallen_empires_has_event.205
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_military_warehouse_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_military_warehouse_project
		}
		if = {
			limit = {
				has_country_flag = human_fallen_empires.205.1
			}
			event_target:human_fallen_empires_ship = {
				fleet = {
					exile_leader_as = human_fallen_empires_scientist_wounded
				}
			}
		}
		# имя лидера будет некорректно отображаться, если корабля нет
		if = {
			limit = {
				has_country_flag = human_fallen_empires.205.2
			}
			if = {
				limit = {
					exists = event_target:human_fallen_empires_ship
				}
				event_target:human_fallen_empires_ship = {
					fleet = {
						set_leader = human_fallen_empires_scientist_wounded
					}
				}
				else = {
					set_leader = human_fallen_empires_scientist_wounded
				}
			}
		}
		if = {
			limit = {
				has_country_flag = human_fallen_empires.205.3
			}
			event_target:human_fallen_empires_ship = {
				fleet = {
					kill_leader = {	type = scientist show_notification = no }
				}
			}
		}
	}

	option = {
		name = human_fallen_empires.205.0
		trigger = {
			has_country_flag = human_fallen_empires.205.0
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.0
		}
	}
	option = {
		name = human_fallen_empires.205.1
		trigger = {
			has_country_flag = human_fallen_empires.205.1
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.1
			set_country_flag = human_fallen_empires.205.2
			country_event = { id = human_fallen_empires.205 days = 60 random = 120 }
		}
	}
	option = {
		name = human_fallen_empires.205.2
		trigger = {
			has_country_flag = human_fallen_empires.205.2
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.2
		}
	}
	option = {
		name = human_fallen_empires.205.3
		trigger = {
			has_country_flag = human_fallen_empires.205.3
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.205.3
		}
	}
}

# scientific bonus of the warehouse
ship_event = {
	id = human_fallen_empires.206
	title = human_fallen_empires.206.name
	desc = human_fallen_empires.206.desc
	picture = GFX_evt_human_fallen_empires_weapon_storage
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.206
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_military_warehouse_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_military_warehouse_project
		}
	}

	option = {
		name = human_fallen_empires.206.0
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			set_country_flag = human_fallen_empires_military_warehouse_events_6
		}
	}
}

# dr moro
ship_event = {
	id = human_fallen_empires.207
	title = human_fallen_empires.207.name
	desc = human_fallen_empires.207.desc
	picture = GFX_evt_human_fallen_empires_weapon_storage
	show_sound = event_alien_nature
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.207
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_military_warehouse_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_military_warehouse_project
		}
	}

	option = {
		name = human_fallen_empires.207.0
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = human_fallen_empires_tomb_unhappy
				days = 360
			}
		}
	}
}


## found cruiser 250 - 300

# start
planet_event = {
	id = human_fallen_empires.250
	title = human_fallen_empires.250.name
	desc = human_fallen_empires.250.desc
	picture = GFX_evt_human_fallen_empires_ship_old
	show_sound = event_mystic_reveal
	location = root
	is_triggered_only = yes

	trigger = {
		has_modifier = human_fallen_empires_memorial
		nor = {
			has_planet_flag = human_fallen_empires_found_cruiser_planet
			any_system = {
				any_planet = {
					has_planet_flag = human_fallen_empires_found_cruiser_project_planet
				}
			}
		}
		exists = owner
		owner = {
			is_ai = no
		}
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_found_cruiser_planet
	}

	option = {
		name = human_fallen_empires.250.0
		enable_special_project = {
			name = human_fallen_empires_found_cruiser_project
			location = root
			owner = root.owner
		}
		hidden_effect = {
			set_planet_flag = human_fallen_empires_found_cruiser_project_planet
			save_event_target_as = human_fallen_empires_memorial_planet
		}
	}

	option = {
		name = human_fallen_empires_not_interested
	}
}

# rotten skeleton
ship_event = {
	id = human_fallen_empires.251
	title = human_fallen_empires.251.name
	desc = human_fallen_empires.251.desc
	picture = GFX_evt_human_fallen_empires_ship_old
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.251
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_found_cruiser_project_planet
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_found_cruiser_project_planet
		}
	}

	option = {
		name = human_fallen_empires.251.0
		owner = {
			add_monthly_resource_mult = {
				resource = minerals
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		}
	}
	option = {
		name = human_fallen_empires.251.1
		owner = {
			add_monthly_resource_mult = {
				resource = energy
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		}
	}
	option = {
		name = human_fallen_empires.251.2
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# explosion on the cruiser scientist dead
ship_event = {
	id = human_fallen_empires.252
	title = human_fallen_empires.252.name
	desc = human_fallen_empires.252.desc
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.252
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_found_cruiser_project_planet
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_found_cruiser_project_planet
		}
	}

	option = {
		name = human_fallen_empires.252.0
		hidden_effect = {
			kill_leader = {	type = scientist show_notification = no }
		}
	}
}

# runaway cruiser
ship_event = {
	id = human_fallen_empires.253
	title = human_fallen_empires.253.name
	desc = {
		trigger = {
			fail_text = {
				text = human_fallen_empires.253.desc.0
				has_country_flag = human_fallen_empires_egypt_contacted
			}
			success_text = {
				text = human_fallen_empires.253.desc.1
				has_country_flag = human_fallen_empires_egypt_contacted
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_ship
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.253
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_found_cruiser_project_planet
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_found_cruiser_project_planet
		}
	}

	immediate = {
		create_country = {
			name = "Cruiser"
			type = neutral_faction
			effect = {
				establish_communications_no_message = root.owner
				#		set_faction_hostility = {
				#			set_hostile = no
				#		}
			}
		}
		create_fleet = {
			name = "Cruiser"
			effect = {
				save_event_target_as = human_fallen_empires_cruiser # убрать, если работает owner
				set_owner = last_created_country
				create_ship = {
					name = random
					design = "Seth"
					graphical_culture = "mammalian_01"
					prefix = no
				}
				set_location = root
				set_fleet_stance = aggressive
				queue_actions = {
					find_closest_system = {
						trigger = {
							id = human_fallen_empires.253.trigger.0
							any_planet = {
								has_planet_flag = human_fallen_empires_varelse_colony
							}
						}
						found_system = {
							move_to = this
						}
					}
					find_closest_planet = {
						trigger = {
							id = human_fallen_empires.253.trigger.1
							has_planet_flag = human_fallen_empires_varelse_colony
						}
						found_planet = {
							orbit_planet = this
							effect = {
								id = human_fallen_empires.253.effect.0
								owner = {
									set_faction_hostility = {
										set_hostile = yes
									}
								}
							}
							repeat = {
								wait = 100
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = human_fallen_empires.253.0
	}
}

# cruiser became aggressive
ship_event = {
	id = human_fallen_empires.254
	title = human_fallen_empires.254.name
	desc = human_fallen_empires.254.desc
	picture = GFX_evt_human_fallen_empires_ship
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.254
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_found_cruiser_project_planet
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_found_cruiser_project_planet
		}
		create_country = {
			name = "Mad Cruiser"
			type = faction
			effect = {
				#		set_faction_hostility = {
				#			set_hostile = yes
				#		}
				establish_communications_no_message = root.owner
			}
		}
		create_fleet = {
			name = "Mad Cruiser"
			effect = {
				set_owner = last_created_country
				create_ship = {
					name = random
					design = "Seth"
					graphical_culture = "mammalian_01"
					prefix = no
				}
				set_fleet_stance = aggressive
				set_location = root
				queue_actions = {
					repeat = {
						find_closest_system = {
							trigger = {
								id = human_fallen_empires.254.trigger.0
								any_planet = {
									or = {
										has_mining_station = yes
										has_research_station = yes
									}
									exists = controller
									controller = { is_country = root.owner }
								}
							}
							found_system = {
								move_to = THIS
							}
						}
						find_closest_planet = {
							trigger = {
								id = human_fallen_empires.254.trigger.1
								or = {
									has_mining_station = yes
									has_research_station = yes
								}
								exists = controller
								controller = { is_country = root.owner }
							}
							found_planet = {
								orbit_planet = THIS
								wait = {
									duration = 20
								}
							}
						}
					}
				}
			}
		}
	}

	option = {
		name = human_fallen_empires.254.0
	}
}

# love is
ship_event = {
	id = human_fallen_empires.255
	title = human_fallen_empires.255.name
	desc = human_fallen_empires.255.desc
	picture = GFX_evt_human_fallen_empires_ship_new
	show_sound = event_ship_thrusters
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.255
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_found_cruiser_project_planet
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_found_cruiser_project_planet
		}
		create_fleet = {
			name = "Marvin"
			effect = {
				set_owner = root.owner
				create_ship = {
					name = "Marvin"
					design = "Seth"
					graphical_culture = "mammalian_01"
					prefix = no
				}
				last_created_ship = {
					add_modifier = {
						modifier = human_fallen_empires_ship_weapon_range_mult
						days = -1
					}
				}
				set_location = root
				set_fleet_stance = aggressive
			}
		}
	}

	option = {
		name = human_fallen_empires.255.0
	}
}

# new cruiser
#ship_event = {
#	id = human_fallen_empires.257
#	title = "human_fallen_empires.257.name"
#	desc = "human_fallen_empires.257.desc"
#	picture = GFX_evt_archaeological_dig
#	show_sound = event_airlock
#	location = event_target:human_fallen_empires_memorial_planet
#
#	is_triggered_only = yes
#
#	immediate = {
#		create_fleet = { name = "Cruiser"}
#		last_created_fleet = {
#			set_owner = root.owner
#			create_ship = {
#				name = random
#				design = "Seth"
#				graphical_culture = "mammalian_01"
#				prefix = no
#			}
#			set_location = root
#			set_fleet_stance = aggressive
#		}
#	}
#
#	option = {
#		name = "human_fallen_empires.257.0"
#	}
#}


## sputnik 300 - 350

# start
planet_event = {
	id = human_fallen_empires.300
	title = human_fallen_empires.300.name
	desc = human_fallen_empires.300.desc
	picture = GFX_evt_human_fallen_empires_satellite
	show_sound = event_mystic_reveal
	location = root
	is_triggered_only = yes

	trigger = {
		has_modifier = human_fallen_empires_memorial
		nor = {
			has_planet_flag = human_fallen_empires_sputnik_planet
			any_system = {
				any_planet = {
					has_planet_flag = human_fallen_empires_sputnik_project
				}
			}
		}
		exists = owner
		owner = {
			is_ai = no
			not = {
				and = {
					has_country_flag = human_fallen_empires_has_event.301
					has_country_flag = human_fallen_empires_has_event.302
					has_country_flag = human_fallen_empires_has_event.304
				}
			}
		}
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_sputnik_planet
	}

	option = {
		name = human_fallen_empires.300.0
		enable_special_project = {
			name = human_fallen_empires_sputnik_project
			location = root
			owner = root.owner
		}
		hidden_effect = {
			set_planet_flag = human_fallen_empires_sputnik_project
			save_event_target_as = human_fallen_empires_memorial_planet
		}
	}

	option = {
		name = human_fallen_empires_not_interested
	}
}

# bonus to the sensors
ship_event = {
	id = human_fallen_empires.301
	title = human_fallen_empires.301.name
	desc = human_fallen_empires.301.desc
	picture = GFX_evt_human_fallen_empires_satellite
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.301
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_sputnik_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_sputnik_project
		}
	}

	option = {
		name = human_fallen_empires.301.0
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = {
				modifier = human_fallen_empires_planet_sensor_range_mult
				days = -1
			}
		}
	}
}

# go to another events
ship_event = {
	id = human_fallen_empires.302
	title = human_fallen_empires.302.name
	desc = human_fallen_empires.302.desc
	picture = GFX_evt_human_fallen_empires_satellite
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.302
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_sputnik_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_sputnik_project
		}
	}

	option = {
		name = human_fallen_empires.302.0
		hidden_effect = {
			event_target:human_fallen_empires_memorial_planet = {
				random_list = {
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_planet_pyramid
						}
						planet_event = { id = human_fallen_empires.150 days = 1 }
					}
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_military_warehouse_planet
						}
						planet_event = { id = human_fallen_empires.200 days = 1 }
					}
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_found_cruiser_planet
						}
						planet_event = { id = human_fallen_empires.250 days = 1 }
					}
					1 = {
						root = {
							ship_event = { id = human_fallen_empires.303 days = 15 }
						}
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.302.1
	}
}

# go to nothing
ship_event = {
	id = human_fallen_empires.303
	title = human_fallen_empires.303.name
	desc = human_fallen_empires.303.desc
	picture = GFX_evt_human_fallen_empires_satellite_2
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_sputnik_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_sputnik_project
		}
	}

	option = {
		name = human_fallen_empires.303.0
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# engineering bonus
ship_event = {
	id = human_fallen_empires.304
	title = human_fallen_empires.304.name
	desc = human_fallen_empires.304.desc
	picture = GFX_evt_human_fallen_empires_satellite
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet
	is_triggered_only = yes

	trigger = {
		exists = owner
	}

	immediate = {
		owner = {
			set_country_flag = human_fallen_empires_has_event.304
		}
		random_planet = {
			limit = {
				has_planet_flag = human_fallen_empires_sputnik_project
			}
			save_event_target_as = human_fallen_empires_memorial_planet
			remove_planet_flag = human_fallen_empires_sputnik_project
		}
	}

	option = {
		name = human_fallen_empires.304.0
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}


## find sol 350
ship_event = {
	id = human_fallen_empires.350
	title = human_fallen_empires.350.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.350.desc.0
				owner = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
			fail_text = {
				text = human_fallen_empires.350.desc.1
				owner = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_sol_system
	show_sound = event_scanner
	location = root
	is_triggered_only = yes

	trigger = {
		from = { has_star_flag = human_fallen_empires_sol_target }
		owner = { has_country_flag = human_fallen_empires_sol_search }
	}

	immediate = {
		from = { remove_star_flag = human_fallen_empires_sol_target }
		owner = {
			remove_country_flag = human_fallen_empires_sol_search
			add_event_chain_counter = {
				event_chain = human_fallen_empires_find_sol_chain
				counter = found
				amount = 1
			}
		}
	}

	option = {
		name = human_fallen_empires.350.0
		trigger = {
			owner = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
				min = @tier2influencemin
				max = @tier2influencemax
			}
		}
	}
	option = {
		name = human_fallen_empires.350.1
		trigger = {
			owner = {
				human_fallen_empires_trigger_is_xenophile = yes
				not = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
				min = @tier2influencemin
				max = @tier2influencemax
			}
		}
	}
	option = {
		name = human_fallen_empires.350.2
		trigger = {
			owner = {
				human_fallen_empires_trigger_is_xenophile = yes
				human_fallen_empires_trigger_is_authoritarian = yes
				not = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		human_fallen_empires_effect_authoritarian_attraction_low = yes
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
				min = @tier2influencemin
				max = @tier2influencemax
			}
		}
	}
	after = {
		owner = { end_event_chain = "human_fallen_empires_find_sol_chain" }
	}
}



### Ahet section 400 - 401

# ahet colonys after survey

# сolony 1
ship_event = {
	id = human_fallen_empires.400
	title = human_fallen_empires.400.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.400.desc.0
				has_country_flag = human_fallen_empires_ahet_found
			}
			fail_text = {
				text = human_fallen_empires.400.desc.1
				has_country_flag = human_fallen_empires_ahet_found
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_ship_old_jungle
	location = from

    is_triggered_only = yes

	trigger = {
		from = { has_planet_flag = human_fallen_empires_ahet_colony }
		from.owner = { is_country_type = primitive }
	}

	option = {
		name = human_fallen_empires.400.0
		trigger = {
			owner = {
				has_country_flag = human_fallen_empires_ahet_found
			}
		}
	}
	option = {
		name = human_fallen_empires.400.1
		trigger = {
			owner = {
				human_fallen_empires_trigger_is_materialist = no
			}
		}
	}
	option = {
		name = human_fallen_empires.400.2
		trigger = {
			owner = {
				human_fallen_empires_trigger_is_materialist = yes
			}
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
	}
	after = {
		owner = {
			set_country_flag = human_fallen_empires_ahet_found
		}
	}
}

# colony 2
ship_event = {
	id = human_fallen_empires.401
	title = human_fallen_empires.401.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.401.desc.0
				has_country_flag = human_fallen_empires_ahet_found
			}
			fail_text = {
				text = human_fallen_empires.401.desc.1
				has_country_flag = human_fallen_empires_ahet_found
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_ship_old_jungle_2
	location = from

    is_triggered_only = yes

	trigger = {
		from = { has_planet_flag = human_fallen_empires_ahet_colony_2 }
		from.owner = {
			is_country_type = primitive
		}
	}

	option = {
		name = human_fallen_empires.401.0
		trigger = {
			owner = { has_country_flag = human_fallen_empires_ahet_found }
		}
	}
	option = {
		name = human_fallen_empires.401.1
		trigger = {
			owner = {
				human_fallen_empires_trigger_is_xenophile = yes
			}
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
	}
	option = {
		name = human_fallen_empires.401.2
		trigger = {
			owner = {
				human_fallen_empires_trigger_is_xenophobe = yes
			}
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
	}
	option = {
		name = human_fallen_empires.401.3
		trigger = {
			owner = {
				human_fallen_empires_trigger_is_xenophile = no
				human_fallen_empires_trigger_is_xenophobe = no
			}
		}
	}
	after = {
		owner = { set_country_flag = human_fallen_empires_ahet_found }
	}
}

# Ra'ar story (then home of light captured) 500 - 501

# start event
planet_event = {
	id = human_fallen_empires.500
	title = human_fallen_empires.500.name
	desc = human_fallen_empires.500.desc
	picture = GFX_evt_human_fallen_empires_holocube_2
	location = root
    is_triggered_only = yes

	trigger = {
		has_planet_flag = human_fallen_empires_home_of_light
		exists = owner
		owner = {
			is_ai = no
		}
	}

	option = {
		name = human_fallen_empires_at_the_sreen
		owner = {
			country_event = { id = human_fallen_empires.501 }
		}
	}
}

# raar story
country_event = {
	id = human_fallen_empires.501
	title = human_fallen_empires.501.name
	desc = human_fallen_empires.501.desc
	show_sound = event_mystic_reveal
	is_triggered_only = yes
	diplomatic = yes

    picture_event_data = {
		room = human_fallen_empires_raar_room
	}

	option = {
		name = human_fallen_empires.501.0
		response_text = human_fallen_empires.501.0.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.1
		response_text = human_fallen_empires.501.1.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.2
		response_text = human_fallen_empires.501.2.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.3
		response_text = human_fallen_empires.501.3.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.4
		response_text = human_fallen_empires.501.4.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.5
		response_text = human_fallen_empires.501.5.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.6
		response_text = human_fallen_empires.501.6.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.7
		response_text = human_fallen_empires.501.7.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.8
		response_text = human_fallen_empires.501.8.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.9
		response_text = human_fallen_empires.501.9.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.10
		response_text = human_fallen_empires.501.10.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.11
		response_text = human_fallen_empires.501.11.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.12
		response_text = human_fallen_empires.501.12.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.501.13
		custom_tooltip = human_fallen_empires.501.13.tooltip
	}
}


## drone country section 600
# cheat for survey
ship_event = {
	id = human_fallen_empires.600
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_country_type = human_fallen_empires_drone
		}
		exists = from
		exists = fromfrom
	}

	immediate = {
		from = {
			every_neighbor_system = {
				every_neighbor_system = {
					every_system_planet = {
						surveyed = {
							set_surveyed = yes
							surveyor = fromfrom
						}
					}
				}
			}
			every_system_planet = {
				surveyed = {
					set_surveyed = yes
					surveyor = fromfrom
				}
			}
		}
	}
}

# add bonus for outposts
ship_event = {
	id = human_fallen_empires.601
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_country_type = human_fallen_empires_drone
		}
	}

	immediate = {
		log = "drone outpost builded"
		owner = {
			change_variable = {
				which = human_fallen_empires_drone_outpost
				value = 1
			}
			human_fallen_empires_effect_drone_calc_outpost = yes
		}
	}
}

# remove bonus
country_event = {
	id = human_fallen_empires.602
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_drone
		exists = fromfrom
		fromfrom = {
			is_ship_size = outpost_station
		}
	}

	immediate = {
		log = "drone outpost killed"
		change_variable = {
			which = human_fallen_empires_drone_outpost
			value = -1
		}
		human_fallen_empires_effect_drone_calc_outpost = yes
	}
}

# destroy drone planet
country_event = {
	id = human_fallen_empires.603
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_drone
		exists = fromfrom
		fromfrom = {
			is_ship_size = orbital_station
		}
	}

	immediate = {
		random_owned_planet = {
			limit = {
				solar_system = {
					is_same_value = fromfrom.solar_system
				}
			}
			destroy_colony = yes
			change_pc = pc_molten
			log = "drone base killed on [Root.GetStarName]"
		}
	}
}

# contact event
country_event = {
	id = human_fallen_empires.604
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_drone
		exists = from
	}

	immediate = {
		establish_communications = from
		from = {
			if = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.605 }
				set_country_flag = human_fallen_empires.605.step0
			}
		}
	}
}

# diplomatic contact event
country_event = {
	id = human_fallen_empires.605
	title = TRANSMISSION
	desc = {
		trigger = {
			# start
			fail_text = {
				text = human_fallen_empires.605.desc.0
				has_country_flag = human_fallen_empires.605.step3
			}
			success_text = {
				text = human_fallen_empires.605.desc.1
				has_country_flag = human_fallen_empires.605.step3
			}
		}
	}
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		room = no_video_feed_room
	}

	# step 0
	option = {
		name = human_fallen_empires.605.0.0
		trigger = {
			has_country_flag = human_fallen_empires.605.step0
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.605.step0
			set_country_flag = human_fallen_empires.605.step1
			country_event = { id = human_fallen_empires.605 }
		}
	}
	# step 1
	option = {
		name = human_fallen_empires.605.1.0
		trigger = {
			has_country_flag = human_fallen_empires.605.step1
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.605.step1
			set_country_flag = human_fallen_empires.605.step2
			country_event = { id = human_fallen_empires.605 }
		}
	}
	# step 2
	option = {
		name = human_fallen_empires.605.2.0
		trigger = {
			has_country_flag = human_fallen_empires.605.step2
			human_fallen_empires_trigger_is_clever_for_event = yes
		}
		human_fallen_empires_effect_materialist_attraction_high = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.605.step2
			set_country_flag = human_fallen_empires.605.step3
			country_event = { id = human_fallen_empires.605 }
		}
	}
	# step 3
	option = {
		name = human_fallen_empires.605.3.0
		trigger = {
			has_country_flag = human_fallen_empires.605.step3
		}
		is_dialog_only = yes
		response_text = human_fallen_empires.605.3.0.response
	}
	option = {
		name = human_fallen_empires.605.3.1
		trigger = {
			has_country_flag = human_fallen_empires.605.step3
		}
		is_dialog_only = yes
		response_text = human_fallen_empires.605.3.1.response
	}
	option = {
		name = human_fallen_empires.605.3.2
		trigger = {
			has_country_flag = human_fallen_empires.605.step3
		}
		is_dialog_only = yes
		response_text = human_fallen_empires.605.3.2.response
	}
	option = {
		name = human_fallen_empires.605.3.3
		trigger = {
			has_country_flag = human_fallen_empires.605.step3
		}
		is_dialog_only = yes
		response_text = human_fallen_empires.605.3.3.response
	}
	option = {
		name = human_fallen_empires.605.3.4
		trigger = {
			has_country_flag = human_fallen_empires.605.step3
		}
		is_dialog_only = yes
		response_text = human_fallen_empires.605.3.4.response
	}
	option = {
		name = human_fallen_empires_end_transmission
		hidden_effect = {
			remove_country_flag = human_fallen_empires.605.step0
			remove_country_flag = human_fallen_empires.605.step1
			remove_country_flag = human_fallen_empires.605.step2
			remove_country_flag = human_fallen_empires.605.step3
		}
	}
}

# drone bombardment event for on_monthly_orbital_bombardment
planet_event = {
	id = human_fallen_empires.606
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = owner
		exists = from
		from = {
			is_country_type = human_fallen_empires_drone
		}
	}

	immediate = {
		if = {
			limit = {
				num_pops > 0
			}
			random_owned_pop = {
				kill_pop = yes
			}
			else = {
				destroy_colony = yes
			}
		}
	}
}

# functional and life simulation stuff 650 - 675

# spawn pirate birth of piracy
country_event = {
	id = human_fallen_empires.650
	title = pirate.1.name
	picture = GFX_evt_human_fallen_empires_pirate
	show_sound = event_space_battle

	desc = { # Spiritual
		text = pirate.1.desc_01
		trigger = {
			has_spiritualist_government = yes
		}
	}

	desc = { # Militarist
		text = pirate.1.desc_02
		trigger = {
			has_militarist_government = yes
		}
	}

	desc = { # Materialist
		text = pirate.1.desc_03
		trigger = {
			has_materialist_government = yes
		}
	}

	desc = { # Pacifist
		text = pirate.1.desc_04
		trigger = {
			has_pacifist_government = yes
		}
	}

	desc = { # Generic Autocracy
		text = pirate.1.desc_05
		trigger = {
			OR = {
				has_government = gov_despotic_empire
				has_government = gov_constitutional_dictatorship
				has_government = gov_enlightened_monarchy
				has_government = gov_enlightened_dictatorship
			}
		}
	}

	desc = { # Generic Oligarchy
		text = pirate.1.desc_06
		trigger = {
			OR = {
				has_government = gov_megacorporation
				has_government = gov_plutocratic_oligarchy
			}
		}
	}

	desc = { # Generic Democracy
		text = pirate.1.desc_07
		trigger = {
			has_government = gov_representative_democracy
		}
	}

	trigger = {
		is_country_type = default
		not = {
			has_country_flag = human_fallen_empires_birth_of_piracy
		}
	}

	is_triggered_only = yes

	immediate = {
		random_list = {
			1 = { }
			2 = {
				break = yes
			}
		}
		log = "pirate spawned"
		set_country_flag = human_fallen_empires_birth_of_piracy
		set_country_flag = pirate_encountered
		save_event_target_as = human_fallen_empires_pirate_target
		random_system = {
			limit = {
				or = {
					distance = {
						source = root.capital_scope
						min_distance = 5
						max_distance = 50
					}
					any_planet = {
						is_neighbor_of = root
					}
				}
				nor = {
					any_planet = {
						exists = owner
					}
					has_star_flag = hostile_system
				}
				any_planet = {
					is_asteroid = yes
					nor = {
						exists = controller
						exists = owner
					}
				}
			}
			random_system_planet = {
				limit = {
					is_asteroid = yes
					nor = {
						exists = controller
						exists = owner
					}
				}
				human_fallen_empires_effect_create_pirate = yes
				human_fallen_empires_effect_create_pirate_base = yes
			}
		}
		every_country = {
			limit = {
				is_country_type = default
				has_country_flag = pirate_encountered
			}
			every_country = {
				limit = {
					or = {
						is_country_type = pirate
						is_country_type = human_fallen_empires_pirate
					}
				}
				establish_communications_no_message = prev
			}
		}
	}

	option = {
		name = pirate.2.a
		trigger = {
			has_spiritualist_government = yes
		}
	}
	option = {
		name = pirate.2.b
		trigger = {
			has_militarist_government = yes
		}
	}
	option = {
		name = pirate.2.c
		trigger = {
			has_materialist_government = yes
		}
	}
	option = {
		name = pirate.2.d
		trigger = {
			has_pacifist_government = yes
		}
	}
	option = {
		name = pirate.2.e
		trigger = {
			OR = {
				has_government = gov_despotic_empire
				has_government = gov_constitutional_dictatorship
				has_government = gov_enlightened_monarchy
				has_government = gov_enlightened_dictatorship
			}
		}
	}
	option = {
		name = pirate.2.f
		trigger = {
			OR = {
				has_government = gov_megacorporation
				has_government = gov_plutocratic_oligarchy
			}
		}
	}
	option = {
		name = pirate.2.g
		trigger = {
			has_government = gov_representative_democracy
		}
	}
	option = {
		name = INTERESTING
	}
}

# pirate life simulation
country_event = {
	id = human_fallen_empires.651
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_pirate
	}

	immediate = {
		# build new bases
		country_event = { id = human_fallen_empires.652 }
		# send fleet logic for unstuck fleets
		every_owned_fleet = {
			fleet_event = { id = human_fallen_empires.675 }
		}
		# kick buildings
		every_owned_planet = {
			limit = {
				free_building_tiles > 0
			}
			every_tile = {
				limit = {
					exists = pop
					not = {
						has_building = human_fallen_empires_pirate_slave_pit
					}
				}
				add_building_construction = human_fallen_empires_pirate_slave_pit
			}
			every_owned_pop = {
				enslave_pop = yes
			}
		}
		# also cheat for better drives
		if = {
			limit = {
				years_passed > 20
			}
			if = {
				limit = {
					has_technology = tech_warp_drive_1
					not = {
						has_technology = tech_warp_drive_2
					}
				}
				give_technology = { tech = tech_warp_drive_2 }
			}
			if = {
				limit = {
					has_technology = tech_wormhole_generation_1
					not = {
						has_technology = tech_wormhole_generation_2
					}
				}
				give_technology = { tech = tech_wormhole_generation_2 }
			}
			if = {
				limit = {
					has_technology = tech_hyper_drive_1
					not = {
						has_technology = tech_wormhole_generation_3
					}
				}
				give_technology = { tech = tech_hyper_drive_2 }
			}
		}
		if = {
			limit = {
				years_passed > 40
			}
			if = {
				limit = {
					has_technology = tech_warp_drive_2
					not = {
						has_technology = tech_warp_drive_3
					}
				}
				give_technology = { tech = tech_warp_drive_3 }
			}
			if = {
				limit = {
					has_technology = tech_wormhole_generation_2
					not = {
						has_technology = tech_wormhole_generation_3
					}
				}
				give_technology = { tech = tech_wormhole_generation_3 }
			}
			if = {
				limit = {
					has_technology = tech_hyper_drive_2
					not = {
						has_technology = tech_hyper_drive_3
					}
				}
				give_technology = { tech = tech_hyper_drive_3 }
			}
		}
	}
}

# pirate build base
country_event = {
	id = human_fallen_empires.652
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		energy > @human_fallen_empires_pirate_base_cost
	}

	immediate = {
		save_event_target_as = pirate_band
		every_owned_planet = {
			random_system = {
				limit = {
					distance = {
						source = prev
						min_distance = 5
						max_distance = 50
					}
					nor = {
						any_planet = {
							exists = owner
						}
						any_ship_in_system = {
							is_ship_class = shipclass_military_station
						}
						has_star_flag = hostile_system
					}
					any_planet = {
						is_asteroid = yes
						nor = {
							exists = controller
							exists = owner
						}
					}
					root = {
						energy > @human_fallen_empires_pirate_base_cost
					}
				}
				random_system_planet = {
					limit = {
						is_asteroid = yes
						nor = {
							exists = controller
							exists = owner
						}
					}
					human_fallen_empires_effect_create_pirate_base = yes
					root = {
						add_energy = @human_fallen_empires_pirate_base_cost_minus
					}
				}
			}
		}
	}
}

# pirate fleet logic set by ship build on action
ship_event = {
	id = human_fallen_empires.653
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_country_type = human_fallen_empires_pirate
		}
		is_ship_class = shipclass_military
	}

	immediate = {
		fleet = {
			fleet_event = { id = human_fallen_empires.675 }
		}
	}
}

# kill pirate base
country_event = {
	id = human_fallen_empires.654
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = from
		from = {
			is_country_type = human_fallen_empires_pirate
		}
		exists = fromfromfrom
		fromfromfrom = {
			is_ship_size = orbital_station
		}
	}

	immediate = {
		from = {
			if = {
				limit = {
					num_owned_planets = 1
				}
				if = {
					limit = {
						any_country = {
							is_country_type = human_fallen_empires_pirate
							not = {
								is_country = root
							}
						}
					}
					random_country = {
						limit = {
							is_country_type = human_fallen_empires_pirate
							not = {
								is_country = root
							}
						}
						save_event_target_as = human_fallen_empires_pirate_new_owner
					}
					every_owned_fleet = {
						set_owner = event_target:human_fallen_empires_pirate_new_owner
					}
				}
				random_owned_planet = {
					change_pc = pc_asteroid
				}
				# destroy contry later for fix errors in log
				country_event = { id = human_fallen_empires.9 days = 2 }
				#	destroy_country = yes
				remove_modifier = human_fallen_empires_pirate_base
				break = yes
			}
			random_owned_planet = {
				limit = {
					solar_system = {
						is_same_value = fromfromfrom.solar_system
					}
				}
				destroy_colony = yes
				change_pc = pc_asteroid
				remove_modifier = human_fallen_empires_pirate_base
			}
		}
	}
}

# spawn pirate during game
country_event = {
	id = human_fallen_empires.655
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = default
		not = {
			has_country_flag = human_fallen_empires_pirate_spawned
		}
	}

	immediate = {
		log = "pirate spawned again"
		set_timed_country_flag = { flag = human_fallen_empires_pirate_spawned days = 1500 }
		save_event_target_as = human_fallen_empires_pirate_target
		random_system = {
			limit = {
				nor = {
					any_planet = {
						exists = owner
					}
					has_star_flag = hostile_system
				}
				any_planet = {
					is_asteroid = yes
					not = {
						exists = controller
					}
				}
			}
			random_system_planet = {
				limit = {
					is_asteroid = yes
					nor = {
						exists = controller
						exists = owner
					}
				}
				human_fallen_empires_effect_create_pirate = yes
				human_fallen_empires_effect_create_pirate_base = yes
			}
		}
		every_country = {
			limit = {
				is_country_type = default
				has_country_flag = pirate_encountered
			}
			every_country = {
				limit = {
					or = {
						is_country_type = pirate
						is_country_type = human_fallen_empires_pirate
					}
				}
				establish_communications_no_message = prev
			}
		}
	}
}

# functional fleet stuff 675 - 700

# pirate fleet logic
fleet_event = {
	id = human_fallen_empires.675
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_country_type = human_fallen_empires_pirate
		}
		num_ships > 4
		has_hp_percentage > 0.99
		is_fleet_idle = yes
		any_system = {
			any_planet = {
				or = {
					and = {
						has_orbital_station = yes
						exists = controller
						controller = {
							is_country_type = default
							is_hostile = root.owner
						}
					}
					and = {
						exists = owner
						owner = {
							or = {
								is_country_type = default
								is_country_type = primitive
							}
							is_hostile = root.owner
						}
					}
				}
			}
			not = {
				any_ship_in_system = {
					or = {
						is_ship_size = orbital_station
						is_ship_class = shipclass_military
						is_ship_class = shipclass_military_station
					}
					exists = owner
					owner = {
						is_hostile = root.owner
					}
					root = {
						fleet_power < @pirate_fleet_power_minimum
					}
				}
			}
		}
	}

	immediate = {
		#log = "pirate fleet logic"
		clear_fleet_actions = this
		queue_actions = {
			repeat = {
				# try found prior target
				find_closest_system = {
					trigger = {
						id = human_fallen_empires.675.trigger.0
						root = {
							has_hp_percentage > 0.99
						}
						any_country = {
							has_opinion_modifier = {
								who = root.owner
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
						any_planet = {
							or = {
								and = {
									has_orbital_station = yes
									exists = controller
									controller = {
										is_country_type = default
										is_hostile = root.owner
										has_opinion_modifier = {
											who = root.owner
											modifier = human_fallen_empires_opinion_pirate_prior_target
										}
									}
								}
								and = {
									human_fallen_empires_primitive_planet = no
									root.owner = {
										any_owned_planet = {
											free_pop_tiles > 0
										}
									}
									exists = owner
									owner = {
										or = {
											is_country_type = default
											is_country_type = primitive
										}
										is_hostile = root.owner
										has_opinion_modifier = {
											who = root.owner
											modifier = human_fallen_empires_opinion_pirate_prior_target
										}
									}
								}
							}
						}
						not = {
							any_ship_in_system = {
								or = {
									is_ship_size = orbital_station
									is_ship_class = shipclass_military
									is_ship_class = shipclass_military_station
								}
								exists = owner
								owner = {
									is_hostile = root.owner
								}
								root = {
									fleet_power < 4000
								}
							}
						}
					}
					found_system = {
						effect = {
							id = human_fallen_empires.675.effect.0.0
							root = {
								if = {
									limit = {
										or = {
											num_ships < 5
											has_hp_percentage < 0.99
										}
									}
									clear_fleet_actions = this
									log = "pirate fleet stop operation due low hp"
								}
							}
						}
						move_to = this
					}
					failed = {
						# then try found other target
						find_closest_system = {
							trigger = {
								id = human_fallen_empires.675.trigger.1
								root = {
									has_hp_percentage > 0.99
								}
								any_planet = {
									or = {
										and = {
											has_orbital_station = yes
											exists = controller
											controller = {
												is_country_type = default
												is_hostile = root.owner
												not = {
													has_opinion_modifier = {
														who = root.owner
														modifier = human_fallen_empires_opinion_pirate_pay_for_protect
													}
												}
											}
										}
										and = {
											exists = owner
											human_fallen_empires_primitive_planet = no
											root.owner = {
												any_owned_planet = {
													free_pop_tiles > 0
												}
											}
											owner = {
												or = {
													is_country_type = default
													is_country_type = primitive
												}
												is_hostile = root.owner
												not = {
													has_opinion_modifier = {
														who = root.owner
														modifier = human_fallen_empires_opinion_pirate_pay_for_protect
													}
												}
											}
										}
									}
								}
								not = {
									any_ship_in_system = {
										or = {
											is_ship_size = orbital_station
											is_ship_class = shipclass_military
											is_ship_class = shipclass_military_station
										}
										exists = owner
										owner = {
											is_hostile = root.owner
										}
										root = {
											fleet_power < @pirate_fleet_power_minimum
										}
									}
								}
							}
							found_system = {
								effect = {
									id = human_fallen_empires.675.effect.0.1
									root = {
										if = {
											limit = {
												or = {
													num_ships < 5
													has_hp_percentage < 0.99
												}
											}
											clear_fleet_actions = this
											log = "pirate fleet stop operation due low hp"
										}
									}
								}
								move_to = this
							}
							failed = {
								# then try found planet if havent other targets
								find_closest_system = {
									trigger = {
										id = human_fallen_empires.675.trigger.0.2
										root = {
											has_hp_percentage > 0.99
										}
										any_planet = {
											exists = owner
											human_fallen_empires_primitive_planet = no
											owner = {
												or = {
													is_country_type = default
													is_country_type = primitive
												}
												is_hostile = root.owner
												not = {
													has_opinion_modifier = {
														who = root.owner
														modifier = human_fallen_empires_opinion_pirate_pay_for_protect
													}
												}
											}
										}
										not = {
											any_ship_in_system = {
												or = {
													is_ship_size = orbital_station
													is_ship_class = shipclass_military
													is_ship_class = shipclass_military_station
												}
												exists = owner
												owner = {
													is_hostile = root.owner
												}
												root = {
													fleet_power < @pirate_fleet_power_minimum
												}
											}
										}
									}
									found_system = {
										effect = {
											id = human_fallen_empires.675.effect.0.2
											root = {
												if = {
													limit = {
														or = {
															num_ships < 5
															has_hp_percentage < 0.99
														}
													}
													clear_fleet_actions = this
													log = "pirate fleet stop operation due low hp"
												}
											}
										}
										move_to = this
									}
									# then wait
									failed = {
										wait = 200
										effect = {
											id = human_fallen_empires.675.effect.0.3
											root = {
												clear_fleet_actions = this
												fleet_event = { id = human_fallen_empires.675 } # days = 200 }
												log = "pirate fleet stop operation due no targets"
											}
										}
									}
								}
							}
						}
					}
				}
				repeat = {
					max_iterations = 5
					find_closest_planet = {
						trigger = {
							id = human_fallen_empires.675.trigger.2
							human_fallen_empires_primitive_planet = no
							root = {
								has_hp_percentage > 0.99
							}
							or = {
								has_orbital_station = yes
								exists = owner
							}
						}
						found_planet = {
							orbit_planet = this
							wait = 31
						}
					}
				}
				find_random_system = {
					trigger = {
						id = human_fallen_empires.675.trigger.3
						any_planet = {
							exists = owner
							owner = {
								is_country = root.owner
							}
						}
					}
					found_system = {
						move_to = this
					}
				}
				find_closest_planet = {
					trigger = {
						id = human_fallen_empires.675.trigger.4
						exists = owner
						owner = {
							is_country = root.owner
						}
					}
					found_planet = {
						orbit_planet = this
						wait = {
							duration = 200
							random = 150
						}
					}
				}
			}
		}
	}
}

# cleet fleet actions after emercy ftl
fleet_event = {
	id = human_fallen_empires.676
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_country_type = human_fallen_empires_pirate
		}
	}

	immediate = {
		#	log = "pirate fleet emercy ftl"
		clear_fleet_actions = this
	}
}

# pirate gain resurces after kill station
country_event = {
	id = human_fallen_empires.677
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		is_country_type = human_fallen_empires_pirate
		exists = fromfromfrom
		fromfromfrom = {
			or = {
				is_ship_size = wormhole_station
				is_ship_size = research_station
				is_ship_size = mining_station
				is_ship_size = observation_station
				is_ship_size = outpost_station
			}
		}
	}

	immediate = {
		from = {
			set_timed_country_flag = {
				flag = human_fallen_empires_attacked_by_pirate
				days = 365
			}
		}
		add_minerals = 90
		add_energy = 10
		add_physics_research = 5
		add_society_research = 5
		add_engineering_research = 5
		log = "pirate kill station"
	}
}

# pirate bombard colony
planet_event = {
	id = human_fallen_empires.678
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		num_pops > 0
		exists = owner
		exists = from
		from = {
			is_country_type = human_fallen_empires_pirate
		}
	}

	immediate = {
		log = "pirate bombarding on [Root.GetStarName]"
		owner = {
			set_timed_country_flag = {
				flag = human_fallen_empires_pirate_attacked
				days = 365
			}
		}
		from = {
			add_minerals = 50
			add_energy = 10
			add_physics_research = 5
			add_society_research = 5
			add_engineering_research = 5
			if = {
				limit = {
					any_owned_planet = {
						free_pop_tiles > 0
					}
				}
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					save_event_target_as = human_fallen_empires_pirate_planet
				}
				root = {
					random_owned_pop = {
						limit = {
							is_growing = no
							is_sentient = yes
						}
						resettle_pop = {
							pop = this
							planet = event_target:human_fallen_empires_pirate_planet
						}
					}
				}
			}
		}
		random_tile = {
			limit = {
				has_building = yes
			}
			set_ruined = yes
		}
	}
}

# clear action on comand for ai for on_ship_ordered
ship_event = {
	id = human_fallen_empires.679
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = owner
		owner = {
			is_country_type = human_fallen_empires_pirate
		}
		is_ship_class = shipclass_military
		fleet = {
			not = {
				has_fleet_flag = human_fallen_empires_clear_action_on_order
			}
		}
	}

	immediate = {
		log = "clear ship order by ai comand owner [Owner.GetName] location [This.GetStarName]"
		fleet = {
			set_timed_fleet_flag = { flag = human_fallen_empires_clear_action_on_order days = 365 }
			clear_fleet_actions = this
		}
	}
}

# pirate diplomacy 700-750

# start event diplomacy
country_event = {
	id = human_fallen_empires.700
	hide_window = yes
    is_triggered_only = yes

	trigger = {
		exists = from
		from = {
			is_country_type = human_fallen_empires_pirate
		}
	}

	immediate = {
		from = {
			save_event_target_as = human_fallen_empires_pirate_country
		}
		country_event = { id = human_fallen_empires.701 }
	}
}

# pirate diplomacy main menu
country_event = {
	id = human_fallen_empires.701
	title = TRANSMISSION
	desc = {
		trigger = {
			# start
			success_text = {
				text = human_fallen_empires.701.desc.0
				human_fallen_empires_trigger_pirate_diplomacy_any_menu = no
			}
			# raid
			success_text = {
				text = human_fallen_empires.701.raid_menu.desc.0
				has_country_flag = human_fallen_empires.701.raid_menu
				human_fallen_empires_trigger_exists_any_event_target = yes
			}
			success_text = {
				text = human_fallen_empires.701.raid_menu.desc.1
				has_country_flag = human_fallen_empires.701.raid_menu
				human_fallen_empires_trigger_exists_any_event_target = no
			}
			# traid
			success_text = {
				text = human_fallen_empires.701.traid_menu.desc.0
				has_country_flag = human_fallen_empires.701.traid_menu
			}
			# slave
			success_text = {
				text = human_fallen_empires.701.slave_menu.desc.0
				has_country_flag = human_fallen_empires.701.slave_menu
				human_fallen_empires_trigger_exists_any_slave_target = no
			}
			success_text = {
				text = human_fallen_empires.701.slave_menu.desc.1
				has_country_flag = human_fallen_empires.701.slave_menu
				human_fallen_empires_trigger_exists_any_slave_target = yes
			}
		}
	}
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_pirate_country
		room = human_fallen_empires_pirate_room
	}

	# pay for protect
	option = {
		name = human_fallen_empires.701.0
		trigger = {
			human_fallen_empires_trigger_pirate_diplomacy_any_menu = no
		}
		allow = {
			custom_tooltip_fail = {
				text = human_fallen_empires.701.0.tooltip_fail
				not = {
					has_opinion_modifier = {
						who = event_target:human_fallen_empires_pirate_country
						modifier = human_fallen_empires_opinion_pirate_pay_for_protect
					}
				}
			}
			energy > 500
			minerals > 500
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.0.response

		add_energy = -500
		add_minerals = -500
		event_target:human_fallen_empires_pirate_country = {
			add_energy = 500
			add_minerals = 500
		}
		hidden_effect = {
			add_opinion_modifier = {
				who = event_target:human_fallen_empires_pirate_country
				modifier = human_fallen_empires_opinion_pirate_pay_for_protect
			}
			event_target:human_fallen_empires_pirate_country = {
				add_opinion_modifier = {
					who = root
					modifier = human_fallen_empires_opinion_pirate_pay_for_protect
				}
				every_owned_fleet = {
					clear_fleet_actions = this
					fleet_event = { id = human_fallen_empires.675 }
				}
			}
		}
	}
	# pay for prior target
	option = {
		name = human_fallen_empires.701.1
		trigger = {
			human_fallen_empires_trigger_pirate_diplomacy_any_menu = no
		}
		hidden_effect = {
			#	human_fallen_empires_effect_clear_event_target = yes
			every_country = {
				limit = {
					is_country_type = default
					has_communications = root
					is_at_war_with = root
					nor = {
						is_country = root
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_prior_target
						}
					}
				}
				human_fallen_empires_effect_save_event_target = yes
			}
			if = {
				limit = {
					human_fallen_empires_trigger_exists_all_event_targets = no
				}
				every_country = {
					limit = {
						is_country_type = default
						has_communications = root
						is_rival = root
						nor = {
							is_country = root
							has_opinion_modifier = {
								who = event_target:human_fallen_empires_pirate_country
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
					}
					human_fallen_empires_effect_save_event_target = yes
				}
			}
			if = {
				limit = {
					human_fallen_empires_trigger_exists_all_event_targets = no
				}
				every_country = {
					limit = {
						is_country_type = default
						has_communications = root
						is_domineering_to = root
						nor = {
							is_country = root
							has_opinion_modifier = {
								who = event_target:human_fallen_empires_pirate_country
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
					}
					human_fallen_empires_effect_save_event_target = yes
				}
			}
			if = {
				limit = {
					human_fallen_empires_trigger_exists_all_event_targets = no
				}
				every_country = {
					limit = {
						is_country_type = default
						has_communications = root
						is_hostile_to = root
						nor = {
							is_country = root
							has_opinion_modifier = {
								who = event_target:human_fallen_empires_pirate_country
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
					}
					human_fallen_empires_effect_save_event_target = yes
				}
			}
			if = {
				limit = {
					human_fallen_empires_trigger_exists_all_event_targets = no
				}
				every_country = {
					limit = {
						is_country_type = default
						has_communications = root
						is_dismissive_to = root
						nor = {
							is_country = root
							has_opinion_modifier = {
								who = event_target:human_fallen_empires_pirate_country
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
					}
					human_fallen_empires_effect_save_event_target = yes
				}
			}
			if = {
				limit = {
					human_fallen_empires_trigger_exists_all_event_targets = no
				}
				every_country = {
					limit = {
						is_country_type = default
						has_communications = root
						is_unfriendly_to = root
						nor = {
							is_country = root
							has_opinion_modifier = {
								who = event_target:human_fallen_empires_pirate_country
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
					}
					human_fallen_empires_effect_save_event_target = yes
				}
			}
			if = {
				limit = {
					human_fallen_empires_trigger_exists_all_event_targets = no
				}
				every_country = {
					limit = {
						is_country_type = default
						has_communications = root
						is_threatened_to = root
						nor = {
							is_country = root
							has_opinion_modifier = {
								who = event_target:human_fallen_empires_pirate_country
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
					}
					human_fallen_empires_effect_save_event_target = yes
				}
			}
			if = {
				limit = {
					human_fallen_empires_trigger_exists_all_event_targets = no
				}
				every_country = {
					limit = {
						is_country_type = default
						has_communications = root
						nor = {
							is_country = root
							has_opinion_modifier = {
								who = event_target:human_fallen_empires_pirate_country
								modifier = human_fallen_empires_opinion_pirate_prior_target
							}
						}
					}
					human_fallen_empires_effect_save_event_target = yes
				}
			}
			human_fallen_empires_effect_pirate_diplomacy_remove_flags = yes
			set_country_flag = human_fallen_empires.701.raid_menu
			country_event = { id = human_fallen_empires.701 }
		}
	}
	# select target menu
	option = {
		name = human_fallen_empires.701.raid_menu.0
		trigger = {
			has_country_flag = human_fallen_empires.701.raid_menu
			exists = event_target:human_fallen_empires_event_target_0
		}
		allow = {
			energy > 500
			minerals > 500
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_pay_for_protect
				not = {
					event_target:human_fallen_empires_event_target_0 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_pay_for_protect
						}
					}
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_prior_target
				not = {
					event_target:human_fallen_empires_event_target_0 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_prior_target
						}
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.raid_menu.0.response

		add_energy = -500
		add_minerals = -500
		event_target:human_fallen_empires_pirate_country = {
			add_energy = 500
			add_minerals = 500
		}
		hidden_effect = {
			event_target:human_fallen_empires_event_target_0 = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_pirate_country
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
			event_target:human_fallen_empires_pirate_country = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_event_target_0
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
				every_owned_fleet = {
					clear_fleet_actions = this
					fleet_event = { id = human_fallen_empires.675 }
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.raid_menu.1
		trigger = {
			has_country_flag = human_fallen_empires.701.raid_menu
			exists = event_target:human_fallen_empires_event_target_1
		}
		allow = {
			energy > 500
			minerals > 500
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_pay_for_protect
				not = {
					event_target:human_fallen_empires_event_target_1 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_pay_for_protect
						}
					}
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_prior_target
				not = {
					event_target:human_fallen_empires_event_target_1 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_prior_target
						}
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.raid_menu.1.response

		add_energy = -500
		add_minerals = -500
		event_target:human_fallen_empires_pirate_country = {
			add_energy = 500
			add_minerals = 500
		}
		hidden_effect = {
			event_target:human_fallen_empires_event_target_1 = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_pirate_country
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
			event_target:human_fallen_empires_pirate_country = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_event_target_1
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
				every_owned_fleet = {
					clear_fleet_actions = this
					fleet_event = { id = human_fallen_empires.675 }
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.raid_menu.2
		trigger = {
			has_country_flag = human_fallen_empires.701.raid_menu
			exists = event_target:human_fallen_empires_event_target_2
		}
		allow = {
			energy > 500
			minerals > 500
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_pay_for_protect
				not = {
					event_target:human_fallen_empires_event_target_2 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_pay_for_protect
						}
					}
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_prior_target
				not = {
					event_target:human_fallen_empires_event_target_2 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_prior_target
						}
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.raid_menu.2.response

		add_energy = -500
		add_minerals = -500
		event_target:human_fallen_empires_pirate_country = {
			add_energy = 500
			add_minerals = 500
		}
		hidden_effect = {
			event_target:human_fallen_empires_event_target_2 = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_pirate_country
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
			event_target:human_fallen_empires_pirate_country = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_event_target_2
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
				every_owned_fleet = {
					clear_fleet_actions = this
					fleet_event = { id = human_fallen_empires.675 }
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.raid_menu.3
		trigger = {
			has_country_flag = human_fallen_empires.701.raid_menu
			exists = event_target:human_fallen_empires_event_target_3
		}
		allow = {
			energy > 500
			minerals > 500
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_pay_for_protect
				not = {
					event_target:human_fallen_empires_event_target_3 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_pay_for_protect
						}
					}
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_prior_target
				not = {
					event_target:human_fallen_empires_event_target_3 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_prior_target
						}
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.raid_menu.3.response

		add_energy = -500
		add_minerals = -500
		event_target:human_fallen_empires_pirate_country = {
			add_energy = 500
			add_minerals = 500
		}
		hidden_effect = {
			event_target:human_fallen_empires_event_target_3 = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_pirate_country
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
			event_target:human_fallen_empires_pirate_country = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_event_target_3
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
				every_owned_fleet = {
					clear_fleet_actions = this
					fleet_event = { id = human_fallen_empires.675 }
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.raid_menu.4
		trigger = {
			has_country_flag = human_fallen_empires.701.raid_menu
			exists = event_target:human_fallen_empires_event_target_4
		}
		allow = {
			energy > 500
			minerals > 500
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_pay_for_protect
				not = {
					event_target:human_fallen_empires_event_target_4 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_pay_for_protect
						}
					}
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_prior_target
				not = {
					event_target:human_fallen_empires_event_target_4 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_prior_target
						}
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.raid_menu.4.response

		add_energy = -500
		add_minerals = -500
		event_target:human_fallen_empires_pirate_country = {
			add_energy = 500
			add_minerals = 500
		}
		hidden_effect = {
			event_target:human_fallen_empires_event_target_4 = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_pirate_country
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
			event_target:human_fallen_empires_pirate_country = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_event_target_4
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
				every_owned_fleet = {
					clear_fleet_actions = this
					fleet_event = { id = human_fallen_empires.675 }
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.raid_menu.5
		trigger = {
			has_country_flag = human_fallen_empires.701.raid_menu
			exists = event_target:human_fallen_empires_event_target_5
		}
		allow = {
			energy > 500
			minerals > 500
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_pay_for_protect
				not = {
					event_target:human_fallen_empires_event_target_5 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_pay_for_protect
						}
					}
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.raid_menu.fail_prior_target
				not = {
					event_target:human_fallen_empires_event_target_5 = {
						has_opinion_modifier = {
							who = event_target:human_fallen_empires_pirate_country
							modifier = human_fallen_empires_opinion_pirate_prior_target
						}
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.raid_menu.5.response

		add_energy = -500
		add_minerals = -500
		event_target:human_fallen_empires_pirate_country = {
			add_energy = 500
			add_minerals = 500
		}
		hidden_effect = {
			event_target:human_fallen_empires_event_target_5 = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_pirate_country
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
			}
			event_target:human_fallen_empires_pirate_country = {
				add_opinion_modifier = {
					who = event_target:human_fallen_empires_event_target_5
					modifier = human_fallen_empires_opinion_pirate_prior_target
				}
				every_owned_fleet = {
					clear_fleet_actions = this
					fleet_event = { id = human_fallen_empires.675 }
				}
			}
		}
	}
	# traid menu
	option = {
		name = human_fallen_empires.701.2
		trigger = {
			human_fallen_empires_trigger_pirate_diplomacy_any_menu = no
		}
		hidden_effect = {
			human_fallen_empires_effect_pirate_diplomacy_remove_flags = yes
			set_country_flag = human_fallen_empires.701.traid_menu
			country_event = { id = human_fallen_empires.701 }
		}
	}
	# energy for minerals
	option = {
		name = human_fallen_empires.701.traid_menu.0
		trigger = {
			has_country_flag = human_fallen_empires.701.traid_menu
		}
		allow = {
			minerals > 150
			custom_tooltip_fail = {
				text = human_fallen_empires.701.traid_menu.fail
				event_target:human_fallen_empires_pirate_country = {
					energy > 100
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.traid_menu.0.response

		add_energy = 100
		add_minerals = -150
		event_target:human_fallen_empires_pirate_country = {
			add_energy = -100
			add_minerals = 150
		}
	}
	# buy slave
	option = {
		name = human_fallen_empires.701.traid_menu.1
		trigger = {
			has_country_flag = human_fallen_empires.701.traid_menu
		}
		hidden_effect = {
			human_fallen_empires_effect_pirate_diplomacy_remove_flags = yes
			set_country_flag = human_fallen_empires.701.slave_menu
			event_target:human_fallen_empires_pirate_country = {
				human_fallen_empires_effect_save_slave_target = yes
			}
			country_event = { id = human_fallen_empires.701 }
		}
	}
	option = {
		name = human_fallen_empires.701.slave_menu.0
		trigger = {
			has_country_flag = human_fallen_empires.701.slave_menu
			event_target:human_fallen_empires_pirate_country = {
				human_fallen_empires_trigger_is_egalitarian = yes
			}
		}
		human_fallen_empires_effect_egalitarian_attraction_low = yes
		is_dialog_only = yes
		response_text = human_fallen_empires.701.slave_menu.0.response
	}
	# select slave menu
	option = {
		name = human_fallen_empires.701.slave_menu.1
		trigger = {
			has_country_flag = human_fallen_empires.701.slave_menu
			exists = event_target:human_fallen_empires_slave_target_0
		}
		allow = {
			energy > @human_fallen_empires_pirate_slave_cost
			minerals > @human_fallen_empires_pirate_slave_cost
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_space
				any_owned_planet = {
					free_pop_tiles > 0
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_slave
				event_target:human_fallen_empires_pirate_country = {
					any_owned_pop = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_0
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.slave_menu.1.response

		add_energy = @human_fallen_empires_pirate_slave_cost_minus
		add_minerals = @human_fallen_empires_pirate_slave_cost_minus
		event_target:human_fallen_empires_pirate_country = {
			add_energy = @human_fallen_empires_pirate_slave_cost
			add_minerals = @human_fallen_empires_pirate_slave_cost
		}
		hidden_effect = {
			event_target:human_fallen_empires_pirate_country = {
				random_owned_pop = {
					limit = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_0
					}
					save_event_target_as = human_fallen_empires_pirate_slave
				}
			}
		}
		if = {
			limit = {
				any_owned_planet = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_0
						value > 0.4
					}
					free_pop_tiles > 0
				}
			}
			random_owned_planet = {
				limit = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_0
						value > 0.4
					}
					free_pop_tiles > 0
				}
				resettle_pop = {
					pop = event_target:human_fallen_empires_pirate_slave
					planet = this
				}
			}
			else = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					resettle_pop = {
						pop = event_target:human_fallen_empires_pirate_slave
						planet = this
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.slave_menu.2
		trigger = {
			has_country_flag = human_fallen_empires.701.slave_menu
			exists = event_target:human_fallen_empires_slave_target_1
		}
		allow = {
			energy > @human_fallen_empires_pirate_slave_cost
			minerals > @human_fallen_empires_pirate_slave_cost
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_space
				any_owned_planet = {
					free_pop_tiles > 0
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_slave
				event_target:human_fallen_empires_pirate_country = {
					any_owned_pop = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_1
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.slave_menu.2.response

		add_energy = @human_fallen_empires_pirate_slave_cost_minus
		add_minerals = @human_fallen_empires_pirate_slave_cost_minus
		event_target:human_fallen_empires_pirate_country = {
			add_energy = @human_fallen_empires_pirate_slave_cost
			add_minerals = @human_fallen_empires_pirate_slave_cost
		}
		hidden_effect = {
			event_target:human_fallen_empires_pirate_country = {
				random_owned_pop = {
					limit = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_1
					}
					save_event_target_as = human_fallen_empires_pirate_slave
				}
			}
		}
		if = {
			limit = {
				any_owned_planet = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_1
						value > 0.4
					}
					free_pop_tiles > 0
				}
			}
			random_owned_planet = {
				limit = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_1
						value > 0.4
					}
					free_pop_tiles > 0
				}
				resettle_pop = {
					pop = event_target:human_fallen_empires_pirate_slave
					planet = this
				}
			}
			else = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					resettle_pop = {
						pop = event_target:human_fallen_empires_pirate_slave
						planet = this
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.slave_menu.3
		trigger = {
			has_country_flag = human_fallen_empires.701.slave_menu
			exists = event_target:human_fallen_empires_slave_target_2
		}
		allow = {
			energy > @human_fallen_empires_pirate_slave_cost
			minerals > @human_fallen_empires_pirate_slave_cost
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_space
				any_owned_planet = {
					free_pop_tiles > 0
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_slave
				event_target:human_fallen_empires_pirate_country = {
					any_owned_pop = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_2
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.slave_menu.3.response

		add_energy = @human_fallen_empires_pirate_slave_cost_minus
		add_minerals = @human_fallen_empires_pirate_slave_cost_minus
		event_target:human_fallen_empires_pirate_country = {
			add_energy = @human_fallen_empires_pirate_slave_cost
			add_minerals = @human_fallen_empires_pirate_slave_cost
		}
		hidden_effect = {
			event_target:human_fallen_empires_pirate_country = {
				random_owned_pop = {
					limit = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_2
					}
					save_event_target_as = human_fallen_empires_pirate_slave
				}
			}
		}
		if = {
			limit = {
				any_owned_planet = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_2
						value > 0.4
					}
					free_pop_tiles > 0
				}
			}
			random_owned_planet = {
				limit = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_2
						value > 0.4
					}
					free_pop_tiles > 0
				}
				resettle_pop = {
					pop = event_target:human_fallen_empires_pirate_slave
					planet = this
				}
			}
			else = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					resettle_pop = {
						pop = event_target:human_fallen_empires_pirate_slave
						planet = this
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.slave_menu.4
		trigger = {
			has_country_flag = human_fallen_empires.701.slave_menu
			exists = event_target:human_fallen_empires_slave_target_3
		}
		allow = {
			energy > @human_fallen_empires_pirate_slave_cost
			minerals > @human_fallen_empires_pirate_slave_cost
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_space
				any_owned_planet = {
					free_pop_tiles > 0
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_slave
				event_target:human_fallen_empires_pirate_country = {
					any_owned_pop = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_3
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.slave_menu.4.response

		add_energy = @human_fallen_empires_pirate_slave_cost_minus
		add_minerals = @human_fallen_empires_pirate_slave_cost_minus
		event_target:human_fallen_empires_pirate_country = {
			add_energy = @human_fallen_empires_pirate_slave_cost
			add_minerals = @human_fallen_empires_pirate_slave_cost
		}
		hidden_effect = {
			event_target:human_fallen_empires_pirate_country = {
				random_owned_pop = {
					limit = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_3
					}
					save_event_target_as = human_fallen_empires_pirate_slave
				}
			}
		}
		if = {
			limit = {
				any_owned_planet = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_3
						value > 0.4
					}
					free_pop_tiles > 0
				}
			}
			random_owned_planet = {
				limit = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_3
						value > 0.4
					}
					free_pop_tiles > 0
				}
				resettle_pop = {
					pop = event_target:human_fallen_empires_pirate_slave
					planet = this
				}
			}
			else = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					resettle_pop = {
						pop = event_target:human_fallen_empires_pirate_slave
						planet = this
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.slave_menu.5
		trigger = {
			has_country_flag = human_fallen_empires.701.slave_menu
			exists = event_target:human_fallen_empires_slave_target_4
		}
		allow = {
			energy > @human_fallen_empires_pirate_slave_cost
			minerals > @human_fallen_empires_pirate_slave_cost
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_space
				any_owned_planet = {
					free_pop_tiles > 0
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_slave
				event_target:human_fallen_empires_pirate_country = {
					any_owned_pop = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_4
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.slave_menu.5.response

		add_energy = @human_fallen_empires_pirate_slave_cost_minus
		add_minerals = @human_fallen_empires_pirate_slave_cost_minus
		event_target:human_fallen_empires_pirate_country = {
			add_energy = @human_fallen_empires_pirate_slave_cost
			add_minerals = @human_fallen_empires_pirate_slave_cost
		}
		hidden_effect = {
			event_target:human_fallen_empires_pirate_country = {
				random_owned_pop = {
					limit = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_4
					}
					save_event_target_as = human_fallen_empires_pirate_slave
				}
			}
		}
		if = {
			limit = {
				any_owned_planet = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_4
						value > 0.4
					}
					free_pop_tiles > 0
				}
			}
			random_owned_planet = {
				limit = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_4
						value > 0.4
					}
					free_pop_tiles > 0
				}
				resettle_pop = {
					pop = event_target:human_fallen_empires_pirate_slave
					planet = this
				}
			}
			else = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					resettle_pop = {
						pop = event_target:human_fallen_empires_pirate_slave
						planet = this
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.701.slave_menu.6
		trigger = {
			has_country_flag = human_fallen_empires.701.slave_menu
			exists = event_target:human_fallen_empires_slave_target_5
		}
		allow = {
			energy > @human_fallen_empires_pirate_slave_cost
			minerals > @human_fallen_empires_pirate_slave_cost
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_space
				any_owned_planet = {
					free_pop_tiles > 0
				}
			}
			custom_tooltip_fail = {
				text = human_fallen_empires.701.slave_menu.fail_havent_slave
				event_target:human_fallen_empires_pirate_country = {
					any_owned_pop = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_5
					}
				}
			}
		}

		is_dialog_only = yes
		response_text = human_fallen_empires.701.slave_menu.6.response

		add_energy = @human_fallen_empires_pirate_slave_cost_minus
		add_minerals = @human_fallen_empires_pirate_slave_cost_minus
		event_target:human_fallen_empires_pirate_country = {
			add_energy = @human_fallen_empires_pirate_slave_cost
			add_minerals = @human_fallen_empires_pirate_slave_cost
		}
		hidden_effect = {
			event_target:human_fallen_empires_pirate_country = {
				random_owned_pop = {
					limit = {
						is_exact_same_species = event_target:human_fallen_empires_slave_target_5
					}
					save_event_target_as = human_fallen_empires_pirate_slave
				}
			}
		}
		if = {
			limit = {
				any_owned_planet = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_5
						value > 0.4
					}
					free_pop_tiles > 0
				}
			}
			random_owned_planet = {
				limit = {
					habitability = {
						who = event_target:human_fallen_empires_slave_target_5
						value > 0.4
					}
					free_pop_tiles > 0
				}
				resettle_pop = {
					pop = event_target:human_fallen_empires_pirate_slave
					planet = this
				}
			}
			else = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					resettle_pop = {
						pop = event_target:human_fallen_empires_pirate_slave
						planet = this
					}
				}
			}
		}
	}
	# return
	option = {
		name = modmenu_return
		trigger = {
			human_fallen_empires_trigger_pirate_diplomacy_any_menu = yes
		}
		hidden_effect = {
			human_fallen_empires_effect_pirate_diplomacy_remove_flags = yes
			country_event = { id = human_fallen_empires.701 }
		}
	}
	# exit
	option = {
		name = human_fallen_empires_end_transmission
		hidden_effect = {
			human_fallen_empires_effect_pirate_diplomacy_remove_flags = yes
		}
	}
}

# joke event
country_event = {
	id = human_fallen_empires.4999
	diplomatic = yes
	is_triggered_only = yes
	title = TRANSMISSION
	desc = {
		trigger = {
			fail_text = {
				text = human_fallen_empires.4999.desc.0
				has_country_flag = human_fallen_empires.4999.step0
			}
			success_text = {
				text = human_fallen_empires.4999.desc.1
				has_country_flag = human_fallen_empires.4999.step0
			}
		}
	}

	picture_event_data = {
		portrait = event_target:human_fallen_empires_4999_target
		planet_background = event_target:human_fallen_empires_4999_target
		graphical_culture = event_target:human_fallen_empires_4999_target
		city_level = event_target:human_fallen_empires_4999_target
		room = event_target:human_fallen_empires_4999_target
	}

	immediate = {
		if = {
			limit = {
				not = {
					exists = event_target:human_fallen_empires_4999_target
				}
			}
			if = {
				limit = {
					any_country = {
						is_species_class = HUM
					}
				}
				random_country = {
					limit = {
						is_species_class = HUM
					}
					save_event_target_as = human_fallen_empires_4999_target
				}
				else = {
					random_country = {
						save_event_target_as = human_fallen_empires_4999_target
					}
				}
			}
			establish_communications = event_target:human_fallen_empires_4999_target
		}
	}

	option = {
		name = human_fallen_empires.4999.0.0
		trigger = {
			not = {
				has_country_flag = human_fallen_empires.4999.step0
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.4999.step0
			country_event = { id = human_fallen_empires.4999 }
		}
	}
	option = {
		name = human_fallen_empires.4999.1.0
		trigger = {
			has_country_flag = human_fallen_empires.4999.step0
		}
	}
	option = {
		name = human_fallen_empires.4999.1.1
		trigger = {
			has_country_flag = human_fallen_empires.4999.step0
		}
	}
	option = {
		name = human_fallen_empires.4999.1.2
		custom_tooltip = human_fallen_empires.4999.1.2.tooltip
		trigger = {
			has_country_flag = human_fallen_empires.4999.step0
		}
	}
}


### Kad Republic section

# 5000-10000

# functional on actions events 5000 - 5050

# contact dialoge with future 5000 - 5002
country_event  = {
	id = human_fallen_empires.5000
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = default
		exists = from
		from = {
			is_country_type = human_fallen_empire
			has_country_flag = human_fallen_empires_future
		}
	}

	immediate = {
		from = {
			establish_communications = root
			random_owned_leader = {
				limit = {
					gender = female
				}
				save_event_target_as = human_fallen_empires_female_leader
			}
			random_owned_leader = {
				limit = {
					not = { gender = female }
					leader_class = admiral
				}
				save_event_target_as = human_fallen_empires_male_leader
			}
		}
		if = {
			limit = {
				is_ai = no
			}
			set_country_flag = human_fallen_empires.5001.step0
			country_event = { id = human_fallen_empires.5001 }
			else = {
				from = {
					set_closed_borders = {
						who = root
						status = yes
					}
				}
			}
		}
		set_country_flag = human_fallen_empires_future_contacted
	}
}

# main dialoge
country_event = {
	id = human_fallen_empires.5001
	title = TRANSMISSION
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.5001.desc.0
				has_country_flag = human_fallen_empires.5001.step0
			}
			success_text = {
				text = human_fallen_empires.5001.desc.1
				has_country_flag = human_fallen_empires.5001.step1
			}
			success_text = {
				text = human_fallen_empires.5001.desc.2
				has_country_flag = human_fallen_empires.5001.step2
			}
			success_text = {
				text = human_fallen_empires.5001.desc.3
				has_country_flag = human_fallen_empires.5001.step3
			}
			success_text = {
				text = human_fallen_empires.5001.desc.4
				has_country_flag = human_fallen_empires.5001.step4
			}
			success_text = {
				text = human_fallen_empires.5001.desc.5
				has_country_flag = human_fallen_empires.5001.step5
			}
		}
	}
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_female_leader
		room = human_fallen_empires_future_room
	}

	# step 0
	option = {
		name = human_fallen_empires.5001.0.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			any_country = {
				has_communications = root
				not = {
					is_country = root
				}
				has_country_flag = human_fallen_empires_marked_as_human
			}
			human_fallen_empires_trigger_is_xenophobe = yes
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			any_country = {
				has_communications = root
				not = { is_country = root}
				has_country_flag = human_fallen_empires_egypt
			}
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.2
		trigger = {
			has_country_flag = human_fallen_empires_marked_as_human
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				any_country = {
					has_communications = root
					not = { is_country = root}
					has_country_flag = human_fallen_empires_egypt
				}
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.3
		trigger = {
			has_country_flag = human_fallen_empires_marked_as_human
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				any_country = {
					has_communications = root
					not = { is_country = root}
					has_country_flag = human_fallen_empires_egypt
				}
			}
			human_fallen_empires_trigger_is_materialist = yes
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step0
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.6
		trigger = {
			human_fallen_empires_trigger_is_xenophobe = no
			human_fallen_empires_trigger_is_xenophile = no
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.0.7
		trigger = {
			human_fallen_empires_trigger_is_materialist = yes
			has_country_flag = human_fallen_empires.5001.step0
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		human_fallen_empires_effect_materialist_attraction_high = yes
		add_energy = 500
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step0
			set_country_flag = human_fallen_empires.5001.step1
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	# step 1
	option = {
		name = human_fallen_empires.5001.1.0
		trigger = {
			has_country_flag = human_fallen_empires_marked_as_human
			has_country_flag = human_fallen_empires.5001.step1
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			set_country_flag = human_fallen_empires.5001.step2.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.1.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.1.2
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.1.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			human_fallen_empires_trigger_is_spiritualist = yes
		}
		human_fallen_empires_effect_spiritualist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }

		}
	}
	option = {
		name = human_fallen_empires.5001.1.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step1
			nor = {
				has_country_flag = human_fallen_empires_marked_as_human
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_spiritualist
				has_ethic = ethic_spiritualist
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step1
			set_country_flag = human_fallen_empires.5001.step2
			country_event = { id = human_fallen_empires.5001 }

		}
	}
	# step 2
	option = {
		name = human_fallen_empires.5001.2.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			has_country_flag = human_fallen_empires.5001.step2.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			remove_country_flag = human_fallen_empires.5001.step2.human
			set_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step3.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.2.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			not = { has_country_flag = human_fallen_empires.5001.step2.human }
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			set_country_flag = human_fallen_empires.5001.step3
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.2.2
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			human_fallen_empires_trigger_is_xenophobe = yes
			not = {
				has_country_flag = human_fallen_empires.5001.step2.human
			}
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			event_target:human_fallen_empires_future_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.5001.2.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step2
			human_fallen_empires_trigger_is_xenophobe = no
			nor = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
				has_country_flag = human_fallen_empires.5001.step2.human
			}
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step2
			event_target:human_fallen_empires_future_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	# step 3
	option = {
		name = human_fallen_empires.5001.3.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			has_country_flag = human_fallen_empires.5001.step3.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			remove_country_flag = human_fallen_empires.5001.step3.human
			set_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step4.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_authoritarian = yes
		}
		human_fallen_empires_effect_authoritarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_egalitarian = yes
		}
		human_fallen_empires_effect_egalitarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_militarist = yes
		}
		human_fallen_empires_effect_militarist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.6
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_pacifist = yes
		}
		human_fallen_empires_effect_pacifist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.7
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_spiritualist = yes
		}
		human_fallen_empires_effect_spiritualist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.3.8
		trigger = {
			has_country_flag = human_fallen_empires.5001.step3
			human_fallen_empires_trigger_is_materialist = yes
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step3
			set_country_flag = human_fallen_empires.5001.step4
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	# step 4
	option = {
		name = human_fallen_empires.5001.4.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			has_country_flag = human_fallen_empires.5001.step4.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			remove_country_flag = human_fallen_empires.5001.step4.human
			set_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step5.human
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_authoritarian = yes
		}
		human_fallen_empires_effect_authoritarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_egalitarian = yes
		}
		human_fallen_empires_effect_egalitarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_militarist = yes
		}
		human_fallen_empires_effect_militarist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.6
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_pacifist = yes
		}
		human_fallen_empires_effect_pacifist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.7
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_spiritualist = yes
		}
		human_fallen_empires_effect_spiritualist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	option = {
		name = human_fallen_empires.5001.4.8
		trigger = {
			has_country_flag = human_fallen_empires.5001.step4
			human_fallen_empires_trigger_is_materialist = yes
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step4
			set_country_flag = human_fallen_empires.5001.step5
			country_event = { id = human_fallen_empires.5001 }
		}
	}
	# step 5
	option = {
		name = human_fallen_empires.5001.5.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			has_country_flag = human_fallen_empires.5001.step5.human
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			remove_country_flag = human_fallen_empires.5001.step5.human
			set_country_flag = human_fallen_empires.5001.step6
			set_country_flag = human_fallen_empires.5001.step6.human
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_authoritarian = yes
		}
		human_fallen_empires_effect_authoritarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.2
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_egalitarian = yes
		}
		human_fallen_empires_effect_egalitarian_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.3
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.4
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.5
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_militarist = yes
		}
		human_fallen_empires_effect_militarist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.6
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_pacifist = yes
		}
		human_fallen_empires_effect_pacifist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.7
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_spiritualist = yes
		}
		human_fallen_empires_effect_spiritualist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.5.8
		trigger = {
			has_country_flag = human_fallen_empires.5001.step5
			human_fallen_empires_trigger_is_materialist = yes
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step5
			set_country_flag = human_fallen_empires.5001.step6
			country_event = { id = human_fallen_empires.5002 }
		}
	}
}

# part 2 for male portrait
country_event = {
	id = human_fallen_empires.5002
	title = TRANSMISSION
	desc = {
		trigger = {
			success_text = {
				text = "human_fallen_empires.5001.desc.6.1"
				has_country_flag = human_fallen_empires.5001.step6
				is_species_class = HUM
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.6.2"
				has_country_flag = human_fallen_empires.5001.step6
				not = { is_species_class = HUM }
			}
			success_text = {
				text = "human_fallen_empires.5001.desc.7"
				has_country_flag = human_fallen_empires.5001.step7
			}
		}
	}
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_male_leader
		room = human_fallen_empires_future_room
	}

	# step 6
	option = {
		name = human_fallen_empires.5001.6.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step6
			is_species_class = HUM
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step6
			set_country_flag = human_fallen_empires.5001.step7
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.6.1
		trigger = {
			has_country_flag = human_fallen_empires.5001.step6
			not = { is_species_class = HUM }
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step6
			set_country_flag = human_fallen_empires.5001.step7
			country_event = { id = human_fallen_empires.5002 }
		}
	}
	option = {
		name = human_fallen_empires.5001.7.0
		trigger = {
			has_country_flag = human_fallen_empires.5001.step7
		}
		hidden_effect = {
			remove_country_flag = human_fallen_empires.5001.step7
			event_target:human_fallen_empires_future_country = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
}

# make future default country, start expansion era 5010 - 5012
country_event = {
	id = human_fallen_empires.5010
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		not = {
			has_global_flag = human_fallen_empires_future_in_expansion
		}
		or = {
			years_passed > 110
			any_country = {
				is_country_type = default
				fleet_power > 50000
				#	not = {
				#		has_country_flag = human_fallen_empires_egypt
				#	}
			}
		}
	}

	immediate = {
		every_owned_ship = {
			repair_ship = yes
			add_modifier = {
				modifier = human_fallen_empires_unkeep
				days = -1
			}
		}
		add_modifier = {
			modifier = human_fallen_empires_navy_size
			days = 3650
		}
		country_remove_ethic = ethic_fanatic_pacifist
		country_add_ethic = ethic_fanatic_militarist
		country_add_ethic = ethic_egalitarian
		change_government = {
			authority = auth_democratic
			civics = random
		}
		every_owned_pop = {
			limit = {
				pop_has_ethic = ethic_fanatic_pacifist
			}
			pop_change_ethic = ethic_fanatic_militarist
		}
		# kill_leader = {
		# 	type = ruler
		# 	show_notification = no
		# }
		set_country_type = default
		set_empire_name = "Kad Republic"
		set_global_flag = human_fallen_empires_future_in_expansion
		ruler = {
			save_event_target_as = human_fallen_empires_future_ruler
		}
		every_country = {
			establish_communications_no_message = event_target:human_fallen_empires_future_country
			if = {
				limit = { is_ai = no }
				country_event = { id = human_fallen_empires.5011 }
			}
		}
		random_country = {
			limit = {
				is_country_type = default
				fleet_power > 30000
				not = {
					is_country = root
				}
			}
			log = "future awekened by [This.GetName]"
		}
	}
}

# future expansion notification
country_event = {
	id = human_fallen_empires.5011
	title = human_fallen_empires.5011.name
	desc = human_fallen_empires.5011.desc.0
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_future_ruler
		room = human_fallen_empires_future_room
	}

	option = {
		name = human_fallen_empires.5011.0
		trigger = {
			has_country_flag = human_fallen_empires_future_contacted
		}
		# добавить эвент приглашения
		#	hidden_effect = {

		#	}
		custom_tooltip = human_fallen_empires.5011.0.tooltip
	}
	option = {
		name = human_fallen_empires.5011.0
		trigger = {
			not = { has_country_flag = human_fallen_empires_future_contacted }
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires_future_contacted
		}
	}
}

# assimilation event (turn regular subject into coalitionmember subject type) 5020 - 5021
country_event = {
	id = human_fallen_empires.5020
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		any_subject = {
			not = { is_subject_type = human_fallen_empires_future_vassal }
		}
	}

	immediate = {
		random_subject = {
			limit = {
				not = { is_subject_type = human_fallen_empires_future_vassal }
			}
			set_subject_of = {
				who = root
				subject_type = human_fallen_empires_future_vassal
			}
			country_event = { id = human_fallen_empires.5021 }
		}
	}
}

# inform player
country_event = {
	id = human_fallen_empires.5021
	title = human_fallen_empires.5021.name
	desc = human_fallen_empires.5021.desc
	picture = GFX_evt_human_fallen_empires_coalition
	show_sound = event_administrative_work
	is_triggered_only = yes

	trigger = {
		is_ai = no
	}

	option = {
		name = human_fallen_empires.5021.0
	}
}


## anomalys and after survey on actions 5050 - 5100

# criopods anomaly 5050 - 5055

# switch to country
ship_event = {
	id = human_fallen_empires.5050
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				not = { exists = event_target:human_fallen_empires_future_species }
			}
			random_country = {
				limit = {
					has_country_flag = human_fallen_empires_future
				}
				species = { save_event_target_as = human_fallen_empires_future_species }
			}
		}
		from = { save_event_target_as = human_fallen_empires_criopods_planet }
		owner = {
			country_event = { id = human_fallen_empires.5051 }
		}
	}
}

# main event
country_event = {
	id = human_fallen_empires.5051
	title = human_fallen_empires.5051.name
	desc = {
		trigger = {
			# step 0
			# have contact
			success_text = {
				text = human_fallen_empires.5051.desc.0.0
				has_country_flag = human_fallen_empires_future_contacted
			}
			# havent contact
			fail_text = {
				text = human_fallen_empires.5051.desc.0.1
				has_country_flag = human_fallen_empires_future_contacted
			}
			# human addition
			success_text = {
				text = human_fallen_empires.5051.desc.0.2
				not = { has_country_flag = human_fallen_empires_future_contacted }
				has_country_flag = human_fallen_empires_marked_as_human
			}
			# step 1
			text = human_fallen_empires.5051.desc.1.0
			# step 2
			# human
			# have contact
			success_text = {
				text = human_fallen_empires.5051.desc.2.0
				has_country_flag = human_fallen_empires_future_contacted
				has_country_flag = human_fallen_empires_marked_as_human
			}
			# havent contact
			success_text = {
				text = human_fallen_empires.5051.desc.2.1
				not = {
					has_country_flag = human_fallen_empires_future_contacted
				}
				has_country_flag = human_fallen_empires_marked_as_human
			}
			# non human
			# xenophobe
			success_text = {
				text = human_fallen_empires.5051.desc.2.2
				nor = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
				human_fallen_empires_trigger_is_xenophobe = yes
			}
			# xenophile
			success_text = {
				text = human_fallen_empires.5051.desc.2.3
				nor = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
				human_fallen_empires_trigger_is_xenophile = yes
			}
			# authoritarian
			success_text = {
				text = human_fallen_empires.5051.desc.2.4
				not = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
				human_fallen_empires_trigger_is_xenophobe = no
				human_fallen_empires_trigger_is_xenophile = no
				human_fallen_empires_trigger_is_authoritarian = yes
			}
			# egalitarian
			success_text = {
				text = human_fallen_empires.5051.desc.2.5
				not = {
					has_country_flag = human_fallen_empires_marked_as_human
				}
				human_fallen_empires_trigger_is_xenophobe = no
				human_fallen_empires_trigger_is_xenophile = no
				human_fallen_empires_trigger_is_egalitarian = yes
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_colony_new
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_criopods_planet
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.5051.0
		trigger = {
			has_country_flag = human_fallen_empires_future_contacted
			has_country_flag = human_fallen_empires_marked_as_human
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.1
		trigger = {
			not = {
				has_country_flag = human_fallen_empires_future_contacted
			}
			has_country_flag = human_fallen_empires_marked_as_human
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.2
		trigger = {
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.3
		trigger = {
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_high = yes
	}
	option = {
		name = human_fallen_empires.5051.4
		trigger = {
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.5
		trigger = {
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
			human_fallen_empires_trigger_is_xenophobe = no
			human_fallen_empires_trigger_is_xenophile = no
			human_fallen_empires_trigger_is_authoritarian = yes
		}
		human_fallen_empires_effect_authoritarian_attraction_low = yes
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5051.6
		trigger = {
			not = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
			human_fallen_empires_trigger_is_xenophobe = no
			human_fallen_empires_trigger_is_xenophile = no
			human_fallen_empires_trigger_is_egalitarian = yes
		}
		human_fallen_empires_effect_egalitarian_attraction_low = yes
		hidden_effect = {
			random_list = {
				1 = { set_country_flag = human_fallen_empires_criopods_var_1 }
				1 = { set_country_flag = human_fallen_empires_criopods_var_2 }
				1 = { set_country_flag = human_fallen_empires_criopods_var_3 }
			}
			country_event = { id = human_fallen_empires.5052 days = 15 random = 15 }
		}
	}
}

# step 2 for egalitarian
country_event = {
	id = human_fallen_empires.5052
	title = human_fallen_empires.5052.name
	desc = {
		trigger = {
			hidden:root = {
				switch = {
					trigger = has_country_flag

					human_fallen_empires_criopods_var_1 = { text = human_fallen_empires.5052.desc.1 }
					human_fallen_empires_criopods_var_2 = { text = human_fallen_empires.5052.desc.2 }
					human_fallen_empires_criopods_var_3 = { text = human_fallen_empires.5052.desc.3 }
				}
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_colony_new
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_criopods_planet
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.5052.1
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_1
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_colony = {
				owner = root
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5052.2
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_2
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_country = {
				name = random
				type = default
				species = event_target:human_fallen_empires_future_species
				authority = random
				civics = random
				flag = random
				ethos = {
					ethic = ethic_fanatic_egalitarian
					ethic = ethic_militarist
				}
				effect = {
					set_subject_of = {
						who = root
						subject_type = protectorate
					}
				}
			}
			create_colony = {
				owner = last_created_country
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5052.3
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_3
		}
		event_target:human_fallen_empires_criopods_planet = {
			create_country = {
				name = random
				type = default
				species = event_target:human_fallen_empires_future_species
				authority = random
				civics = random
				flag = random
				ethos = {
					ethic = ethic_fanatic_egalitarian
					ethic = ethic_militarist
				}
				effect = {
					establish_communications_no_message = root
				}
			}
			create_colony = {
				owner = last_created_country
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
		}
	}
	option = {
		name = human_fallen_empires.5052.4
		trigger = {
			has_country_flag = human_fallen_empires_criopods_var_3
			human_fallen_empires_trigger_is_militarist = yes
		}
		human_fallen_empires_effect_militarist_attraction_middle = yes
		event_target:human_fallen_empires_criopods_planet = {
			create_country = {
				name = random
				type = default
				species = event_target:human_fallen_empires_future_species
				authority = random
				civics = random
				flag = random
				ethos = {
					ethic = ethic_fanatic_egalitarian
					ethic = ethic_militarist
				}
				effect = {
					establish_communications_no_message = root
				}
			}
			create_colony = {
				owner = last_created_country
				species = event_target:human_fallen_empires_future_species
				ethos = owner
			}
			root = {
				declare_war = {
					who = last_created_country
				}
				add_war_demand = {
					type = cede_planet
					parameter:planet = prev
					target = prev.owner
					warscore_cost = 50
				}
			}
		}
	}
	after = {
		remove_country_flag = human_fallen_empire_criopods_var_1
		remove_country_flag = human_fallen_empire_criopods_var_2
		remove_country_flag = human_fallen_empire_criopods_var_3
	}
}

# dead worms anomaly 5055 - 5057

# start
ship_event = {
	id = human_fallen_empires.5055
	title = human_fallen_empires.5055.name
	desc = human_fallen_empires.5055.desc
	picture = GFX_evt_human_fallen_empires_space_debris
	show_sound = event_mystic_reveal
	location = root
	is_triggered_only = yes

	option  = {
		name = human_fallen_empires_at_the_sreen
		leader = { add_experience = 200 }
		hidden_effect = {
			owner = {
				country_event = { id = human_fallen_empires.5056 }
			}
		}
	}
}

# diplo event
country_event = {
	id = human_fallen_empires.5056
	title = human_fallen_empires.5056.name
	desc = human_fallen_empires.5056.desc
	show_sound = event_mystic_reveal
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = human_fallen_empires_dead_worms_room
	}

	option = {
		name = human_fallen_empires.5056.0
		response_text = human_fallen_empires.5056.0.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5056.1
		response_text = human_fallen_empires.5056.1.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5056.2
		hidden_effect = {
			country_event = { id = human_fallen_empires.5057 }
		}
	}
}

# for pic
country_event = {
	id = human_fallen_empires.5057
	title = human_fallen_empires.5056.name
	desc = human_fallen_empires.5056.2.response
	show_sound = event_space_battle
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		room = human_fallen_empires_bombardment_room
	}

	option = {
		name = human_fallen_empires.5056.3
		trigger = {
			human_fallen_empires_trigger_is_xenophobe = yes
		}
		human_fallen_empires_effect_xenophobe_attraction_low = yes
	}
	option = {
		name = human_fallen_empires.5056.4
		trigger = {
			human_fallen_empires_trigger_is_xenophile = yes
		}
		human_fallen_empires_effect_xenophile_attraction_low = yes
	}
	option = {
		name = human_fallen_empires.5056.5
		trigger = {
			human_fallen_empires_trigger_is_clever_for_event = yes
		}
		human_fallen_empires_effect_materialist_attraction_low = yes
	}
	option = {
		name = human_fallen_empires.5056.6
		trigger = {
			human_fallen_empires_trigger_is_xenophobe = no
			human_fallen_empires_trigger_is_xenophile = no
			human_fallen_empires_trigger_is_clever_for_event = no
		}
	}
}


# other dialoges 5100 - 5200

# buy robots 5100
country_event = {
	id = human_fallen_empires.5100
	title = TRANSMISSION
	desc = {
		trigger = {
			fail_text = {
				text = human_fallen_empires.5100.desc.0
				has_country_flag = human_fallen_empires.5100.step1
			}
			success_text = {
				text = human_fallen_empires.5100.desc.1
				has_country_flag = human_fallen_empires.5100.step1
			}
		}
	}
	#	show_sound = event_alien_signal
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:human_fallen_empires_future_country
		room = human_fallen_empires_future_room
	}

	trigger = {
		any_owned_pop = {
			has_trait = trait_mechanical
		}
		exists = event_target:human_fallen_empires_future_country
	}

	immediate = {
		set_country_flag = human_fallen_empires_future_try_take_robot
	}

	option = {
		name = human_fallen_empires.5100.0
		trigger = {
			not = {
				has_policy_flag = ai_full_rights
			}
		}
		add_modifier = {
			modifier = human_fallen_empires_army_trained_by_future
			days = -1
		}
		hidden_effect = {
			set_global_flag = human_fallen_empires_future_take_robot
			random_owned_pop = {
				limit = {
					has_trait = trait_mechanical
				}
				kill_pop = yes
			}
			event_target:human_fallen_empires_future_country = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					random_tile = {
						limit = {
							not = {
								exists = pop
							}
						}
						build_pop = {
    						name = buildable_robot_pop_3
    						grown = yes
						}
					}
				}
			}
		}
		custom_tooltip = human_fallen_empires.5100.yes.tooltip
	}
	option = {
		name = human_fallen_empires.5100.1
		trigger = {
			or = {
				human_fallen_empires_trigger_is_xenophobe = yes
				human_fallen_empires_trigger_is_authoritarian = yes
			}
			has_policy_flag = ai_full_rights
		}
		add_modifier = {
			modifier = human_fallen_empires_army_trained_by_future
			days = -1
		}
		hidden_effect = {
			set_global_flag = human_fallen_empires_future_take_robot
			random_owned_pop = {
				limit = {
					has_trait = trait_mechanical
				}
				kill_pop = yes
			}
			event_target:human_fallen_empires_future_country = {
				random_owned_planet = {
					limit = {
						free_pop_tiles > 0
					}
					random_tile = {
						limit = {
							not = {
								exists = pop
							}
						}
						build_pop = {
    						name = buildable_robot_pop_3
    						grown = yes
						}
					}
				}
			}
		}
		custom_tooltip = human_fallen_empires.5100.yes.tooltip
	}
	option = {
		name = human_fallen_empires.5100.2
		trigger = {
			human_fallen_empires_trigger_is_xenophobe = no
			human_fallen_empires_trigger_is_authoritarian = no
			has_policy_flag = ai_full_rights
		}
		response_text = human_fallen_empires.5100.no.response
	}
	option = {
		name = human_fallen_empires.5100.3
		response_text = human_fallen_empires.5100.no.response
	}
	option = {
		name = human_fallen_empires.5100.4
		trigger = {
			not = {
				has_country_flag = human_fallen_empires.5100.step1
			}
		}
		hidden_effect = {
			set_country_flag = human_fallen_empires.5100.step1
			country_event = { id = human_fallen_empires.5100 }
		}
	}
	option = {
		name = human_fallen_empires.5100.5
		trigger = {
			has_country_flag = human_fallen_empires.5100.step1
		}
		response_text = human_fallen_empires.5100.5.response
		is_dialog_only = yes
	}
}










# The War in Heavens by Human Fallen Empires
#10000 - 15000

# awake event
event = {
	id = human_fallen_empires.10000
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		years_passed > 100
		any_country = {
			is_country_type = fallen_empire
			is_at_war = no
		}
		any_country = {
			is_country_type = default
			OR = {
				and = {
					is_difficulty = 0
					fleet_power > 40000
				}
				and = {
					is_difficulty = 1
					fleet_power > 50000
				}
				fleet_power > 60000
				any_owned_planet = {
					has_planet_flag = fallen_empire_world
				}
			}
		}
	}

	immediate = {
		random_country = {
			random_list = {
				400 = { }
				100 = {
					modifier = {
						factor = 2
						any_country = {
							is_country_type = default
							OR = {
								AND = {
									is_difficulty = 2
									fleet_power > 60000
								}
								AND = {
									is_difficulty = 1
									fleet_power > 80000
								}
								fleet_power > 100000
							}
						}
					}
					modifier = {
						factor = 0.5
						num_fallen_empires > 1
						num_fallen_empires < 3
					}
					modifier = {
						factor = 0.5
						num_fallen_empires > 2
						num_fallen_empires < 4
					}
					modifier = {
						factor = 0.25
						num_fallen_empires > 3
					}
					modifier = {
						factor = 10
						any_country = {
							is_country_type = default
							any_owned_planet = {
								has_planet_flag = fallen_empire_world
							}
						}
					}
					modifier = {
						factor = 100
						has_global_flag = high_awaken_chance
					}
					modifier = {
						factor = 2
						has_global_flag = galactic_crisis_happened
					}
					# awake random fallen
					random_country = {
						limit = {
							is_country_type = fallen_empire
						}
						set_global_flag = sleepers_awake_happened
						set_global_flag = human_fallen_empires_sleepers_awake_happened
						country_event = { id = fallen_empires_awakening.3 }
						country_event = { id = human_fallen_empires.10001 }
					}
				}
			}
		}
	}
}

# for inform
country_event = {
	id = human_fallen_empires.10001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		# inform player
		every_country = {
			limit = {
				is_ai = no
			}
			establish_communications_no_message = from
			country_event = { id = fallen_empires_awakening.2 }
		}
	}
}

# start war 100010
country_event = {
	id = human_fallen_empires.10010
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		host_has_dlc = "Leviathans Story Pack"
		any_country = {
			is_country_type = awakened_fallen_empire
			or = {
				is_at_war = no
				has_global_flag = human_fallen_empires_war_in_heaven_started_by_ai
			}
			fleet_power > 40000
			count > 1
		}
	}

	immediate = {
		log = "war in heavens started"
		random_list = {
			1 = { }
			4 = {
				if = {
					limit = {
						not = {
							has_global_flag = human_fallen_empires_war_in_heaven_started_by_ai
						}
					}
					break = yes
				}
			}
		}
		every_country = {
			limit = {
				is_country_type = awakened_fallen_empire
			}
			remove_country_flag = ai_no_wars
			country_event = { id = fallen_empires.13 }
			if = {
				limit = {
					any_country = {
						is_country_type = default
						fleet_power > 50000
					}
				}
				country_event = { id = fallen_empires.13 }
			}
		}
		every_country = {
			limit = {
				is_country_type = awakened_fallen_empire
				or = {
					is_at_war = no
					has_global_flag = human_fallen_empires_war_in_heaven_started_by_ai
				}
			}
			human_fallen_empires_effect_save_event_target = yes
		}
		# can be up to 6 targets from 0 to 5 index
		if = {
			limit = {
				exists = event_target:human_fallen_empires_event_target_5
			}
			# 5 vs all other
			# 5 vs 4
			event_target:human_fallen_empires_event_target_5 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_4 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 5 vs 3
			event_target:human_fallen_empires_event_target_5 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_3 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 5 vs 2
			event_target:human_fallen_empires_event_target_5 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_2 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 5 vs 1
			event_target:human_fallen_empires_event_target_5 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_1 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 5 vs 0
			event_target:human_fallen_empires_event_target_5 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_0 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_event_target_4
			}
			# 4 vs all other
			# 4 vs 3
			event_target:human_fallen_empires_event_target_4 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_3 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 4 vs 2
			event_target:human_fallen_empires_event_target_4 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_2 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 4 vs 1
			event_target:human_fallen_empires_event_target_4 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_1 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 4 vs 0
			event_target:human_fallen_empires_event_target_4 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_0 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_event_target_3
			}
			# 3 vs all other
			# 3 vs 2
			event_target:human_fallen_empires_event_target_3 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_2 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 3 vs 1
			event_target:human_fallen_empires_event_target_3 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_1 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 3 vs 0
			event_target:human_fallen_empires_event_target_3 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_0 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_event_target_2
			}
			# 2 vs all other
			# 2 vs 1
			event_target:human_fallen_empires_event_target_2 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_1 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
			# 2 vs 0
			event_target:human_fallen_empires_event_target_2 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_0 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_event_target_1
			}
			# 1 vs all other
			# 1 vs 0
			event_target:human_fallen_empires_event_target_1 = {
				save_event_target_as = human_fallen_empires_war_attaker
			}
			event_target:human_fallen_empires_event_target_0 = {
				save_event_target_as = human_fallen_empires_war_defender
			}
			human_fallen_empires_effect_declare_total_war = yes
		}
		every_country = {
			limit = {
				is_country_type = default
			}
			country_event = { id = human_fallen_empires.10050 }
		}
		set_global_flag = human_fallen_empires_war_in_heaven_started
	}
}

# fire event by on_war_beginning
country_event = {
	id = human_fallen_empires.10011
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		host_has_dlc = "Leviathans Story Pack"
		not = {
			has_global_flag = human_fallen_empires_war_in_heaven_started_by_ai
		}
		is_country_type = awakened_fallen_empire
		any_country = {
			is_country_type = awakened_fallen_empire
			is_at_war_with = root
		}
	}

	immediate = {
		set_global_flag = human_fallen_empires_war_in_heaven_started_by_ai
		random_country = {
			country_event = { id = human_fallen_empires.10010 }
		}
		log = "war in heavens start by ai"
	}
}


# inform events with text 10050
country_event = {
	id = human_fallen_empires.10050
	title = human_fallen_empires.10050.name
	desc = {
		trigger = {
			fail_text = {
				text = human_fallen_empires.10050.desc.0.0
				exists = event_target:human_fallen_empires_event_target_2
			}
			success_text = {
				text = human_fallen_empires.10050.desc.0.1
				exists = event_target:human_fallen_empires_event_target_2
				not = {
					exists = event_target:human_fallen_empires_event_target_3
				}
			}
			success_text = {
				text = human_fallen_empires.10050.desc.0.2
				exists = event_target:human_fallen_empires_event_target_3
			}
			text = newline
			success_text = {
				text = human_fallen_empires.10050.desc.1.0
				exists = event_target:human_fallen_empires_coalition_leader
			}
			text = newline
			success_text = {
				text = human_fallen_empires.10050.desc.1.1
				exists = event_target:human_fallen_empires_egypt_country
				event_target:human_fallen_empires_egypt_country = {
					not = {
						is_country = event_target:human_fallen_empires_coalition_leader
					}
				}
			}
			text = newline
			text = human_fallen_empires.10050.desc.2.0
		}
	}
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_alien_signal
	is_triggered_only = yes

	# step 0 for vanilla fallen empires
	option = {
		name = human_fallen_empires.10050.0.0
		trigger = {
			is_subject = no
			is_country_type = default
			exists = event_target:human_fallen_empires_event_target_0
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_militarist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_xenophile = no
					}
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_spiritualist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_materialist = no
					}
					human_fallen_empires_trigger_is_xenophobe = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_xenophile = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_militarist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_spiritualist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_0 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_materialist = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_0 = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_0
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_0 = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_0
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_0 = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_0
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_0 = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_0
					subject_type = satellite
				}
			}
			add_opinion_modifier = {
				who = event_target:human_fallen_empires_event_target_0
				modifier = opinion_war_in_heaven_ally
			}
			event_target:human_fallen_empires_event_target_0 = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_war_in_heaven_ally
				}
			}
			join_war = event_target:human_fallen_empires_event_target_0
		}
	}
	option = {
		name = human_fallen_empires.10050.0.1
		trigger = {
			is_subject = no
			is_country_type = default
			exists = event_target:human_fallen_empires_event_target_1
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_militarist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_xenophile = no
					}
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_spiritualist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_materialist = no
					}
					human_fallen_empires_trigger_is_xenophobe = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_xenophile = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_militarist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_spiritualist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_1 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_materialist = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_1 = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_1
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_1 = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_1
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_1 = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_1
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_1 = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_1
					subject_type = satellite
				}
			}
			add_opinion_modifier = {
				who = event_target:human_fallen_empires_event_target_1
				modifier = opinion_war_in_heaven_ally
			}
			event_target:human_fallen_empires_event_target_1 = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_war_in_heaven_ally
				}
			}
			join_war = event_target:human_fallen_empires_event_target_1
		}
	}
	option = {
		name = human_fallen_empires.10050.0.2
		trigger = {
			is_subject = no
			is_country_type = default
			exists = event_target:human_fallen_empires_event_target_2
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_militarist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_xenophile = no
					}
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_spiritualist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_materialist = no
					}
					human_fallen_empires_trigger_is_xenophobe = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_xenophile = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_militarist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_spiritualist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_2 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_materialist = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_2 = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_2
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_2 = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_2
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_2 = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_2
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_2 = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_2
					subject_type = satellite
				}
			}
			add_opinion_modifier = {
				who = event_target:human_fallen_empires_event_target_2
				modifier = opinion_war_in_heaven_ally
			}
			event_target:human_fallen_empires_event_target_2 = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_war_in_heaven_ally
				}
			}
			join_war = event_target:human_fallen_empires_event_target_2
		}
	}
	option = {
		name = human_fallen_empires.10050.0.3
		trigger = {
			is_subject = no
			is_country_type = default
			exists = event_target:human_fallen_empires_event_target_3
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_militarist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_xenophile = no
					}
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_spiritualist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_materialist = no
					}
					human_fallen_empires_trigger_is_xenophobe = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_xenophile = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_militarist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_spiritualist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_3 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_materialist = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_3 = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_3
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_3 = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_3
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_3 = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_3
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_3 = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_3
					subject_type = satellite
				}
			}
			add_opinion_modifier = {
				who = event_target:human_fallen_empires_event_target_3
				modifier = opinion_war_in_heaven_ally
			}
			event_target:human_fallen_empires_event_target_3 = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_war_in_heaven_ally
				}
			}
			join_war = event_target:human_fallen_empires_event_target_3
		}
	}
	option = {
		name = human_fallen_empires.10050.0.4
		trigger = {
			is_subject = no
			is_country_type = default
			exists = event_target:human_fallen_empires_event_target_4
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_militarist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_xenophile = no
					}
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_spiritualist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_materialist = no
					}
					human_fallen_empires_trigger_is_xenophobe = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_xenophile = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_militarist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_spiritualist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_4 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_materialist = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_4 = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_4
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_4 = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_4
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_4 = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_4
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_4 = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_4
					subject_type = satellite
				}
			}
			add_opinion_modifier = {
				who = event_target:human_fallen_empires_event_target_4
				modifier = opinion_war_in_heaven_ally
			}
			event_target:human_fallen_empires_event_target_4 = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_war_in_heaven_ally
				}
			}
			join_war = event_target:human_fallen_empires_event_target_4
		}
	}
	option = {
		name = human_fallen_empires.10050.0.5
		trigger = {
			is_subject = no
			is_country_type = default
			exists = event_target:human_fallen_empires_event_target_5
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				or = {
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_militarist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_xenophile = no
					}
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_spiritualist = no
					}
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_materialist = no
					}
					human_fallen_empires_trigger_is_xenophobe = yes
				}
			}
			modifier = {
				factor = 0.1
				or = {
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_xenophobe
						}
						human_fallen_empires_trigger_is_xenophile = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_xenophile
						}
						human_fallen_empires_trigger_is_militarist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_materialist
						}
						human_fallen_empires_trigger_is_spiritualist = yes
					}
					and = {
						event_target:human_fallen_empires_event_target_5 = {
							has_ethic = ethic_fanatic_spiritualist
						}
						human_fallen_empires_trigger_is_materialist = yes
					}
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_5 = {
						has_ethic = ethic_fanatic_xenophobe
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_5
					subject_type = thrall
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_5 = {
						has_ethic = ethic_fanatic_xenophile
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_5
					subject_type = signatory
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_5 = {
						has_ethic = ethic_fanatic_spiritualist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_5
					subject_type = dominion
				}
			}
			if = {
				limit = {
					event_target:human_fallen_empires_event_target_5 = {
						has_ethic = ethic_fanatic_materialist
					}
				}
				set_subject_of = {
					who = event_target:human_fallen_empires_event_target_5
					subject_type = satellite
				}
			}
			add_opinion_modifier = {
				who = event_target:human_fallen_empires_event_target_5
				modifier = opinion_war_in_heaven_ally
			}
			event_target:human_fallen_empires_event_target_5 = {
				add_opinion_modifier = {
					who = root
					modifier = opinion_war_in_heaven_ally
				}
			}
			join_war = event_target:human_fallen_empires_event_target_5
		}
	}
	# step 1 for human fallen empires
	option = {
		name = human_fallen_empires.10050.1.0
		trigger = {
			is_subject = no
			#is_at_war = no		#подумать над этим
			is_country_type = default
			exists = event_target:human_fallen_empires_coalition_leader
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				or = {
					has_ai_personality = fanatic_purifiers
					has_ai_personality = metalhead
					has_country_flag = human_fallen_empires_egypt
				}
			}
			modifier = {
				factor = 0.5
				human_fallen_empires_trigger_is_egalitarian = no
				human_fallen_empires_trigger_is_xenophile = no
				human_fallen_empires_trigger_is_militarist = no
			}
			modifier = {
				factor = 0.1
				or = {
					human_fallen_empires_trigger_is_authoritarian = yes
					human_fallen_empires_trigger_is_xenophobe = yes
					human_fallen_empires_trigger_is_pacifist = yes
				}
			}
		}
		hidden_effect = {
			set_country_flag = war_in_heaven_picked_side
			event_target:human_fallen_empires_coalition_leader = {
				guarantee_country = {
					target = root
					free_guarantee_days = 3650
				}
			}
			set_subject_of = {
				who = event_target:human_fallen_empires_coalition_leader
				subject_type = human_fallen_empires_future_vassal
			}
			add_opinion_modifier = { who = event_target:human_fallen_empires_future_country modifier = opinion_war_in_heaven_ally }
			event_target:human_fallen_empires_coalition_leader = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_ally } }
			# стоит ли добавить модификатор врага? from = { add_opinion_modifier = { who = root modifier = opinion_war_in_heaven_enemy } }
			join_war = event_target:human_fallen_empires_coalition_leader
		}
	}
	# step 2 for other options
	option = {
		name = human_fallen_empires.10050.2.0
		trigger = {
			is_subject = no
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.5
				fleet_power < 5000
			}
			modifier = {
				factor = 0.5
				fleet_power < 10000
			}
			modifier = {
				factor = 1.5
				fleet_power > 20000
			}
			modifier = {
				factor = 2
				fleet_power > 30000
			}
			modifier = {
				factor = 10
				fleet_power > 40000
			}
			modifier = {
				factor = 5
				has_federation = yes
			}
			modifier = {
				factor = 2
				any_country = {
					is_ai = no
					is_in_federation_with = root
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.10050.2.1
		trigger = {
			is_subject = yes
		}
		if = {
			limit = {
				overlord = { is_country = event_target:human_fallen_empires_1_awakened }
			}
			join_war = event_target:human_fallen_empires_1_awakened
		}
		if = {
			limit = {
				overlord = { is_country = event_target:human_fallen_empires_2_awakened }
			}
			join_war = event_target:human_fallen_empires_2_awakened
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_3_awakened
				overlord = { is_country = event_target:human_fallen_empires_3_awakened }
			}
			join_war = event_target:human_fallen_empires_3_awakened
		}
		if = {
			limit = {
				exists = event_target:human_fallen_empires_4_awakened
				overlord = { is_country = event_target:human_fallen_empires_4_awakened }
			}
			join_war = event_target:human_fallen_empires_4_awakened
		}
	}
}

# event for empire after total war win 10150
country_event = {
	id = human_fallen_empires.10150
	title = human_fallen_empires.10150.name
	desc = human_fallen_empires.10150.desc.0
	picture = GFX_evt_fallen_empire_awakes
	show_sound = event_space_battle
	is_triggered_only = yes

	# make primitive
	option = {
		name = human_fallen_empires.10150.0
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				human_fallen_empires_trigger_is_materialist = no
			}
		}
		human_fallen_empires_effect_materialist_attraction_high = yes
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10151 }
			}
			event_target:WarInHeavenLoserFE = {
				every_owned_planet = {
					human_fallen_empires_effect_create_primitive = yes
				}
			}
		}
	}
	# annex
	option = {
		name = human_fallen_empires.10150.1
		ai_chance = {
			factor = 100
			modifier = {
				factor = 100
				has_country_flag = human_fallen_empires_egypt
			}
			modifier = {
				factor = 0
				human_fallen_empires_trigger_is_authoritarian = no
				human_fallen_empires_trigger_is_egalitarian = no
			}
		}
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10152 }
			}
			event_target:WarInHeavenLoserFE = {
				every_owned_planet = {
					add_threat = {
						who = root
						amount = 1 # scales to pops
					}
					set_owner = root
					set_controller = root
				}
			}
		}
	}
	# make vassal
	option = {
		name = human_fallen_empires.10150.2
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				human_fallen_empires_trigger_is_spiritualist = no
				human_fallen_empires_trigger_is_xenophile = no
				not = {
					has_country_flag = human_fallen_empires_coalition_leader
				}
			}
		}
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10152 }
			}
			event_target:WarInHeavenLoserFE = {
				every_owned_planet = {
					human_fallen_empires_effect_create_vassal = yes
				}
			}
		}
	}
	# kill them all
	option = {
		name = human_fallen_empires.10150.3
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				human_fallen_empires_trigger_is_xenophobe = no
			}
		}
		human_fallen_empires_effect_xenophobe_attraction_high = yes
		hidden_effect = {
			# inform
			every_country = {
				limit = {
					is_ai = no
				}
				country_event = { id = human_fallen_empires.10154 }
			}
			event_target:WarInHeavenLoserFE = {
				every_owned_planet = {
					add_threat = {
						who = root
						amount = 3 # scales to pops
					}
					destroy_colony = yes
				}
			}
		}
	}
}

# inform after total war
country_event = {
	id = human_fallen_empires.10151
	title = human_fallen_empires.10151.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.10151.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10151.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_tech_fail
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10151.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10151.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}

country_event = {
	id = human_fallen_empires.10152
	title = human_fallen_empires.10152.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.10152.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10152.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_ships_on_orbit
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10152.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10152.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}

country_event = {
	id = human_fallen_empires.10153
	title = human_fallen_empires.10153.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.10153.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10153.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_city_center
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10153.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10153.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}

country_event = {
	id = human_fallen_empires.10154
	title = human_fallen_empires.10154.name
	desc = {
		trigger = {
			success_text = {
				text = human_fallen_empires.101513.desc.0
				is_country = from
			}
			fail_text = {
				text = human_fallen_empires.10154.desc.1
				is_country = from
			}
		}
	}
	picture = GFX_evt_human_fallen_empires_ruins
	show_sound = event_space_battle
	is_triggered_only = yes

	option = {
		name = human_fallen_empires.10154.0
		trigger = {
			is_country = from
		}
	}

	option = {
		name = human_fallen_empires.10154.1
		trigger = {
			not = {
				is_country = from
			}
		}
	}
}

# fallen drain resurces if losing war 10200
country_event = {
	id = human_fallen_empires.10200
	title = human_fallen_empires.10200.name
	desc = human_fallen_empires.100200.desc.0
	picture = GFX_evt_human_fallen_empires_fallen_3
	show_sound = event_alien_signal
	is_triggered_only = yes

	trigger = {
		exists = overlord
	}

	option = {
		name = human_fallen_empires.10050.0
		add_modifier = {
			modifier = human_fallen_empires_fallen_resurces_drain
			days = 1825
		}
		overlord = {
			add_modifier = {
				modifier = human_fallen_empires_fallen_ship_build_buff
				days = 1825
			}
		}
	}
}
