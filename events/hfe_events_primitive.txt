#
namespace = hfe_primitive

# functional events for primitives 0

# primitive can make colony in same system
country_event = {
	id = hfe_primitive.200
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_country_type = primitive
		has_country_flag = early_space_age
		exists = capital_scope.solar_system
		capital_scope.solar_system = {
			any_system_planet = {
				habitability = {
					who = root.species
					value > 0.2
				}
				# can_colonize = {
				# 	who = root
				# 	status = yes
				# }
				not = {
					exists = owner
				}
				is_under_colonization = no
			}
		}
	}

	immediate = {
		create_fleet = {
			effect = {
				set_owner = root
				create_ship = {
					random_existing_design = colonizer
				}
				set_location = root.capital_scope
				save_event_target_as = hfe_primitive_100_fleet
				queue_actions = {
					find_closest_planet = {
						trigger = {
							id = hfe_primitive.200_fleet_trigger.0
							habitability = {
								who = root.species
								value > 0.2
							}
							not = {
								exists = owner
							}
							is_under_colonization = no
						}
						found_planet = {
							move_to = this
							effect = {
								id = hfe_primitive.200_fleet_effect.0
								start_colony = {
									owner = root
								}
								delete_fleet = event_target:hfe_primitive_100_fleet
							}
						}
						failed = {
							effect = {
								id = hfe_primitive.200_fleet_effect.1
								delete_fleet = event_target:hfe_primitive_100_fleet
							}
						}
					}
				}
			}
		}
	}
}
